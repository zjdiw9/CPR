{"version":3,"sources":["../node_modules/_@babel_runtime@7.12.5@@babel/runtime/regenerator/index.js","../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/_regenerator-runtime@0.13.7@regenerator-runtime/runtime.js","../node_modules/_three@0.124.0@three/examples/jsm/loaders/DRACOLoader.js","../node_modules/_three@0.124.0@three/examples/jsm/libs/inflate.module.min.js","../node_modules/_three@0.124.0@three/examples/jsm/curves/NURBSUtils.js","../node_modules/_three@0.124.0@three/examples/jsm/curves/NURBSCurve.js","../node_modules/_three@0.124.0@three/examples/jsm/loaders/FBXLoader.js","../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/esm/nonIterableSpread.js"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","runtime","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","DRACOLoader","manager","Loader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","position","normal","color","uv","defaultAttributeTypes","assign","setDecoderPath","path","setDecoderConfig","config","setWorkerLimit","setVerbosity","console","warn","setDrawMode","setSkipDequantization","load","url","onLoad","onProgress","onError","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","buffer","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","catch","decodeDracoFile","callback","attribute","BYTES_PER_ELEMENT","worker","taskKey","JSON","stringify","taskCache","has","cachedTask","get","promise","byteLength","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","id","message","_createGeometry","geometry","_releaseTask","set","geometryData","BufferGeometry","index","setIndex","BufferAttribute","array","attributes","itemSize","setAttribute","_loadLibrary","responseType","preload","_initDecoder","useJS","WebAssembly","librariesPending","all","libraries","jsContent","wasmBinary","DRACOWorker","body","substring","indexOf","lastIndexOf","join","URL","createObjectURL","Blob","Worker","_taskCosts","_taskLoad","onmessage","e","data","sort","a","b","debug","log","map","dispose","terminate","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","numComponents","num_components","numValues","num_points","dataType","Float32Array","DT_FLOAT32","Int8Array","DT_INT8","Int16Array","DT_INT16","Int32Array","DT_INT32","Uint8Array","DT_UINT8","Uint16Array","DT_UINT16","Uint32Array","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","Decoder","decoderBuffer","DecoderBuffer","Init","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","numIndices","num_faces","GetTrianglesUInt32Array","decodeIndex","destroy","buffers","attr","WeakMap","releaseDecoderModule","getDecoderModule","mod","aa","r","c","d","split","execScript","shift","t","DataView","v","f","g","h","k","m","n","p","s","x","Number","POSITIVE_INFINITY","Array","w","l","input","y","bufferSize","bufferType","resize","A","z","j","B","C","subarray","ba","ca","S","T","U","V","D","u","M","F","q","E","P","fa","G","H","I","J","K","L","da","ea","N","O","R","ga","Q","W","verify","ha","o","charCodeAt","Y","Z","$","ia","X","ADAPTIVE","BLOCK","Inflate","Zlib","NURBSUtils","findSpan","low","high","mid","Math","floor","calcBasisFunctions","span","left","right","saved","rv","lv","temp","calcBSplinePoint","Vector4","point","Nj","wNj","calcBasisFunctionDerivatives","zeroArr","ders","ndu","s1","s2","rk","pk","j2","calcBSplineDerivatives","nd","du","CK","nders","Pw","clone","multiplyScalar","add","calcKoverI","nom","denom","calcRationalCurveDerivatives","Pders","Aders","wders","Vector3","sub","divideScalar","calcNURBSDerivatives","calcSurfacePoint","target","uspan","vspan","Nu","Nv","Sw","NURBSCurve","degree","knots","controlPoints","startKnot","endKnot","Curve","getPoint","optionalTarget","hpoint","getTangent","tangent","copy","normalize","FBXLoader","fbxTree","connections","sceneGraph","FBXTreeParser","textureLoader","GeometryParser","AnimationParser","TextParser","BinaryParser","BinaryReader","littleEndian","dv","offset","FBXTree","getFbxVersion","text","match","parseInt","convertFBXTimeToSeconds","time","scope","LoaderUtils","extractUrlBase","parse","itemError","FBXBuffer","CORRECT","convertArrayBufferToString","isFbxFormatBinary","FBXText","cursor","read","isFbxFormatASCII","TextureLoader","resourcePath","setCrossOrigin","crossOrigin","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","parseScene","connectionMap","Map","Connections","rawConnection","fromID","toID","relationship","parents","children","parentRelationship","ID","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","image","parseImage","filename","content","fileName","extension","toLowerCase","getHandler","window","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","Scaling","repeat","currentPath","FileName","materialMap","materialNodes","Material","material","parseMaterial","materialNode","ShadingModel","parameters","parseParameters","MeshPhongMaterial","MeshLambertMaterial","setValues","BumpFactor","bumpScale","Diffuse","Color","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","parseFloat","Opacity","opacity","transparent","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","getTexture","aoMap","encoding","sRGBEncoding","displacementMap","emissiveMap","normalMap","envMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","indices","weights","transformLink","Matrix4","TransformLink","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","filter","Group","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","connection","parent","bindSkeleton","createAmbientLight","setupMorphMaterials","traverse","node","userData","transformData","parentMatrixWorld","matrix","transform","generateTransform","applyMatrix4","animations","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","Bone","PropertyBinding","sanitizeNodeName","getTransformData","bone","subBone","matrixWorld","cameraAttribute","NodeAttribute","Object3D","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","height","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","PerspectiveCamera","setFocalLength","OrthographicCamera","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","distance","FarAttenuationEnd","EnableFarAttenuation","PointLight","DirectionalLight","angle","PI","InnerAngle","MathUtils","degToRad","penumbra","OuterAngle","max","SpotLight","CastShadows","castShadow","vertexColors","FBX_Deformer","skinning","SkinnedMesh","normalizeSkinWeights","reduce","geo","LineBasicMaterial","linewidth","Line","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","rotation","Lcl_Rotation","postRotation","PostRotation","scale","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","pos","lookAt","bindMatrices","parsePoseNodes","geoConnParent","bind","Skeleton","BindPoseNode","Pose","poseNodes","PoseNode","isArray","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","AmbientLight","isMesh","morphAttributes","setupMorphMaterial","uuid","matUuid","sharedMat","mat","clonedMat","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","genBuffers","positionAttribute","Float32BufferAttribute","vertex","colors","Uint16BufferAttribute","weightsIndices","vertexWeights","normalMatrix","Matrix3","getNormalMatrix","normalAttribute","applyNormalMatrix","uvs","uvBuffer","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","addGroup","groups","lastGroup","lastIndex","start","count","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","UV","parseUVs","weightTable","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","morphTargetsRelative","rawTarget","morphGeoNode","genMorphGeometry","morphPositionsSparse","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","order","Order","KnotVector","pointsValues","Points","Form","vertices","getPoints","positions","toArray","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","curves","rawCurves","animationCurve","times","KeyTime","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","concat","generateTracks","AnimationClip","Quaternion","decompose","Euler","setFromQuaternion","positionTrack","generateVectorTrack","rotationTrack","generateRotationTrack","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","invert","quaternion","euler","quaternionValues","premultiply","multiply","QuaternionKeyframeTrack","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","targetIndex","lastValue","currentValue","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","curve","valuesSpan","absoluteSpan","abs","numSubIntervals","step","nextValue","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeName","trim","replace","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","from","to","rest","append","elem","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","skip","version","getUint32","endOfContent","parseNode","size","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","reader2","decompress","nullByte","decodeText","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lGlobalT","setPosition","makeRotationFromEuler","lLRM","lParentGRM","extractRotation","copyPosition","lParentGSM","lGlobalRS","lParentLSM_inv","lParentGSM_noLocal","lRotationPivotM_inv","lScalingPivotM_inv","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","a1","a2","_toConsumableArray","arr","arrayLikeToArray","unsupportedIterableToArray"],"mappings":"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","file":"static/js/9.3f58a960.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n} from '../../../build/three.module.js';\n\nvar DRACOLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.decoderPath = '';\n\tthis.decoderConfig = {};\n\tthis.decoderBinary = null;\n\tthis.decoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\n\tthis.defaultAttributeIDs = {\n\t\tposition: 'POSITION',\n\t\tnormal: 'NORMAL',\n\t\tcolor: 'COLOR',\n\t\tuv: 'TEX_COORD'\n\t};\n\tthis.defaultAttributeTypes = {\n\t\tposition: 'Float32Array',\n\t\tnormal: 'Float32Array',\n\t\tcolor: 'Float32Array',\n\t\tuv: 'Float32Array'\n\t};\n\n};\n\nDRACOLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DRACOLoader,\n\n\tsetDecoderPath: function ( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetDecoderConfig: function ( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\t/** @deprecated */\n\tsetVerbosity: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setVerbosity() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetDrawMode: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setDrawMode() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetSkipDequantization: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setSkipDequantization() method has been removed.' );\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tvar taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile: function ( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tvar taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t},\n\n\tdecodeGeometry: function ( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( var attribute in taskConfig.attributeTypes ) {\n\n\t\t\tvar type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( DRACOLoader.taskCache.has( buffer ) ) {\n\n\t\t\tvar cachedTask = DRACOLoader.taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar worker;\n\t\tvar taskID = this.workerNextTaskID ++;\n\t\tvar taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tvar geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tDRACOLoader.taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t},\n\n\t_createGeometry: function ( geometryData ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tvar attribute = geometryData.attributes[ i ];\n\t\t\tvar name = attribute.name;\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\t_loadLibrary: function ( url, responseType ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t},\n\n\tpreload: function () {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t},\n\n\t_initDecoder: function () {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tvar librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tvar jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar fn = DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\tvar body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t},\n\n\t_getWorker: function ( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\t_releaseTask: function ( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t},\n\n\tdebug: function () {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* WEB WORKER */\n\nDRACOLoader.DRACOWorker = function () {\n\n\tvar decoderConfig;\n\tvar decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tvar buffer = message.buffer;\n\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tvar buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\tvar dracoGeometry;\n\t\tvar decodingStatus;\n\n\t\tvar geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( var attributeName in attributeIDs ) {\n\n\t\t\tvar attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tvar attribute;\n\t\t\tvar attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tvar numFaces = dracoGeometry.num_faces();\n\t\tvar numIndices = numFaces * 3;\n\t\tvar byteLength = numIndices * 4;\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tvar index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tvar numComponents = attribute.num_components();\n\t\tvar numPoints = dracoGeometry.num_points();\n\t\tvar numValues = numPoints * numComponents;\n\t\tvar byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tvar dataType = getDracoDataType( draco, attributeType );\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tvar array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n};\n\nDRACOLoader.taskCache = new WeakMap();\n\n/** Deprecated static methods */\n\n/** @deprecated */\nDRACOLoader.setDecoderPath = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.setDecoderConfig = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.releaseDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.getDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\nexport { DRACOLoader };\n","/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={}, l=void 0,aa=mod;function r(c,d){var a=c.split(\".\"),b=aa;!(a[0]in b)&&b.execScript&&b.execScript(\"var \"+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?b[e]=d:b=b[e]?b[e]:b[e]={}};var t=\"undefined\"!==typeof Uint8Array&&\"undefined\"!==typeof Uint16Array&&\"undefined\"!==typeof Uint32Array&&\"undefined\"!==typeof DataView;function v(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,k,m,n,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;x=g<<16|p;for(s=m;s<e;s+=k)f[s]=x;++h}++g;h<<=1;k<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.d=this.f=this.a=this.l=0;this.input=t?new Uint8Array(c):c;this.m=!1;this.i=y;this.r=!1;if(d||!(d={}))d.index&&(this.a=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.r=d.resize);switch(this.i){case A:this.b=32768;this.c=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0;this.c=new (t?Uint8Array:Array)(this.h);this.e=this.z;this.n=this.v;this.j=this.w;break;default:throw Error(\"invalid inflate mode\");\n}}var A=0,y=1,B={t:A,s:y};\nw.prototype.k=function(){for(;!this.m;){var c=C(this,3);c&1&&(this.m=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.a,b=this.c,e=this.b,f=d.length,g=l,h=l,k=b.length,m=l;this.d=this.f=0;if(a+1>=f)throw Error(\"invalid uncompressed block header: LEN\");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error(\"invalid uncompressed block header: NLEN\");h=d[a++]|d[a++]<<8;if(g===~h)throw Error(\"invalid uncompressed block header: length verify\");if(a+g>d.length)throw Error(\"input buffer is broken\");switch(this.i){case A:for(;e+\ng>b.length;){m=k-e;g-=m;if(t)b.set(d.subarray(a,a+m),e),e+=m,a+=m;else for(;m--;)b[e++]=d[a++];this.b=e;b=this.e();e=this.b}break;case y:for(;e+g>b.length;)b=this.e({p:2});break;default:throw Error(\"invalid inflate mode\");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.a=a;this.b=e;this.c=b;break;case 1:this.j(ba,ca);break;case 2:for(var n=C(this,5)+257,p=C(this,5)+1,s=C(this,4)+4,x=new (t?Uint8Array:Array)(D.length),S=l,T=l,U=l,u=l,M=l,F=l,z=l,q=l,V=l,q=0;q<s;++q)x[D[q]]=\nC(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[D[q]]=0}S=v(x);u=new (t?Uint8Array:Array)(n+p);q=0;for(V=n+p;q<V;)switch(M=E(this,S),M){case 16:for(z=3+C(this,2);z--;)u[q++]=F;break;case 17:for(z=3+C(this,3);z--;)u[q++]=0;F=0;break;case 18:for(z=11+C(this,7);z--;)u[q++]=0;F=0;break;default:F=u[q++]=M}T=t?v(u.subarray(0,n)):v(u.slice(0,n));U=t?v(u.subarray(n)):v(u.slice(n));this.j(T,U);break;default:throw Error(\"unknown BTYPE: \"+c);}}return this.n()};\nvar G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,\n13,13],N=t?new Uint8Array(ea):ea,O=new (t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new (t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h;b<d;){if(f>=g)throw Error(\"input buffer is broken\");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.d=b-d;c.a=f;return h}\nfunction E(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h=d[0],k=d[1],m,n;b<k&&!(f>=g);)a|=e[f++]<<b,b+=8;m=h[a&(1<<k)-1];n=m>>>16;if(n>b)throw Error(\"invalid code length: \"+n);c.f=a>>n;c.d=b-n;c.a=f;return m&65535}\nw.prototype.j=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length-258,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(this.b=b,a=this.e(),b=this.b),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b>=e&&(this.b=b,a=this.e(),b=this.b);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};\nw.prototype.w=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b+k>e&&(a=this.e(),e=a.length);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};\nw.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.b-32768),d=this.b-32768,a,b,e=this.c;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.l+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.b=32768;return e};\nw.prototype.z=function(c){var d,a=this.input.length/this.a+1|0,b,e,f,g=this.input,h=this.c;c&&(\"number\"===typeof c.p&&(a=c.p),\"number\"===typeof c.u&&(a+=c.u));2>a?(b=(g.length-this.a)/this.o[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.c=d};\nw.prototype.n=function(){var c=0,d=this.c,a=this.g,b,e=new (t?Uint8Array:Array)(this.l+(this.b-32768)),f,g,h,k;if(0===a.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(k=b.length;h<k;++h)e[c++]=b[h]}f=32768;for(g=this.b;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};\nw.prototype.v=function(){var c,d=this.b;t?this.r?(c=new Uint8Array(d),c.set(this.c.subarray(0,d))):c=this.c.subarray(0,d):(this.c.length>d&&(this.c.length=d),c=this.c);return this.buffer=c};function W(c,d){var a,b;this.input=c;this.a=0;if(d||!(d={}))d.index&&(this.a=d.index),d.verify&&(this.A=d.verify);a=c[this.a++];b=c[this.a++];switch(a&15){case ha:this.method=ha;break;default:throw Error(\"unsupported compression method\");}if(0!==((a<<8)+b)%31)throw Error(\"invalid fcheck flag:\"+((a<<8)+b)%31);if(b&32)throw Error(\"fdict flag is not supported\");this.q=new w(c,{index:this.a,bufferSize:d.bufferSize,bufferType:d.bufferType,resize:d.resize})}\nW.prototype.k=function(){var c=this.input,d,a;d=this.q.k();this.a=this.q.a;if(this.A){a=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var b=d;if(\"string\"===typeof b){var e=b.split(\"\"),f,g;f=0;for(g=e.length;f<g;f++)e[f]=(e[f].charCodeAt(0)&255)>>>0;b=e}for(var h=1,k=0,m=b.length,n,p=0;0<m;){n=1024<m?1024:m;m-=n;do h+=b[p++],k+=h;while(--n);h%=65521;k%=65521}if(a!==(k<<16|h)>>>0)throw Error(\"invalid adler-32 checksum\");}return d};var ha=8;r(\"Zlib.Inflate\",W);r(\"Zlib.Inflate.prototype.decompress\",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r(\"Zlib.Inflate.BufferType.\"+Z,X[Z]);\nvar Inflate=mod.Zlib.Inflate;\nexport { Inflate }\n","import {\n\tVector3,\n\tVector4\n} from '../../../build/three.module.js';\n\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\nvar NURBSUtils = {\n\n\t/*\n\tFinds knot vector span.\n\n\tp : degree\n\tu : parametric value\n\tU : knot vector\n\n\treturns the span\n\t*/\n\tfindSpan: function ( p, u, U ) {\n\n\t\tvar n = U.length - p - 1;\n\n\t\tif ( u >= U[ n ] ) {\n\n\t\t\treturn n - 1;\n\n\t\t}\n\n\t\tif ( u <= U[ p ] ) {\n\n\t\t\treturn p;\n\n\t\t}\n\n\t\tvar low = p;\n\t\tvar high = n;\n\t\tvar mid = Math.floor( ( low + high ) / 2 );\n\n\t\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\n\n\t\t\tif ( u < U[ mid ] ) {\n\n\t\t\t\thigh = mid;\n\n\t\t\t} else {\n\n\t\t\t\tlow = mid;\n\n\t\t\t}\n\n\t\t\tmid = Math.floor( ( low + high ) / 2 );\n\n\t\t}\n\n\t\treturn mid;\n\n\t},\n\n\n\t/*\n\tCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\n\tspan : span in which u lies\n\tu    : parametric point\n\tp    : degree\n\tU    : knot vector\n\n\treturns array[p+1] with basis functions values.\n\t*/\n\tcalcBasisFunctions: function ( span, u, p, U ) {\n\n\t\tvar N = [];\n\t\tvar left = [];\n\t\tvar right = [];\n\t\tN[ 0 ] = 1.0;\n\n\t\tfor ( var j = 1; j <= p; ++ j ) {\n\n\t\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\t\tright[ j ] = U[ span + j ] - u;\n\n\t\t\tvar saved = 0.0;\n\n\t\t\tfor ( var r = 0; r < j; ++ r ) {\n\n\t\t\t\tvar rv = right[ r + 1 ];\n\t\t\t\tvar lv = left[ j - r ];\n\t\t\t\tvar temp = N[ r ] / ( rv + lv );\n\t\t\t\tN[ r ] = saved + rv * temp;\n\t\t\t\tsaved = lv * temp;\n\n\t\t\t }\n\n\t\t\t N[ j ] = saved;\n\n\t\t }\n\n\t\t return N;\n\n\t},\n\n\n\t/*\n\tCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\n\tp : degree of B-Spline\n\tU : knot vector\n\tP : control points (x, y, z, w)\n\tu : parametric point\n\n\treturns point for given u\n\t*/\n\tcalcBSplinePoint: function ( p, U, P, u ) {\n\n\t\tvar span = this.findSpan( p, u, U );\n\t\tvar N = this.calcBasisFunctions( span, u, p, U );\n\t\tvar C = new Vector4( 0, 0, 0, 0 );\n\n\t\tfor ( var j = 0; j <= p; ++ j ) {\n\n\t\t\tvar point = P[ span - p + j ];\n\t\t\tvar Nj = N[ j ];\n\t\t\tvar wNj = point.w * Nj;\n\t\t\tC.x += point.x * wNj;\n\t\t\tC.y += point.y * wNj;\n\t\t\tC.z += point.z * wNj;\n\t\t\tC.w += point.w * Nj;\n\n\t\t}\n\n\t\treturn C;\n\n\t},\n\n\n\t/*\n\tCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\n\tspan : span in which u lies\n\tu    : parametric point\n\tp    : degree\n\tn    : number of derivatives to calculate\n\tU    : knot vector\n\n\treturns array[n+1][p+1] with basis functions derivatives\n\t*/\n\tcalcBasisFunctionDerivatives: function ( span, u, p, n, U ) {\n\n\t\tvar zeroArr = [];\n\t\tfor ( var i = 0; i <= p; ++ i )\n\t\t\tzeroArr[ i ] = 0.0;\n\n\t\tvar ders = [];\n\t\tfor ( var i = 0; i <= n; ++ i )\n\t\t\tders[ i ] = zeroArr.slice( 0 );\n\n\t\tvar ndu = [];\n\t\tfor ( var i = 0; i <= p; ++ i )\n\t\t\tndu[ i ] = zeroArr.slice( 0 );\n\n\t\tndu[ 0 ][ 0 ] = 1.0;\n\n\t\tvar left = zeroArr.slice( 0 );\n\t\tvar right = zeroArr.slice( 0 );\n\n\t\tfor ( var j = 1; j <= p; ++ j ) {\n\n\t\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\t\tright[ j ] = U[ span + j ] - u;\n\n\t\t\tvar saved = 0.0;\n\n\t\t\tfor ( var r = 0; r < j; ++ r ) {\n\n\t\t\t\tvar rv = right[ r + 1 ];\n\t\t\t\tvar lv = left[ j - r ];\n\t\t\t\tndu[ j ][ r ] = rv + lv;\n\n\t\t\t\tvar temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\n\t\t\t\tndu[ r ][ j ] = saved + rv * temp;\n\t\t\t\tsaved = lv * temp;\n\n\t\t\t}\n\n\t\t\tndu[ j ][ j ] = saved;\n\n\t\t}\n\n\t\tfor ( var j = 0; j <= p; ++ j ) {\n\n\t\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\n\n\t\t}\n\n\t\tfor ( var r = 0; r <= p; ++ r ) {\n\n\t\t\tvar s1 = 0;\n\t\t\tvar s2 = 1;\n\n\t\t\tvar a = [];\n\t\t\tfor ( var i = 0; i <= p; ++ i ) {\n\n\t\t\t\ta[ i ] = zeroArr.slice( 0 );\n\n\t\t\t}\n\n\t\t\ta[ 0 ][ 0 ] = 1.0;\n\n\t\t\tfor ( var k = 1; k <= n; ++ k ) {\n\n\t\t\t\tvar d = 0.0;\n\t\t\t\tvar rk = r - k;\n\t\t\t\tvar pk = p - k;\n\n\t\t\t\tif ( r >= k ) {\n\n\t\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\n\t\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\n\n\t\t\t\t}\n\n\t\t\t\tvar j1 = ( rk >= - 1 ) ? 1 : - rk;\n\t\t\t\tvar j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\n\n\t\t\t\tfor ( var j = j1; j <= j2; ++ j ) {\n\n\t\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\n\t\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( r <= pk ) {\n\n\t\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\n\t\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\n\n\t\t\t\t}\n\n\t\t\t\tders[ k ][ r ] = d;\n\n\t\t\t\tvar j = s1;\n\t\t\t\ts1 = s2;\n\t\t\t\ts2 = j;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar r = p;\n\n\t\tfor ( var k = 1; k <= n; ++ k ) {\n\n\t\t\tfor ( var j = 0; j <= p; ++ j ) {\n\n\t\t\t\tders[ k ][ j ] *= r;\n\n\t\t\t}\n\n\t\t\tr *= p - k;\n\n\t\t}\n\n\t\treturn ders;\n\n\t},\n\n\n\t/*\n\t\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n\t\tp  : degree\n\t\tU  : knot vector\n\t\tP  : control points\n\t\tu  : Parametric points\n\t\tnd : number of derivatives\n\n\t\treturns array[d+1] with derivatives\n\t\t*/\n\tcalcBSplineDerivatives: function ( p, U, P, u, nd ) {\n\n\t\tvar du = nd < p ? nd : p;\n\t\tvar CK = [];\n\t\tvar span = this.findSpan( p, u, U );\n\t\tvar nders = this.calcBasisFunctionDerivatives( span, u, p, du, U );\n\t\tvar Pw = [];\n\n\t\tfor ( var i = 0; i < P.length; ++ i ) {\n\n\t\t\tvar point = P[ i ].clone();\n\t\t\tvar w = point.w;\n\n\t\t\tpoint.x *= w;\n\t\t\tpoint.y *= w;\n\t\t\tpoint.z *= w;\n\n\t\t\tPw[ i ] = point;\n\n\t\t}\n\n\t\tfor ( var k = 0; k <= du; ++ k ) {\n\n\t\t\tvar point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\n\n\t\t\tfor ( var j = 1; j <= p; ++ j ) {\n\n\t\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\n\n\t\t\t}\n\n\t\t\tCK[ k ] = point;\n\n\t\t}\n\n\t\tfor ( var k = du + 1; k <= nd + 1; ++ k ) {\n\n\t\t\tCK[ k ] = new Vector4( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn CK;\n\n\t},\n\n\n\t/*\n\tCalculate \"K over I\"\n\n\treturns k!/(i!(k-i)!)\n\t*/\n\tcalcKoverI: function ( k, i ) {\n\n\t\tvar nom = 1;\n\n\t\tfor ( var j = 2; j <= k; ++ j ) {\n\n\t\t\tnom *= j;\n\n\t\t}\n\n\t\tvar denom = 1;\n\n\t\tfor ( var j = 2; j <= i; ++ j ) {\n\n\t\t\tdenom *= j;\n\n\t\t}\n\n\t\tfor ( var j = 2; j <= k - i; ++ j ) {\n\n\t\t\tdenom *= j;\n\n\t\t}\n\n\t\treturn nom / denom;\n\n\t},\n\n\n\t/*\n\tCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\n\tPders : result of function calcBSplineDerivatives\n\n\treturns array with derivatives for rational curve.\n\t*/\n\tcalcRationalCurveDerivatives: function ( Pders ) {\n\n\t\tvar nd = Pders.length;\n\t\tvar Aders = [];\n\t\tvar wders = [];\n\n\t\tfor ( var i = 0; i < nd; ++ i ) {\n\n\t\t\tvar point = Pders[ i ];\n\t\t\tAders[ i ] = new Vector3( point.x, point.y, point.z );\n\t\t\twders[ i ] = point.w;\n\n\t\t}\n\n\t\tvar CK = [];\n\n\t\tfor ( var k = 0; k < nd; ++ k ) {\n\n\t\t\tvar v = Aders[ k ].clone();\n\n\t\t\tfor ( var i = 1; i <= k; ++ i ) {\n\n\t\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( this.calcKoverI( k, i ) * wders[ i ] ) );\n\n\t\t\t}\n\n\t\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\n\n\t\t}\n\n\t\treturn CK;\n\n\t},\n\n\n\t/*\n\tCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\n\tp  : degree\n\tU  : knot vector\n\tP  : control points in homogeneous space\n\tu  : parametric points\n\tnd : number of derivatives\n\n\treturns array with derivatives.\n\t*/\n\tcalcNURBSDerivatives: function ( p, U, P, u, nd ) {\n\n\t\tvar Pders = this.calcBSplineDerivatives( p, U, P, u, nd );\n\t\treturn this.calcRationalCurveDerivatives( Pders );\n\n\t},\n\n\n\t/*\n\tCalculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n\n\tp1, p2 : degrees of B-Spline surface\n\tU1, U2 : knot vectors\n\tP      : control points (x, y, z, w)\n\tu, v   : parametric values\n\n\treturns point for given (u, v)\n\t*/\n\tcalcSurfacePoint: function ( p, q, U, V, P, u, v, target ) {\n\n\t\tvar uspan = this.findSpan( p, u, U );\n\t\tvar vspan = this.findSpan( q, v, V );\n\t\tvar Nu = this.calcBasisFunctions( uspan, u, p, U );\n\t\tvar Nv = this.calcBasisFunctions( vspan, v, q, V );\n\t\tvar temp = [];\n\n\t\tfor ( var l = 0; l <= q; ++ l ) {\n\n\t\t\ttemp[ l ] = new Vector4( 0, 0, 0, 0 );\n\t\t\tfor ( var k = 0; k <= p; ++ k ) {\n\n\t\t\t\tvar point = P[ uspan - p + k ][ vspan - q + l ].clone();\n\t\t\t\tvar w = point.w;\n\t\t\t\tpoint.x *= w;\n\t\t\t\tpoint.y *= w;\n\t\t\t\tpoint.z *= w;\n\t\t\t\ttemp[ l ].add( point.multiplyScalar( Nu[ k ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar Sw = new Vector4( 0, 0, 0, 0 );\n\t\tfor ( var l = 0; l <= q; ++ l ) {\n\n\t\t\tSw.add( temp[ l ].multiplyScalar( Nv[ l ] ) );\n\n\t\t}\n\n\t\tSw.divideScalar( Sw.w );\n\t\ttarget.set( Sw.x, Sw.y, Sw.z );\n\n\t}\n\n};\n\nexport { NURBSUtils };\n","import {\n\tCurve,\n\tVector3,\n\tVector4\n} from '../../../build/three.module.js';\nimport { NURBSUtils } from '../curves/NURBSUtils.js';\n\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nvar NURBSCurve = function ( degree, knots /* array of reals */, controlPoints /* array of Vector(2|3|4) */, startKnot /* index in knots */, endKnot /* index in knots */ ) {\n\n\tCurve.call( this );\n\n\tthis.degree = degree;\n\tthis.knots = knots;\n\tthis.controlPoints = [];\n\t// Used by periodic NURBS to remove hidden spans\n\tthis.startKnot = startKnot || 0;\n\tthis.endKnot = endKnot || ( this.knots.length - 1 );\n\tfor ( var i = 0; i < controlPoints.length; ++ i ) {\n\n\t\t// ensure Vector4 for control points\n\t\tvar point = controlPoints[ i ];\n\t\tthis.controlPoints[ i ] = new Vector4( point.x, point.y, point.z, point.w );\n\n\t}\n\n};\n\n\nNURBSCurve.prototype = Object.create( Curve.prototype );\nNURBSCurve.prototype.constructor = NURBSCurve;\n\n\nNURBSCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\n\n\t// following results in (wx, wy, wz, w) homogeneous point\n\tvar hpoint = NURBSUtils.calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\n\n\tif ( hpoint.w != 1.0 ) {\n\n\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\thpoint.divideScalar( hpoint.w );\n\n\t}\n\n\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\n\n};\n\n\nNURBSCurve.prototype.getTangent = function ( t, optionalTarget ) {\n\n\tvar tangent = optionalTarget || new Vector3();\n\n\tvar u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\n\tvar ders = NURBSUtils.calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\n\ttangent.copy( ders[ 1 ] ).normalize();\n\n\treturn tangent;\n\n};\n\nexport { NURBSCurve };\n","import {\n\tAmbientLight,\n\tAnimationClip,\n\tBone,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tEquirectangularReflectionMapping,\n\tEuler,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLine,\n\tLineBasicMaterial,\n\tLoader,\n\tLoaderUtils,\n\tMathUtils,\n\tMatrix3,\n\tMatrix4,\n\tMesh,\n\tMeshLambertMaterial,\n\tMeshPhongMaterial,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tUint16BufferAttribute,\n\tVector3,\n\tVector4,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from '../../../build/three.module.js';\nimport { Inflate } from '../libs/inflate.module.min.js';\nimport { NURBSCurve } from '../curves/NURBSCurve.js';\n\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nvar FBXLoader = ( function () {\n\n\tvar fbxTree;\n\tvar connections;\n\tvar sceneGraph;\n\n\tfunction FBXLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t}\n\n\tFBXLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: FBXLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar path = ( scope.path === '' ) ? LoaderUtils.extractUrlBase( url ) : scope.path;\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.setPath( scope.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( scope.requestHeader );\n\t\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tonLoad( scope.parse( buffer, path ) );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tif ( onError ) {\n\n\t\t\t\t\t\tonError( e );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tparse: function ( FBXBuffer, path ) {\n\n\t\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t\t} else {\n\n\t\t\t\tvar FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t\t}\n\n\t\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t\t}\n\n\t\t\t// console.log( fbxTree );\n\n\t\t\tvar textureLoader = new TextureLoader( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\n\n\t\t}\n\n\t} );\n\n\t// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\n\tfunction FBXTreeParser( textureLoader, manager ) {\n\n\t\tthis.textureLoader = textureLoader;\n\t\tthis.manager = manager;\n\n\t}\n\n\tFBXTreeParser.prototype = {\n\n\t\tconstructor: FBXTreeParser,\n\n\t\tparse: function () {\n\n\t\t\tconnections = this.parseConnections();\n\n\t\t\tvar images = this.parseImages();\n\t\t\tvar textures = this.parseTextures( images );\n\t\t\tvar materials = this.parseMaterials( textures );\n\t\t\tvar deformers = this.parseDeformers();\n\t\t\tvar geometryMap = new GeometryParser().parse( deformers );\n\n\t\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\t\treturn sceneGraph;\n\n\t\t},\n\n\t\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t\t// and details the connection type\n\t\tparseConnections: function () {\n\n\t\t\tvar connectionMap = new Map();\n\n\t\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\t\tvar rawConnections = fbxTree.Connections.connections;\n\n\t\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\t\tvar fromID = rawConnection[ 0 ];\n\t\t\t\t\tvar toID = rawConnection[ 1 ];\n\t\t\t\t\tvar relationship = rawConnection[ 2 ];\n\n\t\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn connectionMap;\n\n\t\t},\n\n\t\t// Parse FBXTree.Objects.Video for embedded image data\n\t\t// These images are connected to textures in FBXTree.Objects.Textures\n\t\t// via FBXTree.Connections.\n\t\tparseImages: function () {\n\n\t\t\tvar images = {};\n\t\t\tvar blobs = {};\n\n\t\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\t\tvar videoNodes = fbxTree.Objects.Video;\n\n\t\t\t\tfor ( var nodeID in videoNodes ) {\n\n\t\t\t\t\tvar videoNode = videoNodes[ nodeID ];\n\n\t\t\t\t\tvar id = parseInt( nodeID );\n\n\t\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\t\tvar arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\t\tvar base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\t\tvar image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var id in images ) {\n\n\t\t\t\tvar filename = images[ id ];\n\n\t\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t\t}\n\n\t\t\treturn images;\n\n\t\t},\n\n\t\t// Parse embedded image data in FBXTree.Video.Content\n\t\tparseImage: function ( videoNode ) {\n\n\t\t\tvar content = videoNode.Content;\n\t\t\tvar fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\t\tvar extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\t\tvar type;\n\n\t\t\tswitch ( extension ) {\n\n\t\t\t\tcase 'bmp':\n\n\t\t\t\t\ttype = 'image/bmp';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'jpg':\n\t\t\t\tcase 'jpeg':\n\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'png':\n\n\t\t\t\t\ttype = 'image/png';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tif':\n\n\t\t\t\t\ttype = 'image/tiff';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tga':\n\n\t\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\n\n\t\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = 'image/tga';\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t\t} else { // Binary Format\n\n\t\t\t\tvar array = new Uint8Array( content );\n\t\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Texture\n\t\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t\t// to images in FBXTree.Objects.Video\n\t\tparseTextures: function ( images ) {\n\n\t\t\tvar textureMap = new Map();\n\n\t\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\t\tvar textureNodes = fbxTree.Objects.Texture;\n\t\t\t\tfor ( var nodeID in textureNodes ) {\n\n\t\t\t\t\tvar texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn textureMap;\n\n\t\t},\n\n\t\t// Parse individual node in FBXTree.Objects.Texture\n\t\tparseTexture: function ( textureNode, images ) {\n\n\t\t\tvar texture = this.loadTexture( textureNode, images );\n\n\t\t\ttexture.ID = textureNode.id;\n\n\t\t\ttexture.name = textureNode.attrName;\n\n\t\t\tvar wrapModeU = textureNode.WrapModeU;\n\t\t\tvar wrapModeV = textureNode.WrapModeV;\n\n\t\t\tvar valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\t\tvar valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t\t// 0: repeat(default), 1: clamp\n\n\t\t\ttexture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\n\t\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\t\tvar values = textureNode.Scaling.value;\n\n\t\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\t\tloadTexture: function ( textureNode, images ) {\n\n\t\t\tvar fileName;\n\n\t\t\tvar currentPath = this.textureLoader.path;\n\n\t\t\tvar children = connections.get( textureNode.id ).children;\n\n\t\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar texture;\n\n\t\t\tvar extension = textureNode.FileName.slice( - 3 ).toLowerCase();\n\n\t\t\tif ( extension === 'tga' ) {\n\n\t\t\t\tvar loader = this.manager.getHandler( '.tga' );\n\n\t\t\t\tif ( loader === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\t\t\ttexture = new Texture();\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = loader.load( fileName );\n\n\t\t\t\t}\n\n\t\t\t} else if ( extension === 'psd' ) {\n\n\t\t\t\tconsole.warn( 'FBXLoader: PSD textures are not supported, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\t\ttexture = new Texture();\n\n\t\t\t} else {\n\n\t\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t\t}\n\n\t\t\tthis.textureLoader.setPath( currentPath );\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Material\n\t\tparseMaterials: function ( textureMap ) {\n\n\t\t\tvar materialMap = new Map();\n\n\t\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\t\tvar materialNodes = fbxTree.Objects.Material;\n\n\t\t\t\tfor ( var nodeID in materialNodes ) {\n\n\t\t\t\t\tvar material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materialMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Material\n\t\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t\t// FBX format currently only supports Lambert and Phong shading models\n\t\tparseMaterial: function ( materialNode, textureMap ) {\n\n\t\t\tvar ID = materialNode.id;\n\t\t\tvar name = materialNode.attrName;\n\t\t\tvar type = materialNode.ShadingModel;\n\n\t\t\t// Case where FBX wraps shading model in property object.\n\t\t\tif ( typeof type === 'object' ) {\n\n\t\t\t\ttype = type.value;\n\n\t\t\t}\n\n\t\t\t// Ignore unused materials which don't have any connections.\n\t\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\t\tvar parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\t\tvar material;\n\n\t\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\t\tcase 'phong':\n\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'lambert':\n\t\t\t\t\tmaterial = new MeshLambertMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tmaterial.setValues( parameters );\n\t\t\tmaterial.name = name;\n\n\t\t\treturn material;\n\n\t\t},\n\n\t\t// Parse FBX material and return parameters suitable for a three.js material\n\t\t// Also parse the texture map and return any textures associated with the material\n\t\tparseParameters: function ( materialNode, textureMap, ID ) {\n\n\t\t\tvar parameters = {};\n\n\t\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Diffuse ) {\n\n\t\t\t\tparameters.color = new Color().fromArray( materialNode.Diffuse.value );\n\n\t\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\n\n\t\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\t\tparameters.color = new Color().fromArray( materialNode.DiffuseColor.value );\n\n\t\t\t}\n\n\t\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Emissive ) {\n\n\t\t\t\tparameters.emissive = new Color().fromArray( materialNode.Emissive.value );\n\n\t\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\n\n\t\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\t\tparameters.emissive = new Color().fromArray( materialNode.EmissiveColor.value );\n\n\t\t\t}\n\n\t\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Opacity ) {\n\n\t\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t\t}\n\n\t\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\t\tparameters.transparent = true;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Shininess ) {\n\n\t\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t\t}\n\n\t\t\tif ( materialNode.Specular ) {\n\n\t\t\t\tparameters.specular = new Color().fromArray( materialNode.Specular.value );\n\n\t\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\t\tparameters.specular = new Color().fromArray( materialNode.SpecularColor.value );\n\n\t\t\t}\n\n\t\t\tvar scope = this;\n\t\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\t\tvar type = child.relationship;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'Bump':\n\t\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Maya|TEX_ao_map':\n\t\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DiffuseColor':\n\t\t\t\t\tcase 'Maya|TEX_color_map':\n\t\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.map.encoding = sRGBEncoding;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.emissiveMap.encoding = sRGBEncoding;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'NormalMap':\n\t\t\t\t\tcase 'Maya|TEX_normal_map':\n\t\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.envMap.mapping = EquirectangularReflectionMapping;\n\t\t\t\t\t\tparameters.envMap.encoding = sRGBEncoding;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.specularMap.encoding = sRGBEncoding;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TransparentColor':\n\t\t\t\t\tcase 'TransparencyFactor':\n\t\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'AmbientColor':\n\t\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn parameters;\n\n\t\t},\n\n\t\t// get a texture from the textureMap for use by a material.\n\t\tgetTexture: function ( textureMap, id ) {\n\n\t\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t\t}\n\n\t\t\treturn textureMap.get( id );\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Deformer\n\t\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\t\tparseDeformers: function () {\n\n\t\t\tvar skeletons = {};\n\t\t\tvar morphTargets = {};\n\n\t\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\t\tvar DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\t\tfor ( var nodeID in DeformerNodes ) {\n\n\t\t\t\t\tvar deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\t\tvar skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\t\tvar morphTarget = {\n\t\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\n\t\t\t\tskeletons: skeletons,\n\t\t\t\tmorphTargets: morphTargets,\n\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse single nodes in FBXTree.Objects.Deformer\n\t\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t\t// Each skin node represents a skeleton and each cluster node represents a bone\n\t\tparseSkeleton: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawBones = [];\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar boneNode = deformerNodes[ child.ID ];\n\n\t\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\t\tvar rawBone = {\n\n\t\t\t\t\tID: child.ID,\n\t\t\t\t\tindices: [],\n\t\t\t\t\tweights: [],\n\t\t\t\t\ttransformLink: new Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t\t// linkMode: boneNode.Mode,\n\n\t\t\t\t};\n\n\t\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t\t}\n\n\t\t\t\trawBones.push( rawBone );\n\n\t\t\t} );\n\n\t\t\treturn {\n\n\t\t\t\trawBones: rawBones,\n\t\t\t\tbones: []\n\n\t\t\t};\n\n\t\t},\n\n\t\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\t\tparseMorphTargets: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawMorphTargets = [];\n\n\t\t\tfor ( var i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\t\tvar child = relationships.children[ i ];\n\n\t\t\t\tvar morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\t\tvar rawMorphTarget = {\n\n\t\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\t\tid: morphTargetNode.id,\n\t\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t\t};\n\n\t\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\n\n\t\t\t\t\treturn child.relationship === undefined;\n\n\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t\t}\n\n\t\t\treturn rawMorphTargets;\n\n\t\t},\n\n\t\t// create the main Group() to be returned by the loader\n\t\tparseScene: function ( deformers, geometryMap, materialMap ) {\n\n\t\t\tsceneGraph = new Group();\n\n\t\t\tvar modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tvar scope = this;\n\t\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\t\tvar modelNode = modelNodes[ model.ID ];\n\t\t\t\tscope.setLookAtProperties( model, modelNode );\n\n\t\t\t\tvar parentConnections = connections.get( model.ID ).parents;\n\n\t\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\t\tvar parent = modelMap.get( connection.ID );\n\t\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( model.parent === null ) {\n\n\t\t\t\t\tsceneGraph.add( model );\n\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\t\tthis.createAmbientLight();\n\n\t\t\tthis.setupMorphMaterials();\n\n\t\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\t\tif ( node.userData.transformData ) {\n\n\t\t\t\t\tif ( node.parent ) node.userData.transformData.parentMatrixWorld = node.parent.matrix;\n\n\t\t\t\t\tvar transform = generateTransform( node.userData.transformData );\n\n\t\t\t\t\tnode.applyMatrix4( transform );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tvar animations = new AnimationParser().parse();\n\n\t\t\t// if all the models where already combined in a single group, just return that\n\t\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t\t}\n\n\t\t\tsceneGraph.animations = animations;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.Model\n\t\tparseModels: function ( skeletons, geometryMap, materialMap ) {\n\n\t\t\tvar modelMap = new Map();\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tfor ( var nodeID in modelNodes ) {\n\n\t\t\t\tvar id = parseInt( nodeID );\n\t\t\t\tvar node = modelNodes[ nodeID ];\n\t\t\t\tvar relationships = connections.get( id );\n\n\t\t\t\tvar model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\t\tif ( ! model ) {\n\n\t\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'LimbNode':\n\t\t\t\t\t\tcase 'Root':\n\t\t\t\t\t\t\tmodel = new Bone();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Null':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmodel = new Group();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.name = node.attrName ? PropertyBinding.sanitizeNodeName( node.attrName ) : '';\n\n\t\t\t\t\tmodel.ID = id;\n\n\t\t\t\t}\n\n\t\t\t\tthis.getTransformData( model, node );\n\t\t\t\tmodelMap.set( id, model );\n\n\t\t\t}\n\n\t\t\treturn modelMap;\n\n\t\t},\n\n\t\tbuildSkeleton: function ( relationships, skeletons, id, name ) {\n\n\t\t\tvar bone = null;\n\n\t\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\t\tvar subBone = bone;\n\t\t\t\t\t\t\tbone = new Bone();\n\n\t\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n\t\t\t\t\t\t\tbone.name = name ? PropertyBinding.sanitizeNodeName( name ) : '';\n\t\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn bone;\n\n\t\t},\n\n\t\t// create a PerspectiveCamera or OrthographicCamera\n\t\tcreateCamera: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar cameraAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tcameraAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\t\tmodel = new Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type = 0;\n\t\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\t\ttype = 1;\n\n\t\t\t\t}\n\n\t\t\t\tvar nearClippingPlane = 1;\n\t\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t\t}\n\n\t\t\t\tvar farClippingPlane = 1000;\n\t\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t\t}\n\n\n\t\t\t\tvar width = window.innerWidth;\n\t\t\t\tvar height = window.innerHeight;\n\n\t\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar aspect = width / height;\n\n\t\t\t\tvar fov = 45;\n\t\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Perspective\n\t\t\t\t\t\tmodel = new PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\t\tmodel = new OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\t// Create a DirectionalLight, PointLight or SpotLight\n\t\tcreateLight: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar lightAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tlightAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( lightAttribute === undefined ) {\n\n\t\t\t\tmodel = new Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type;\n\n\t\t\t\t// LightType can be undefined for Point lights\n\t\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\t\ttype = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar color = 0xffffff;\n\n\t\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\t\tcolor = new Color().fromArray( lightAttribute.Color.value );\n\n\t\t\t\t}\n\n\t\t\t\tvar intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t\t// light disabled\n\t\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\t\tintensity = 0;\n\n\t\t\t\t}\n\n\t\t\t\tvar distance = 0;\n\t\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\t\tdistance = 0;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\t\tvar decay = 1;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Point\n\t\t\t\t\t\tmodel = new PointLight( color, intensity, distance, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Directional\n\t\t\t\t\t\tmodel = new DirectionalLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // Spot\n\t\t\t\t\t\tvar angle = Math.PI / 3;\n\n\t\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\t\tangle = MathUtils.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar penumbra = 0;\n\t\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\t\tpenumbra = MathUtils.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel = new SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\n\t\t\t\t\t\tmodel = new PointLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\t\tmodel.castShadow = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateMesh: function ( relationships, geometryMap, materialMap ) {\n\n\t\t\tvar model;\n\t\t\tvar geometry = null;\n\t\t\tvar material = null;\n\t\t\tvar materials = [];\n\n\t\t\t// get geometry and materials(s) from connections\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t\t}\n\n\t\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( materials.length > 1 ) {\n\n\t\t\t\tmaterial = materials;\n\n\t\t\t} else if ( materials.length > 0 ) {\n\n\t\t\t\tmaterial = materials[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new MeshPhongMaterial( { color: 0xcccccc } );\n\t\t\t\tmaterials.push( material );\n\n\t\t\t}\n\n\t\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t} );\n\n\t\t\t\tmodel = new SkinnedMesh( geometry, material );\n\t\t\t\tmodel.normalizeSkinWeights();\n\n\t\t\t} else {\n\n\t\t\t\tmodel = new Mesh( geometry, material );\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateCurve: function ( relationships, geometryMap ) {\n\n\t\t\tvar geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\t\treturn geo;\n\n\t\t\t}, null );\n\n\t\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\t\tvar material = new LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n\t\t\treturn new Line( geometry, material );\n\n\t\t},\n\n\t\t// parse the model node for transform data\n\t\tgetTransformData: function ( model, modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\t\telse transformData.eulerOrder = 'ZYX';\n\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\n\t\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\n\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\n\n\t\t\tmodel.userData.transformData = transformData;\n\n\t\t},\n\n\t\tsetLookAtProperties: function ( model, modelNode ) {\n\n\t\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\t\tvar children = connections.get( model.ID ).children;\n\n\t\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\t\tvar lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\t\tvar pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\t\tmodel.lookAt( new Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tbindSkeleton: function ( skeletons, geometryMap, modelMap ) {\n\n\t\t\tvar bindMatrices = this.parsePoseNodes();\n\n\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\tvar parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\t\tvar geoID = parent.ID;\n\t\t\t\t\t\tvar geoRelationships = connections.get( geoID );\n\n\t\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\t\tvar model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\t\tmodel.bind( new Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparsePoseNodes: function () {\n\n\t\t\tvar bindMatrices = {};\n\n\t\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\t\tvar BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\t\tfor ( var nodeID in BindPoseNode ) {\n\n\t\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {\n\n\t\t\t\t\t\tvar poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bindMatrices;\n\n\t\t},\n\n\t\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\t\tcreateAmbientLight: function () {\n\n\t\t\tif ( 'GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\tvar ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tvar r = ambientColor[ 0 ];\n\t\t\t\tvar g = ambientColor[ 1 ];\n\t\t\t\tvar b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tvar color = new Color( r, g, b );\n\t\t\t\t\tsceneGraph.add( new AmbientLight( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetupMorphMaterials: function () {\n\n\t\t\tvar scope = this;\n\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\tif ( child.geometry.morphAttributes.position && child.geometry.morphAttributes.position.length ) {\n\n\t\t\t\t\t\tif ( Array.isArray( child.material ) ) {\n\n\t\t\t\t\t\t\tchild.material.forEach( function ( material, i ) {\n\n\t\t\t\t\t\t\t\tscope.setupMorphMaterial( child, material, i );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tscope.setupMorphMaterial( child, child.material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\tsetupMorphMaterial: function ( child, material, index ) {\n\n\t\t\tvar uuid = child.uuid;\n\t\t\tvar matUuid = material.uuid;\n\n\t\t\t// if a geometry has morph targets, it cannot share the material with other geometries\n\t\t\tvar sharedMat = false;\n\n\t\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\t\tif ( node.isMesh ) {\n\n\t\t\t\t\tif ( Array.isArray( node.material ) ) {\n\n\t\t\t\t\t\tnode.material.forEach( function ( mat ) {\n\n\t\t\t\t\t\t\tif ( mat.uuid === matUuid && node.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else if ( node.material.uuid === matUuid && node.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( sharedMat === true ) {\n\n\t\t\t\tvar clonedMat = material.clone();\n\t\t\t\tclonedMat.morphTargets = true;\n\n\t\t\t\tif ( index === undefined ) child.material = clonedMat;\n\t\t\t\telse child.material[ index ] = clonedMat;\n\n\t\t\t} else material.morphTargets = true;\n\n\t\t}\n\n\t};\n\n\t// parse Geometry data from FBXTree and return map of BufferGeometries\n\tfunction GeometryParser() {}\n\n\tGeometryParser.prototype = {\n\n\t\tconstructor: GeometryParser,\n\n\t\t// Parse nodes in FBXTree.Objects.Geometry\n\t\tparse: function ( deformers ) {\n\n\t\t\tvar geometryMap = new Map();\n\n\t\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\t\tvar geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\t\tfor ( var nodeID in geoNodes ) {\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\t\tvar geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn geometryMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Geometry\n\t\tparseGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tswitch ( geoNode.attrType ) {\n\n\t\t\t\tcase 'Mesh':\n\t\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t},\n\n\n\t\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\t\tparseMeshGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tvar skeletons = deformers.skeletons;\n\t\t\tvar morphTargets = [];\n\n\t\t\tvar modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t\t} );\n\n\t\t\t// don't create geometry if it is not associated with any models\n\t\t\tif ( modelNodes.length === 0 ) return;\n\n\t\t\tvar skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\t\treturn skeleton;\n\n\t\t\t}, null );\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\n\n\t\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// Assume one model and get the preRotation from that\n\t\t\t// if there is more than one model associated with the geometry this may cause problems\n\t\t\tvar modelNode = modelNodes[ 0 ];\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\n\n\t\t},\n\n\t\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\t\tgenGeometry: function ( geoNode, skeleton, morphTargets, preTransform ) {\n\n\t\t\tvar geo = new BufferGeometry();\n\t\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\t\tvar geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\t\tvar buffers = this.genBuffers( geoInfo );\n\n\t\t\tvar positionAttribute = new Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\t\tgeo.setAttribute( 'position', positionAttribute );\n\n\t\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\t\tgeo.setAttribute( 'color', new Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tgeo.setAttribute( 'skinIndex', new Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\t\tgeo.setAttribute( 'skinWeight', new Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t\t// used later to bind the skeleton to the model\n\t\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t\t}\n\n\t\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( preTransform );\n\n\t\t\t\tvar normalAttribute = new Float32BufferAttribute( buffers.normal, 3 );\n\t\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\n\n\t\t\t\tgeo.setAttribute( 'normal', normalAttribute );\n\n\t\t\t}\n\n\t\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\t\tvar name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t\t// the first uv buffer is just called 'uv'\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tname = 'uv';\n\n\t\t\t\t}\n\n\t\t\t\tgeo.setAttribute( name, new Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t\t} );\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\t\tvar prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\t\tvar startIndex = 0;\n\n\t\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\t\tvar lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\t\tvar lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t\t// using one of them\n\t\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\n\n\t\t\treturn geo;\n\n\t\t},\n\n\t\tparseGeoNode: function ( geoNode, skeleton ) {\n\n\t\t\tvar geoInfo = {};\n\n\t\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\t\tgeoInfo.uv = [];\n\n\t\t\t\tvar i = 0;\n\t\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\n\n\t\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ti ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeoInfo.weightTable = {};\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\t\tid: i,\n\t\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn geoInfo;\n\n\t\t},\n\n\t\tgenBuffers: function ( geoInfo ) {\n\n\t\t\tvar buffers = {\n\t\t\t\tvertex: [],\n\t\t\t\tnormal: [],\n\t\t\t\tcolors: [],\n\t\t\t\tuvs: [],\n\t\t\t\tmaterialIndex: [],\n\t\t\t\tvertexWeights: [],\n\t\t\t\tweightsIndices: [],\n\t\t\t};\n\n\t\t\tvar polygonIndex = 0;\n\t\t\tvar faceLength = 0;\n\t\t\tvar displayedWeightsWarning = false;\n\n\t\t\t// these will hold data for a single face\n\t\t\tvar facePositionIndexes = [];\n\t\t\tvar faceNormals = [];\n\t\t\tvar faceColors = [];\n\t\t\tvar faceUVs = [];\n\t\t\tvar faceWeights = [];\n\t\t\tvar faceWeightIndices = [];\n\n\t\t\tvar scope = this;\n\t\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\t\tvar endOfFace = false;\n\n\t\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t\t// A cube with quad faces looks like this:\n\t\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t\t//  }\n\t\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\t\tendOfFace = true;\n\n\t\t\t\t}\n\n\t\t\t\tvar weightIndices = [];\n\t\t\t\tvar weights = [];\n\n\t\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t\t} );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\t\tvar Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\t\tvar currentWeight = weight;\n\t\t\t\t\t\t\tvar currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\t\tvar tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\t\tweights = Weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tvar materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tfaceLength ++;\n\n\t\t\t\tif ( endOfFace ) {\n\n\t\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\t\tpolygonIndex ++;\n\t\t\t\t\tfaceLength = 0;\n\n\t\t\t\t\t// reset arrays for the next face\n\t\t\t\t\tfacePositionIndexes = [];\n\t\t\t\t\tfaceNormals = [];\n\t\t\t\t\tfaceColors = [];\n\t\t\t\t\tfaceUVs = [];\n\t\t\t\t\tfaceWeights = [];\n\t\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn buffers;\n\n\t\t},\n\n\t\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\t\tgenFace: function ( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\t\tfor ( var i = 2; i < faceLength; i ++ ) {\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\taddMorphTargets: function ( parentGeo, parentGeoNode, morphTargets, preTransform ) {\n\n\t\t\tif ( morphTargets.length === 0 ) return;\n\n\t\t\tparentGeo.morphTargetsRelative = true;\n\n\t\t\tparentGeo.morphAttributes.position = [];\n\t\t\t// parentGeo.morphAttributes.normal = []; // not implemented\n\n\t\t\tvar scope = this;\n\t\t\tmorphTargets.forEach( function ( morphTarget ) {\n\n\t\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\t\tvar morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t},\n\n\t\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\t\tgenMorphGeometry: function ( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\n\n\t\t\tvar vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\t\tvar morphPositionsSparse = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\t\tvar indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\t\tvar length = parentGeo.attributes.position.count * 3;\n\t\t\tvar morphPositions = new Float32Array( length );\n\n\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\n\n\t\t\t\tvar morphIndex = indices[ i ] * 3;\n\n\t\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\n\t\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\n\t\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\n\n\t\t\t}\n\n\t\t\t// TODO: add morph normal support\n\t\t\tvar morphGeoInfo = {\n\t\t\t\tvertexIndices: vertexIndices,\n\t\t\t\tvertexPositions: morphPositions,\n\n\t\t\t};\n\n\t\t\tvar morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\t\tvar positionAttribute = new Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\t\tpositionAttribute.name = name || morphGeoNode.attrName;\n\n\t\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t\t},\n\n\t\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\t\tparseNormals: function ( NormalNode ) {\n\n\t\t\tvar mappingType = NormalNode.MappingInformationType;\n\t\t\tvar referenceType = NormalNode.ReferenceInformationType;\n\t\t\tvar buffer = NormalNode.Normals.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 3,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\t\tparseUVs: function ( UVNode ) {\n\n\t\t\tvar mappingType = UVNode.MappingInformationType;\n\t\t\tvar referenceType = UVNode.ReferenceInformationType;\n\t\t\tvar buffer = UVNode.UV.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 2,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\t\tparseVertexColors: function ( ColorNode ) {\n\n\t\t\tvar mappingType = ColorNode.MappingInformationType;\n\t\t\tvar referenceType = ColorNode.ReferenceInformationType;\n\t\t\tvar buffer = ColorNode.Colors.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 4,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\t\tparseMaterialIndices: function ( MaterialNode ) {\n\n\t\t\tvar mappingType = MaterialNode.MappingInformationType;\n\t\t\tvar referenceType = MaterialNode.ReferenceInformationType;\n\n\t\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tdataSize: 1,\n\t\t\t\t\tbuffer: [ 0 ],\n\t\t\t\t\tindices: [ 0 ],\n\t\t\t\t\tmappingType: 'AllSame',\n\t\t\t\t\treferenceType: referenceType\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t\t// for conforming with the other functions we've written for other data.\n\t\t\tvar materialIndices = [];\n\n\t\t\tfor ( var i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\t\tmaterialIndices.push( i );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: materialIndexBuffer,\n\t\t\t\tindices: materialIndices,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\t\tparseNurbsGeometry: function ( geoNode ) {\n\n\t\t\tif ( NURBSCurve === undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\t\treturn new BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar order = parseInt( geoNode.Order );\n\n\t\t\tif ( isNaN( order ) ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\t\treturn new BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar degree = order - 1;\n\n\t\t\tvar knots = geoNode.KnotVector.a;\n\t\t\tvar controlPoints = [];\n\t\t\tvar pointsValues = geoNode.Points.a;\n\n\t\t\tfor ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\t\tcontrolPoints.push( new Vector4().fromArray( pointsValues, i ) );\n\n\t\t\t}\n\n\t\t\tvar startKnot, endKnot;\n\n\t\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\t\tstartKnot = degree;\n\t\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\t\tfor ( var i = 0; i < degree; ++ i ) {\n\n\t\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar curve = new NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\t\tvar vertices = curve.getPoints( controlPoints.length * 7 );\n\n\t\t\tvar positions = new Float32Array( vertices.length * 3 );\n\n\t\t\tvertices.forEach( function ( vertex, i ) {\n\n\t\t\t\tvertex.toArray( positions, i * 3 );\n\n\t\t\t} );\n\n\t\t\tvar geometry = new BufferGeometry();\n\t\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t},\n\n\t};\n\n\t// parse animation data from FBXTree\n\tfunction AnimationParser() {}\n\n\tAnimationParser.prototype = {\n\n\t\tconstructor: AnimationParser,\n\n\t\t// take raw animation clips and turn them into three.js animation clips\n\t\tparse: function () {\n\n\t\t\tvar animationClips = [];\n\n\t\t\tvar rawClips = this.parseClips();\n\n\t\t\tif ( rawClips !== undefined ) {\n\n\t\t\t\tfor ( var key in rawClips ) {\n\n\t\t\t\t\tvar rawClip = rawClips[ key ];\n\n\t\t\t\t\tvar clip = this.addClip( rawClip );\n\n\t\t\t\t\tanimationClips.push( clip );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn animationClips;\n\n\t\t},\n\n\t\tparseClips: function () {\n\n\t\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t\t// if this is undefined we can safely assume there are no animations\n\t\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\t\tvar curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\t\tvar layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\t\tvar rawClips = this.parseAnimStacks( layersMap );\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t\t// and is referenced by an AnimationLayer\n\t\tparseAnimationCurveNodes: function () {\n\n\t\t\tvar rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\t\tvar curveNodesMap = new Map();\n\n\t\t\tfor ( var nodeID in rawCurveNodes ) {\n\n\t\t\t\tvar rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\t\tvar curveNode = {\n\n\t\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\t\tcurves: {},\n\n\t\t\t\t\t};\n\n\t\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn curveNodesMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t\t// axis ( e.g. times and values of x rotation)\n\t\tparseAnimationCurves: function ( curveNodesMap ) {\n\n\t\t\tvar rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t\t// clearly, this should be optimised to\n\t\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\t\tfor ( var nodeID in rawCurves ) {\n\n\t\t\t\tvar animationCurve = {\n\n\t\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t\t};\n\n\t\t\t\tvar relationships = connections.get( animationCurve.id );\n\n\t\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\t\tvar animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\t\tvar animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\t\tparseAnimationLayers: function ( curveNodesMap ) {\n\n\t\t\tvar rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\t\tvar layersMap = new Map();\n\n\t\t\tfor ( var nodeID in rawLayers ) {\n\n\t\t\t\tvar layerCurveNodes = [];\n\n\t\t\t\tvar connection = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\t\tvar children = connection.children;\n\n\t\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\t\tvar curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\n\n\t\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\n\t\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\n\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new Matrix4();\n\n\t\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\t\tvar geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\t\tvar modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn layersMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t\t// hierarchy. Each Stack node will be used to create a AnimationClip\n\t\tparseAnimStacks: function ( layersMap ) {\n\n\t\t\tvar rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t\t// connect the stacks (clips) up to the layers\n\t\t\tvar rawClips = {};\n\n\t\t\tfor ( var nodeID in rawStacks ) {\n\n\t\t\t\tvar children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t\t}\n\n\t\t\t\tvar layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\t\tlayer: layer,\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\taddClip: function ( rawClip ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar scope = this;\n\t\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\n\n\t\t\t} );\n\n\t\t\treturn new AnimationClip( rawClip.name, - 1, tracks );\n\n\t\t},\n\n\t\tgenerateTracks: function ( rawTracks ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar initialPosition = new Vector3();\n\t\t\tvar initialRotation = new Quaternion();\n\t\t\tvar initialScale = new Vector3();\n\n\t\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\t\tinitialPosition = initialPosition.toArray();\n\t\t\tinitialRotation = new Euler().setFromQuaternion( initialRotation, rawTracks.eulerOrder ).toArray();\n\t\t\tinitialScale = initialScale.toArray();\n\n\t\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\t\tvar positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\t\tvar rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\n\t\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\t\tvar scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\t\tvar morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t\t}\n\n\t\t\treturn tracks;\n\n\t\t},\n\n\t\tgenerateVectorTrack: function ( modelName, curves, initialValue, type ) {\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\treturn new VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t\t},\n\n\t\tgenerateRotationTrack: function ( modelName, curves, initialValue, preRotation, postRotation, eulerOrder ) {\n\n\t\t\tif ( curves.x !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.x );\n\t\t\t\tcurves.x.values = curves.x.values.map( MathUtils.degToRad );\n\n\t\t\t}\n\n\t\t\tif ( curves.y !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.y );\n\t\t\t\tcurves.y.values = curves.y.values.map( MathUtils.degToRad );\n\n\t\t\t}\n\n\t\t\tif ( curves.z !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.z );\n\t\t\t\tcurves.z.values = curves.z.values.map( MathUtils.degToRad );\n\n\t\t\t}\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\tif ( preRotation !== undefined ) {\n\n\t\t\t\tpreRotation = preRotation.map( MathUtils.degToRad );\n\t\t\t\tpreRotation.push( eulerOrder );\n\n\t\t\t\tpreRotation = new Euler().fromArray( preRotation );\n\t\t\t\tpreRotation = new Quaternion().setFromEuler( preRotation );\n\n\t\t\t}\n\n\t\t\tif ( postRotation !== undefined ) {\n\n\t\t\t\tpostRotation = postRotation.map( MathUtils.degToRad );\n\t\t\t\tpostRotation.push( eulerOrder );\n\n\t\t\t\tpostRotation = new Euler().fromArray( postRotation );\n\t\t\t\tpostRotation = new Quaternion().setFromEuler( postRotation ).invert();\n\n\t\t\t}\n\n\t\t\tvar quaternion = new Quaternion();\n\t\t\tvar euler = new Euler();\n\n\t\t\tvar quaternionValues = [];\n\n\t\t\tfor ( var i = 0; i < values.length; i += 3 ) {\n\n\t\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\n\n\t\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\n\t\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\n\n\t\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t\t}\n\n\t\t\treturn new QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t\t},\n\n\t\tgenerateMorphTrack: function ( rawTracks ) {\n\n\t\t\tvar curves = rawTracks.DeformPercent.curves.morph;\n\t\t\tvar values = curves.values.map( function ( val ) {\n\n\t\t\t\treturn val / 100;\n\n\t\t\t} );\n\n\t\t\tvar morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\t\treturn new NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t\t},\n\n\t\t// For all animated objects, times are defined separately for each axis\n\t\t// Here we'll combine the times into one sorted array without duplicates\n\t\tgetTimesForAllAxes: function ( curves ) {\n\n\t\t\tvar times = [];\n\n\t\t\t// first join together the times for each axis, if defined\n\t\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t\t// then sort them\n\t\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\t\treturn a - b;\n\n\t\t\t} );\n\n\t\t\t// and remove duplicates\n\t\t\tif ( times.length > 1 ) {\n\n\t\t\t\tvar targetIndex = 1;\n\t\t\t\tvar lastValue = times[ 0 ];\n\t\t\t\tfor ( var i = 1; i < times.length; i ++ ) {\n\n\t\t\t\t\tvar currentValue = times[ i ];\n\t\t\t\t\tif ( currentValue !== lastValue ) {\n\n\t\t\t\t\t\ttimes[ targetIndex ] = currentValue;\n\t\t\t\t\t\tlastValue = currentValue;\n\t\t\t\t\t\ttargetIndex ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttimes = times.slice( 0, targetIndex );\n\n\t\t\t}\n\n\t\t\treturn times;\n\n\t\t},\n\n\t\tgetKeyframeTrackValues: function ( times, curves, initialValue ) {\n\n\t\t\tvar prevValue = initialValue;\n\n\t\t\tvar values = [];\n\n\t\t\tvar xIndex = - 1;\n\t\t\tvar yIndex = - 1;\n\t\t\tvar zIndex = - 1;\n\n\t\t\ttimes.forEach( function ( time ) {\n\n\t\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t\t// if there is an x value defined for this frame, use that\n\t\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\t\tvar xValue = curves.x.values[ xIndex ];\n\t\t\t\t\tvalues.push( xValue );\n\t\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\t\tvar yValue = curves.y.values[ yIndex ];\n\t\t\t\t\tvalues.push( yValue );\n\t\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\t\tvar zValue = curves.z.values[ zIndex ];\n\t\t\t\t\tvalues.push( zValue );\n\t\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\t// Rotations are defined as Euler angles which can have values  of any size\n\t\t// These will be converted to quaternions which don't support values greater than\n\t\t// PI, so we'll interpolate large rotations\n\t\tinterpolateRotations: function ( curve ) {\n\n\t\t\tfor ( var i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\t\tvar initialValue = curve.values[ i - 1 ];\n\t\t\t\tvar valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\t\tvar absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\t\tvar numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\t\tvar step = valuesSpan / numSubIntervals;\n\t\t\t\t\tvar nextValue = initialValue + step;\n\n\t\t\t\t\tvar initialTime = curve.times[ i - 1 ];\n\t\t\t\t\tvar timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\t\tvar interval = timeSpan / numSubIntervals;\n\t\t\t\t\tvar nextTime = initialTime + interval;\n\n\t\t\t\t\tvar interpolatedTimes = [];\n\t\t\t\t\tvar interpolatedValues = [];\n\n\t\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\t\tnextValue += step;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t};\n\n\t// parse an FBX file in ASCII format\n\tfunction TextParser() {}\n\n\tTextParser.prototype = {\n\n\t\tconstructor: TextParser,\n\n\t\tgetPrevNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t\t},\n\n\t\tgetCurrentNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t\t},\n\n\t\tgetCurrentProp: function () {\n\n\t\t\treturn this.currentProp;\n\n\t\t},\n\n\t\tpushStack: function ( node ) {\n\n\t\t\tthis.nodeStack.push( node );\n\t\t\tthis.currentIndent += 1;\n\n\t\t},\n\n\t\tpopStack: function () {\n\n\t\t\tthis.nodeStack.pop();\n\t\t\tthis.currentIndent -= 1;\n\n\t\t},\n\n\t\tsetCurrentProp: function ( val, name ) {\n\n\t\t\tthis.currentProp = val;\n\t\t\tthis.currentPropName = name;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tthis.currentIndent = 0;\n\n\t\t\tthis.allNodes = new FBXTree();\n\t\t\tthis.nodeStack = [];\n\t\t\tthis.currentProp = [];\n\t\t\tthis.currentPropName = '';\n\n\t\t\tvar scope = this;\n\n\t\t\tvar split = text.split( /[\\r\\n]+/ );\n\n\t\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\t\tvar matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\t\tvar matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\t\tvar matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\t\tvar matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\t\tvar matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\n\n\t\t\t\tif ( matchBeginning ) {\n\n\t\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\n\n\t\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\t\tscope.popStack();\n\n\t\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\t\tscope.parseNodePropertyContinued( line );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this.allNodes;\n\n\t\t},\n\n\t\tparseNodeBegin: function ( line, property ) {\n\n\t\t\tvar nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\tvar nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\t} );\n\n\t\t\tvar node = { name: nodeName };\n\t\t\tvar attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\t// a top node\n\t\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t\t} else { // a subnode\n\n\t\t\t\t// if the subnode already exists, append it\n\t\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\t\tthis.pushStack( node );\n\n\t\t},\n\n\t\tparseNodeAttr: function ( attrs ) {\n\n\t\t\tvar id = attrs[ 0 ];\n\n\t\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = '', type = '';\n\n\t\t\tif ( attrs.length > 1 ) {\n\n\t\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\t\ttype = attrs[ 2 ];\n\n\t\t\t}\n\n\t\t\treturn { id: id, name: name, type: type };\n\n\t\t},\n\n\t\tparseNodeProperty: function ( line, property, contentLine ) {\n\n\t\t\tvar propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\t\tvar propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t\t//\tContent: ,\n\t\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t\t}\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\t\t\tvar parentName = currentNode.name;\n\n\t\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Connections\n\t\t\tif ( propName === 'C' ) {\n\n\t\t\t\tvar connProps = propValue.split( ',' ).slice( 1 );\n\t\t\t\tvar from = parseInt( connProps[ 0 ] );\n\t\t\t\tvar to = parseInt( connProps[ 1 ] );\n\n\t\t\t\tvar rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t\t} );\n\n\t\t\t\tpropName = 'connections';\n\t\t\t\tpropValue = [ from, to ];\n\t\t\t\tappend( propValue, rest );\n\n\t\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Node\n\t\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t\t// connections\n\t\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t\t} else {\n\n\t\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\t\telse currentNode.a = propValue;\n\n\t\t\t}\n\n\t\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseNodePropertyContinued: function ( line ) {\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\tcurrentNode.a += line;\n\n\t\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t\t// so convert the string to an array\n\t\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse \"Property70\"\n\t\tparseNodeSpecialProperty: function ( line, propName, propValue ) {\n\n\t\t\t// split this\n\t\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t\t// into array like below\n\t\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\t\tvar props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t\t} );\n\n\t\t\tvar innerPropName = props[ 0 ];\n\t\t\tvar innerPropType1 = props[ 1 ];\n\t\t\tvar innerPropType2 = props[ 2 ];\n\t\t\tvar innerPropFlag = props[ 3 ];\n\t\t\tvar innerPropValue = props[ 4 ];\n\n\t\t\t// cast values where needed, otherwise leave as strings\n\t\t\tswitch ( innerPropType1 ) {\n\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'enum':\n\t\t\t\tcase 'bool':\n\t\t\t\tcase 'ULongLong':\n\t\t\t\tcase 'double':\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'FieldOfView':\n\t\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Color':\n\t\t\t\tcase 'ColorRGB':\n\t\t\t\tcase 'Vector3D':\n\t\t\t\tcase 'Lcl_Translation':\n\t\t\t\tcase 'Lcl_Rotation':\n\t\t\t\tcase 'Lcl_Scaling':\n\t\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// CAUTION: these props must append to parent's parent\n\t\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t\t},\n\n\t};\n\n\t// Parse an FBX file in Binary format\n\tfunction BinaryParser() {}\n\n\tBinaryParser.prototype = {\n\n\t\tconstructor: BinaryParser,\n\n\t\tparse: function ( buffer ) {\n\n\t\t\tvar reader = new BinaryReader( buffer );\n\t\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\t\tvar version = reader.getUint32();\n\n\t\t\tif ( version < 6400 ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\n\n\t\t\t}\n\n\t\t\tvar allNodes = new FBXTree();\n\n\t\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\t\tvar node = this.parseNode( reader, version );\n\t\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t\t}\n\n\t\t\treturn allNodes;\n\n\t\t},\n\n\t\t// Check if reader has reached the end of content.\n\t\tendOfContent: function ( reader ) {\n\n\t\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t\t// - 16bytes: magic\n\t\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t\t// - 4bytes: magic\n\t\t\t// - 4bytes: version\n\t\t\t// - 120bytes: zero\n\t\t\t// - 16bytes: magic\n\t\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t\t} else {\n\n\t\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t\t}\n\n\t\t},\n\n\t\t// recursively parse nodes until the end of the file is reached\n\t\tparseNode: function ( reader, version ) {\n\n\t\t\tvar node = {};\n\n\t\t\t// The first three data sizes depends on version.\n\t\t\tvar endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\t\tvar numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n\t\t\tvar nameLen = reader.getUint8();\n\t\t\tvar name = reader.getString( nameLen );\n\n\t\t\t// Regards this node as NULL-record if endOffset is zero\n\t\t\tif ( endOffset === 0 ) return null;\n\n\t\t\tvar propertyList = [];\n\n\t\t\tfor ( var i = 0; i < numProperties; i ++ ) {\n\n\t\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t\t}\n\n\t\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\t\tvar id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\t\tvar attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\t\tvar attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t\t// check if this node represents just a single property\n\t\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\t\tvar subNode = this.parseNode( reader, version );\n\n\t\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t\t}\n\n\t\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\t\tif ( typeof id === 'number' ) node.id = id;\n\t\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\t\tif ( name !== '' ) node.name = name;\n\n\t\t\treturn node;\n\n\t\t},\n\n\t\tparseSubNode: function ( name, node, subNode ) {\n\n\t\t\t// special case: child node is single property\n\t\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\t\tvar value = subNode.propertyList[ 0 ];\n\n\t\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t\tsubNode.a = value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t\t}\n\n\t\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\t\tnode.connections = [];\n\n\t\t\t\t}\n\n\t\t\t\tnode.connections.push( array );\n\n\t\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\t\tvar keys = Object.keys( subNode );\n\n\t\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t\t} );\n\n\t\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\t\tvar innerPropName = subNode.propertyList[ 0 ];\n\t\t\t\tvar innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\t\tvar innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\t\tvar innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\t\tvar innerPropValue;\n\n\t\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\t\tinnerPropValue = [\n\t\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t\t];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t\t}\n\n\t\t\t\t// this will be copied to parent, see above\n\t\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t\t'type': innerPropType1,\n\t\t\t\t\t'type2': innerPropType2,\n\t\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t\t'value': innerPropValue\n\n\t\t\t\t};\n\n\t\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseProperty: function ( reader ) {\n\n\t\t\tvar type = reader.getString( 1 );\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'C':\n\t\t\t\t\treturn reader.getBoolean();\n\n\t\t\t\tcase 'D':\n\t\t\t\t\treturn reader.getFloat64();\n\n\t\t\t\tcase 'F':\n\t\t\t\t\treturn reader.getFloat32();\n\n\t\t\t\tcase 'I':\n\t\t\t\t\treturn reader.getInt32();\n\n\t\t\t\tcase 'L':\n\t\t\t\t\treturn reader.getInt64();\n\n\t\t\t\tcase 'R':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\t\tcase 'S':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getString( length );\n\n\t\t\t\tcase 'Y':\n\t\t\t\t\treturn reader.getInt16();\n\n\t\t\t\tcase 'b':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'f':\n\t\t\t\tcase 'i':\n\t\t\t\tcase 'l':\n\n\t\t\t\t\tvar arrayLength = reader.getUint32();\n\t\t\t\t\tvar encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\t\tvar compressedLength = reader.getUint32();\n\n\t\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( typeof Inflate === 'undefined' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar inflate = new Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\t\tvar reader2 = new BinaryReader( inflate.decompress().buffer );\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction BinaryReader( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tBinaryReader.prototype = {\n\n\t\tconstructor: BinaryReader,\n\n\t\tgetOffset: function () {\n\n\t\t\treturn this.offset;\n\n\t\t},\n\n\t\tsize: function () {\n\n\t\t\treturn this.dv.buffer.byteLength;\n\n\t\t},\n\n\t\tskip: function ( length ) {\n\n\t\t\tthis.offset += length;\n\n\t\t},\n\n\t\t// seems like true/false representation depends on exporter.\n\t\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t\t// then sees LSB.\n\t\tgetBoolean: function () {\n\n\t\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t\t},\n\n\t\tgetBooleanArray: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getBoolean() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint8: function () {\n\n\t\t\tvar value = this.dv.getUint8( this.offset );\n\t\t\tthis.offset += 1;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt16: function () {\n\n\t\t\tvar value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\t\tthis.offset += 2;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32: function () {\n\n\t\t\tvar value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint32: function () {\n\n\t\t\tvar value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t\t// There's a possibility that this method returns wrong value if the value\n\t\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t\t// TODO: safely handle 64-bit integer\n\t\tgetInt64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\t// calculate negative value\n\t\t\tif ( high & 0x80000000 ) {\n\n\t\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetInt64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\t// Note: see getInt64() comment\n\t\tgetUint64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetFloat32: function () {\n\n\t\t\tvar value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetFloat64: function () {\n\n\t\t\tvar value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\t\tthis.offset += 8;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetArrayBuffer: function ( size ) {\n\n\t\t\tvar value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\t\tthis.offset += size;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetString: function ( size ) {\n\n\t\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta[ i ] = this.getUint8();\n\n\t\t\t}\n\n\t\t\tvar nullByte = a.indexOf( 0 );\n\t\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\t\treturn LoaderUtils.decodeText( new Uint8Array( a ) );\n\n\t\t}\n\n\t};\n\n\t// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n\t// and BinaryParser( FBX Binary format)\n\tfunction FBXTree() {}\n\n\tFBXTree.prototype = {\n\n\t\tconstructor: FBXTree,\n\n\t\tadd: function ( key, val ) {\n\n\t\t\tthis[ key ] = val;\n\n\t\t},\n\n\t};\n\n\t// ************** UTILITY FUNCTIONS **************\n\n\tfunction isFbxFormatBinary( buffer ) {\n\n\t\tvar CORRECT = 'Kaydara FBX Binary  \\0';\n\n\t\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n\t}\n\n\tfunction isFbxFormatASCII( text ) {\n\n\t\tvar CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\t\tvar cursor = 0;\n\n\t\tfunction read( offset ) {\n\n\t\t\tvar result = text[ offset - 1 ];\n\t\t\ttext = text.slice( cursor + offset );\n\t\t\tcursor ++;\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < CORRECT.length; ++ i ) {\n\n\t\t\tvar num = read( 1 );\n\t\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction getFbxVersion( text ) {\n\n\t\tvar versionRegExp = /FBXVersion: (\\d+)/;\n\t\tvar match = text.match( versionRegExp );\n\n\t\tif ( match ) {\n\n\t\t\tvar version = parseInt( match[ 1 ] );\n\t\t\treturn version;\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n\t}\n\n\t// Converts FBX ticks into real time seconds.\n\tfunction convertFBXTimeToSeconds( time ) {\n\n\t\treturn time / 46186158000;\n\n\t}\n\n\tvar dataArray = [];\n\n\t// extracts the data from the correct position in the FBX array based on indexing type\n\tfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\t\tvar index;\n\n\t\tswitch ( infoObject.mappingType ) {\n\n\t\t\tcase 'ByPolygonVertex' :\n\t\t\t\tindex = polygonVertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByPolygon' :\n\t\t\t\tindex = polygonIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByVertice' :\n\t\t\t\tindex = vertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'AllSame' :\n\t\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t\t}\n\n\t\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\t\tvar from = index * infoObject.dataSize;\n\t\tvar to = from + infoObject.dataSize;\n\n\t\treturn slice( dataArray, infoObject.buffer, from, to );\n\n\t}\n\n\tvar tempEuler = new Euler();\n\tvar tempVec = new Vector3();\n\n\t// generate transformation from FBX transform data\n\t// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n\t// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\n\tfunction generateTransform( transformData ) {\n\n\t\tvar lTranslationM = new Matrix4();\n\t\tvar lPreRotationM = new Matrix4();\n\t\tvar lRotationM = new Matrix4();\n\t\tvar lPostRotationM = new Matrix4();\n\n\t\tvar lScalingM = new Matrix4();\n\t\tvar lScalingPivotM = new Matrix4();\n\t\tvar lScalingOffsetM = new Matrix4();\n\t\tvar lRotationOffsetM = new Matrix4();\n\t\tvar lRotationPivotM = new Matrix4();\n\n\t\tvar lParentGX = new Matrix4();\n\t\tvar lGlobalT = new Matrix4();\n\n\t\tvar inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\n\n\t\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\n\n\t\tif ( transformData.preRotation ) {\n\n\t\t\tvar array = transformData.preRotation.map( MathUtils.degToRad );\n\t\t\tarray.push( transformData.eulerOrder );\n\t\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.rotation ) {\n\n\t\t\tvar array = transformData.rotation.map( MathUtils.degToRad );\n\t\t\tarray.push( transformData.eulerOrder );\n\t\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.postRotation ) {\n\n\t\t\tvar array = transformData.postRotation.map( MathUtils.degToRad );\n\t\t\tarray.push( transformData.eulerOrder );\n\t\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\n\n\t\t// Pivots and offsets\n\t\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\n\t\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\n\t\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\n\t\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\n\n\t\t// parent transform\n\t\tif ( transformData.parentMatrixWorld ) lParentGX = transformData.parentMatrixWorld;\n\n\t\t// Global Rotation\n\t\tvar lLRM = lPreRotationM.multiply( lRotationM ).multiply( lPostRotationM );\n\t\tvar lParentGRM = new Matrix4();\n\t\tlParentGX.extractRotation( lParentGRM );\n\n\t\t// Global Shear*Scaling\n\t\tvar lParentTM = new Matrix4();\n\t\tlParentTM.copyPosition( lParentGX );\n\n\t\tvar lParentGSM = new Matrix4();\n\t\tlParentGSM.copy( lParentGRM ).invert().multiply( lParentGX );\n\n\t\tvar lGlobalRS = new Matrix4();\n\n\t\tif ( inheritType === 0 ) {\n\n\t\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lScalingM );\n\n\t\t} else if ( inheritType === 1 ) {\n\n\t\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lScalingM );\n\n\t\t} else {\n\n\t\t\tvar lParentLSM_inv = new Matrix4();\n\t\t\tlParentLSM_inv.copy( lScalingM ).invert();\n\t\t\tvar lParentGSM_noLocal = new Matrix4().multiply( lParentGSM ).multiply( lParentLSM_inv );\n\n\t\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lScalingM );\n\n\t\t}\n\n\t\tvar lRotationPivotM_inv = new Matrix4();\n\t\tlRotationPivotM_inv.copy( lRotationPivotM ).invert();\n\t\tvar lScalingPivotM_inv = new Matrix4();\n\t\tlScalingPivotM_inv.copy( lScalingPivotM ).invert();\n\t\t// Calculate the local transform matrix\n\t\tvar lTransform = new Matrix4();\n\t\tlTransform.copy( lTranslationM ).multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\n\n\t\tvar lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition( lTransform );\n\n\t\tvar lGlobalTranslation = new Matrix4().copy( lParentGX ).multiply( lLocalTWithAllPivotAndOffsetInfo );\n\t\tlGlobalT.copyPosition( lGlobalTranslation );\n\n\t\tlTransform = new Matrix4().multiply( lGlobalT ).multiply( lGlobalRS );\n\n\t\treturn lTransform;\n\n\t}\n\n\t// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n\t// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\tfunction getEulerOrder( order ) {\n\n\t\torder = order || 0;\n\n\t\tvar enums = [\n\t\t\t'ZYX', // -> XYZ extrinsic\n\t\t\t'YZX', // -> XZY extrinsic\n\t\t\t'XZY', // -> YZX extrinsic\n\t\t\t'ZXY', // -> YXZ extrinsic\n\t\t\t'YXZ', // -> ZXY extrinsic\n\t\t\t'XYZ', // -> ZYX extrinsic\n\t\t\t//'SphericXYZ', // not possible to support\n\t\t];\n\n\t\tif ( order === 6 ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\t\treturn enums[ 0 ];\n\n\t\t}\n\n\t\treturn enums[ order ];\n\n\t}\n\n\t// Parses comma separated list of numbers and returns them an array.\n\t// Used internally by the TextParser\n\tfunction parseNumberArray( value ) {\n\n\t\tvar array = value.split( ',' ).map( function ( val ) {\n\n\t\t\treturn parseFloat( val );\n\n\t\t} );\n\n\t\treturn array;\n\n\t}\n\n\tfunction convertArrayBufferToString( buffer, from, to ) {\n\n\t\tif ( from === undefined ) from = 0;\n\t\tif ( to === undefined ) to = buffer.byteLength;\n\n\t\treturn LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n\t}\n\n\tfunction append( a, b ) {\n\n\t\tfor ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t}\n\n\tfunction slice( a, b, from, to ) {\n\n\t\tfor ( var i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// inject array a2 into array a1 at index\n\tfunction inject( a1, index, a2 ) {\n\n\t\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n\t}\n\n\treturn FBXLoader;\n\n} )();\n\nexport { FBXLoader };\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"sourceRoot":""}