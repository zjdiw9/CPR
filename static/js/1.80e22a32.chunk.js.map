{"version":3,"sources":["../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/_@antv_f2@3.8.1@@antv/f2/dist/f2.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","exports","isArrayLike","isFinite","filter","arr","func","result","index","push","toString","isType","type","call","isFunction","isNil","undefined","isObject","each","elements","len","k","hasOwnProperty","keys","Object","obj","key","isObjectLike","isPlainObject","getPrototypeOf","proto","isString","str","uniq","resultArr","item","indexOf","contains","head","last","fixedBase","v","base","Math","round","substr","parseFloat","toFixed","isNumber","toString$1","lowerFirst","charAt","toLowerCase","substring","substitute","replace","match","name","slice","upperFirst","toUpperCase","toString$2","isBoolean","isDate","objectProto","prototype","_mix","dist","mix","src1","src2","src3","_deepMix","src","level","maxLevel","concat","deepMix","rst","args","_i","arguments","m","isEmpty","getType","size","Ctor","constructor","isPrototype","map","merge","dataArray","values","data","tmpMap","val","firstValue","groupToMap","fields","0","callback","row","unique","l","groups","group","appendConditions","array","remove","splice","getRange$1","min","max","apply","freeze","__proto__","getRange","eventListenerOptions","supports","options","defineProperty","get","window","addEventListener","passive","isWx","wx","getSystemInfoSync","isMy","my","isNode","global","isBrowser","document","sessionStorage","isCanvasElement","el","nodeType","nodeName","getPixelRatio","devicePixelRatio","getStyle","property","currentStyle","defaultView","getComputedStyle","getPropertyValue","getWidth","width","offsetWidth","getHeight","height","offsetHeight","getDomById","id","getElementById","getRelativePosition","point","canvas","canvasDom","_canvasDom$getBoundin","getBoundingClientRect","top","left","paddingLeft","paddingTop","x","y","source","listener","removeEventListener","landscapePoint","landscape","convertPoints","ev","touches","clientX","clientY","points","touch","_point","createEvent","event","chart","measureText","text","font","ctx","createElement","getContext","parsePadding","padding","right","bottom","directionEnabled","mode","dir","toTimeStamp","Date","getTime","Util","isEqual","other","valueKeys","otherKeys","find","predicate","_predicate","a","attrs","_keys","isMatch","isObjectValueEqual","b","assign","aProps","getOwnPropertyNames","bProps","propName","defaultAxis","label","fill","fontSize","line","stroke","lineWidth","grid","lineDash","tickLine","labelOffset","Theme","fontFamily","defaultColor","pixelRatio","appendPadding","colors","shapes","sizes","axis","common","circle","radius","shape","lineJoin","lineCap","area","fillOpacity","_defaultAxis","lang","general","title","withTitle","coord","cartesian","scale","linear","cat","timeCat","geometry","prefix","oneData","partData","allData","legend","Global","version","scales","widthRatio","column","rose","multiplePie","_defineProperty","enumerable","configurable","writable","_extends","target","this","_inheritsLoose","subClass","superClass","create","_assertThisInitialized","self","ReferenceError","setTheme","theme","EventEmit","__events","_proto","on","events","emit","_this","forEach","off","Base","_Emit","cfg","defaultCfg","getDefaultCfg","_attrs","set","destroy","destroyed","Plot","_init","start","end","xMin","xMax","yMin","yMax","tl","tr","bl","br","reset","isInRange","Matrix","generateDefault","isChanged","multiply","m1","m2","out","rotate","radian","c","cos","sin","m11","m12","m21","m22","translate","transform","actions","action","Vector2","sqrt","normalize","add","v1","v2","sub","dot","direction","angle","theta","acos","angleTo","angleLargeThanPI","PI","zero","distance","clone","transformMat2d","defaultMatrix","Base$1","_initDefaultCfg","plot","init","_scale","s1","s2","matrix","center","convertPoint","_this$_convertPoint","_convertPoint","vector","invertPoint","_invertPoint","Cartesian","_Base","transposed","isRect","xDim","yDim","toScaleString","invert","Rect","AttributeBase","method","mixedCallback","defaultCallback","userCallback","_len","params","_key","ret","_getAttrValue","isCategory","percent","getLinearValue","steps","floor","leftPercent","getNames","names","getFields","field","getScale","mapping","_len2","_key2","_toOriginParam","param","isLinear","Position","rstX","rstY","scaleX","scaleY","j","xLen","yLen","yVal","xVal","Shape","gradient","Size","getValue","arr2hex","toRGBValue","colorCache","black","blue","grey","green","orange","pink","purple","red","white","yellow","split","color","hex","r","g","shift","toHex","parseInt","hex2arr","calColor","Color","gradient$1","Attr","Shape$1","ShapeBase","_coord","draw","container","drawShape","setCoord","parsePoint","isPolar","parsePoints","ShapeFactoryBase","defaultShapeType","getShape","getShapePoints","getPoints","getDefaultPoints","_mix$1","registerFactory","factoryName","className","geomObj","registerShape","shapeType","factory","shapeObj","registShape","getShapeFactory","mix_1","Adjust","adjustNames","processAdjust","generateScaleAria","join","getText","GROUP_ATTRS","parseFields","Geom","styleOptions","generatePoints","attrOptions","sortable","startOnZero","visible","connectNulls","ignoreEmptyGroup","isInit","_initAttrs","_processData","_getGroupScales","attrName","attr","getAttr","_groupData","colDefs","groupScales","_setAttrOptions","attrCfg","_createAttr","_createAttrOption","defaultValues","option","_createScale","yScale","hasAdjust","change","nice","createScale","groupedArray","getYScale","some","subData","tempData","_saveOrigin","_numberic","_adjustData","_sort","origin","count","adjust","adjustType","Error","xScale","getXScale","xField","yField","_updateStackRange","mergeArray","tmpMin","tmpMax","mappedArray","itemArr","sort","obj1","obj2","paint","shapeFactory","_beforeMapping","mappedData","_mapping","generateAria","mappedCache","record","mappedRecord","_getAttrValues","_name","_values","getAttrValue","_generatePoints","isInCircle","getCallbackCfg","tmpCfg","getDrawCfg","opacity","style","nextPoints","_origin","shapeData","gShape","shapeAttr","createShapePointsCfg","nextData","ariaLables","coordAriaLabel","xLabel","yLabel","generateCoordAria","_lang$geometry","groupScale","prefixLabel","firstObj","template","part","_normalizeValues","y0","getYMinValue","_getSnap","getSnapRecords","xfield","invertPointX","rangeMax","rangeMin","xValue","tmp","originValue","_isEqual","yValue","getRecords","position","animate","changeData","clearInner","clear","_display","show","hide","methodCache","getTickMethod","registerTickMethod","Scale","isContinuous","isIdentity","range","ticks","__cfg__","initCfg","getTicks","tick","idx","tickValue","formatter","res","getConfig","setDomain","calculateTicks","tickMethod","calcPercent","NaN","calcValue","extendStatics","d","setPrototypeOf","p","__extends","__","__spreadArrays","il","jl","Category","_super","order","scaledValue","domainRange","includes","token","word","literal","shorten","sLen","newArr","monthUpdate","arrName","i18n","origObj","_a","args_1","dayNames","monthNames","monthNamesShort","defaultI18n","dayNamesShort","amPm","DoFn","dayOfMonth","globalI18n","setGlobalDateI18n","regexEscape","pad","String","formatFlags","D","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","h","getHours","hh","H","HH","getMinutes","mm","getSeconds","ss","S","getMilliseconds","SS","SSS","A","ZZ","offset","getTimezoneOffset","abs","Z","monthParse","emptyDigits","emptyWord","timezoneOffset","parts","minutes","parseFlags","cent","globalMasks","default","shortDate","mediumDate","longDate","fullDate","isoDate","isoDateTime","shortTime","mediumTime","longTime","setGlobalDateMasks","masks","format","mask","isNaN","literals","$0","$1","combinedI18nSettings","parse","dateStr","dateInfo","year","month","day","hour","minute","second","millisecond","isPm","parseInfo","newFormat","specifiedFields","requiredFields","info","regex","requiredField","matches","RegExp","parser","dateWithoutTZ","validateFields","UTC","fecha","fecha1","timeFormat","time","toTimeStamp$1","HOUR","DAY","MONTH","intervals","SECOND","MINUTE","getTickInterval","tickCount","getter","_lo","_hi","lo","hi","mid","interval","TimeCat","tickIndex","Continuous","getScalePercent","firstTick","lastTick","minLimit","maxLimit","filterValues","getInvertPercent","Linear","calBase","E","pow","log","getLogPositiveMin","positiveMin","Log","appendPercent","Pow","exponent","factor","Time","numberValue","minConfig","maxConfig","timeStamps_1","min_1","Infinity","secondMin_1","max_1","timeStamp","minTickInterval","Quantize","minIndex","minTick","minIndexPercent","unshift","Quantile","map$1","getClass","registerClass","cls","Identity","DEFAULT_Q","eps","Number","EPSILON","simplicity","q","Q","lmin","lmax","lstep","mod","simplicityMax","density","dmin","dmax","rt","densityMax","coverage","coverageMax","span","half","extended","onlyLoose","w","best","score","Q_1","sm","dm","delta","z","ceil","log10","cm","minStart","maxStart","isInteger","calculateCatTicks","tickInterval","ticks_1","e10","e5","e2","D3Linear","_domain","domain","from","_b","i0","i1","stop","tickIncrement","reverse","d3ArrayTicks","power","LN10","error","snapMultiple","snapType","intervalTicks","maxTick","strictLimit","defaultMin","defaultMax","tickMin","tickMax","pretty","unit","nu","ns","quantileSorted","getYear","date","createYear","creatMonth","lastValue","ratio","minYear","maxYear","yearInterval","monthInterval","mmMoth","dMonths","minMonth","diffMonth","mday","ddays","diffDay","hours","dHours","diffHour","dMinus","diffMinus","minSecond","dSeconds","seconds","console","warn","avg","sorted","d3Linear","CatTick","SNAP_COUNT_ARRAY","getFactor","number","intervalIsVerify","_ref4","getFixedLength","num","indexOfExp","Linear$1","Identity$1","Category$1","TimeCat$1","clearObj","_ref","_ref2","_ref3","avgInterval","calInterval","calMax","calMin","similarityIndex","similarityInterval","getInterval","startIndex","verify","fixedLength","getBestInterval","intervalCount","tickLength","Cat","ScaleController","defs","setFieldDef","updateScales","_getDef","def","_getDefaultType","_getScaleDef","values$1","_Array$getRange","isRounding","_adjustRange","startAngle","endAngle","isFullCircle","_getScaleCfg","firstValue$1","_this$_getScaleCfg","newScale","_updateScale","_getScaleData","adjustStartZero","Abastract","offsetFactor","frontContainer","backContainer","gridPoints","drawGrid","drawTicks","drawLine","drawLabels","tickCfg","getContainer","getOffsetPoint","getSidePoint","addShape","x1","y1","x2","y2","_id","labels","labelShape","_self$getSidePoint","getTextAlignInfo","gridCfg","subPoints","executedGrid","getAxisVector","getOffsetVector","axisVector","normal","verticalVector","offsetVector","textAlign","textBaseline","isTop","Line","_Abstract","lineCfg","AxisController","axisCfg","frontPlot","backPlot","axes","_isHide","_getLinePosition","dimType","_getLineCfg","_getCircleCfg","circleRadius","_getRadiusCfg","_getAxisCfg","verticalScale","maxWidth","maxHeight","labelCfg","executedLabel","textStyle","axisLabel","aria","context","_axisLabel$getBBox","getBBox","_createAxis","coordType","createAxis","yScales","_isAutoPadding","userPadding","legendRange","circleAxis","_axes$right","_maxWidth","_labelOffset","_axes$left","_maxWidth2","_labelOffset2","_axes$bottom","_maxHeight","_labelOffset3","_updateLayout","appendCfg","verticalTicks","first","formatTicks","verticalTick","calcDirection","xDistance","yDistance","calcDistance","point1","point2","EventController","emitEvent","startTime","now","startPoints","startDistance","pressTimeout","setTimeout","emitStart","eventType","clearPressTimeout","currentDistance","zoom","deltaX","deltaY","getEventType","prevMoveTime","lastMoveTime","prevMovePoints","lastMovePoints","emitEnd","intervalTime","velocity","_start","delegateEvent","processEvent","canvasEl","_click","_move","_end","_cancel","panEventListeners","pan","enable","isProcess","_this2","clearTimeout","pinch","CanvasElement","_EventEmit","setAttribute","dispatchEvent","CanvasElement$1","support","Event","supportEventListener","_addStop","addColorStop","parseStyle","firstCode","_shape$getBBox","minX","minY","maxX","maxY","tanTheta","tan","tanTheta2","createLinearGradient","_parseLineGradient","circleCfg","fx","fy","fr","_shape$getBBox2","createRadialGradient","_parseRadialGradient","ALIAS_ATTRS_MAP","SHAPE_ATTRS","CLIP_SHAPES","Element","_initProperties","initAttrs","initTransform","zIndex","isGroup","isShape","getDefaultAttrs","_setAttr","_setAttrClip","alias","_getAttr","clip","argumentsLen","bbox","_afterAttrsSet","getParent","setContext","drawInner","restoreContext","save","resetTransform","createPath","resetContext","restore","elAttrs","setLineDash","hasFill","fillStyle","hasStroke","strokeStyle","isVisible","getAriaLabel","_this$_attrs","_getAriaLabel","ariaLabel","_removeFromParent","parent","getMatrix","setMatrix","setTransform","rad","sx","sy","moveTo","cx","cy","mo","isDestroyed","Shape$2","_Element","originOpacity","globalAlpha","strokeOpacity","calculateBox","_Shape","canFill","canStroke","beginPath","minWidth","minHeight","parseRadius","lineTo","arc","closePath","rect","ImageShape","loading","image","drawImage","Image","_image","crossOrigin","onload","swidth","sheight","Circle","extremity","CubicN","T","t2","cubicBezierBounds","startPt","controlPt1","controlPt2","endPt","c1","c2","t","pt","getBBoxFromPoints","getBBoxFromArc","anticlockwise","diff","Line$1","x0","getBBoxFromLine","Polygon","getPoint","catmullRom2bezier","pointList","constraint","cp1","cp2","isLoop","controlPointList","smooth","prevPoint","nextPoint","cps","hasConstraint","d0","d1","sum","cp0","smoothBezier","_filterPoints","filteredPoints","Polyline","sps","sp","bezierCurveTo","newPoints","lastPoint","getBBoxFromBezierGroup","Arc","Sector","r0","unitX","unitY","outerBBox","innerBBox","Rect$1","absRotate","textWidthCacheCounter","textWidthCache","Text","lineCount","fontStyle","fontWeight","fontVariant","lineHeight","textArr","_getFontStyle","_getTextHeight","_getSpaceingY","spaceingY","subY","subText","fillText","_subText","strokeText","_getTextWidth","rotatedBox","Custom","SYMBOLS","square","Marker","symbol","SHAPE_MAP","Container","getGroupClass","getChildren","addGroup","contain","children","compare","getComparer","items","_setEvn","_self$_attrs","_item$_attrs","childAriaLabels","_childAriaLabel","childAriaLabel","Group","child","box","leftTop","leftBottom","rightTop","rightBottom","requestAnimationFrame","fn","Canvas","_initPixelRatio","_initCanvas","beforeDraw","clearRect","changeSize","eventController","canvasDOM","getPointByClient","_beginDraw","toDraw","_endDraw","setAriaLabel","engines","getEngine","G","createCanvas","renderer","registerEngine","engine","getClip","isClip","isPointInPlot","Helper","Chart","initPlugins","_plugins","_cacheId","register","plugins","plugin","unregister","getAll","notify","hook","descriptors","ilen","cache","geomConstructor","methodName","geom","addGeom","rendered","geoms","filters","_syncYScales","syncScales","_getFieldsForLegend","filteredData","_adjustScale","scaleController","_removeGeoms","_clearGeoms","_clearInner","_initFilteredData","_changeGeomsData","_initGeom","middlePlot","_initGeoms","_initCoord","coordCfg","C","_initLayout","newPlot","_initLayers","_initEvents","_initScaleController","_clearScaleController","axisController","condition","render","_renderAxis","repaint","_interactions","interaction","getPosition","getYScales","getRecord","getLegendItems","legendItems","colorAttr","compareScale","flag","scaleValues","compareScaleValues","_isScaleExist","scaleValue","marker","dataValue","checked","registerPlugins","chartPlugins","_landscape","track","splitPoints","yItem","splitArray","pointCfg","getPointsCfg","pointInfo","Point$1","_Geom","Point","hasStack","getStyle$1","topPoints","bottomPoints","isStack","drawLines","Path","splitArrayObj","splitedIndex","Line$3","_Path","equals","notEmpty","filterPoints","drawShape$1","isSmooth","eqls","equalsCenter","constaint","pointsLen","topSps","bottomSps","_n","_sp","drawRectShape","Area$1","Area","splitArrayfn","SizeMixin","initEvent","getDefaultSize","defaultSize","normalizeSize","getDimWidth","dimName","_getWidth","_toNormalizedSize","_toCoordSize","getNormalizedSize","getSize","getRectPoints","xmin","xmax","ymin","ymax","_cfg$center","v0","rectCfg","xValues","yValues","getRectRange","polygonPoints","Interval$1","Interval","Polygon$2","temp","xOffset","yOffset","_sortValue","getCandlePoints","Schema$1","Schema","toString$3","isType_1","isArray_1","isNil_1","Stack","_Adjust","processStack","stackCache","positive","negative","reverseOrder","xkey","_typeof","isObject_1","each_1","Dodge","marginRatio","dodgeRatio","getDodgeOffset","pre","margin","dodgeValue","isFunction_1","maxBy_1","maxData","ArrayUtil","Symmetric","cacheMax","groupFields","_getMax","dim","mergeData","maxValue","_getXValuesMax","_processSymmetric","valueMax","subVal","Polar","inner","innerRadius","maxRadius","startV","pointV","percentX","percentY","Circle$1","_getCirclePoint","align","baseLine","KEYWORDS_PERCENT","median","GuideBase","_getNormalizedValue","parsePercentPoint","xPercent","yPercent","limitInPlot","element","changeVisible","display","Arc$1","_GuideBase","coordCenter","atan2","modifyCSS","DOM","CSS","createDom","innerHTML","childNodes","Html","alignX","alignY","offsetX","offsetY","html","myNode","visibility","parentNode","wrapperNode","appendChild","canvasOffsetTop","offsetTop","canvasOffsetLeft","offsetLeft","newOffset","getOffsetFromAlign","removeChild","Line$4","Rect$2","Text$1","content","Tag","direct","autoAdjust","side","background","withPoint","pointStyle","_getDirect","tagWidth","tagHeight","clientWidth","clientHeight","vertical","horizontal","wrapperContainer","pointShape","tagContainer","tagText","textBBox","tagBg","arrowPoints","sideShape","Point$2","List","_renderTitle","_renderItems","showTitle","titleGap","itemGap","itemMarginBottom","itemFormatter","itemWidth","wordSpace","layout","joinString","wrapper","itemsGroup","titleShape","titleHeight","titleStyle","_titleHeight","reversed","_addItem","_adjustItems","_renderBackground","_wrapper$getBBox","backShape","nameText","itemGroup","unCheckStyle","unCheckColor","nameStyle","valueStyle","startX","markerAttrs","_formatItemValue","valueX","_getMaxItemWidth","maxItemWidth","_width","maxLength","twoAvgWidth","threeAvgWidth","_adjustHorizontal","rowWidth","legendHitBoxes","childHeight","childWidth","_adjustVertical","colHeight","totalWidth","setItems","clearItems","setTitle","TextBox","updateContent","updatePosition","backgroundShape","textShape","_getBBox","_this$_getBBox","tipWidth","tipHeight","_height","_this$_getBBox2","Tooltip","custom","fixed","tooltipArrow","showXTip","xTipBackground","xTipTextStyle","xTipBox","showYTip","yTipBackground","yTipTextStyle","yTipBox","showCrosshairs","_renderCrosshairs","crosshairsStyle","crosshairsType","xTip","yTip","setContent","setYTipContent","setYTipPosition","pos","plotRange","crosshairsShapeX","yTipHeight","yTipWidth","posX","posY","setXTipContent","setXTipPosition","crosshairsShapeY","canvasHeight","xTipWidth","xTipHeight","setXCrosshairPosition","setYCrosshairPosition","setPosition","_x","containerBBox","setMarkers","_cfg","markerGroup","_getMarkerGroup","clearMarkers","_getTooltipValueScale","colorScale","getTooltipName","nameScale","valueScale","getTooltipValue","getTooltipTitle","_uniqItems","_indexOfArray","tooltip","triggerOn","triggerOff","alwaysShow","showTooltipMarker","showItemMarker","itemMarkerStyle","snap","TooltipController","_tooltipCfg","lastTimeStamp","showTooltip","hideTooltip","_setCrosshairsCfg","_getMaxLength","tooltipCfg","prePoint","bindEvents","unBindEvents","_lastActive","_getTooltipMarkerStyle","_cfg2","_chart$get","firstItem","lastItem","intervalWidth","tooltipMarkerStyle","_setTooltip","tooltipMarkerCfg","lastActive","tip","onShow","arr1","arr2","JSON","stringify","onChange","xTipPosX","yTipPosY","markerItems","tooltipMarkerType","tooltipMarkerItems","records","tooltipItem","onHide","_handleEvent","aMethod","handleShowEvent","handleHideEvent","tooltipController","afterGeomDraw","Tooltip$1","guide","tag","GuideController","guides","guideShapes","_toString","_getId","_createGuide","ClassName","regionFilter","init$1","guideController","afterGeomDraw$1","Guide","DEFAULT_CFG","selectedMode","LegendController","_createEvent","clicked","legends","legendPosX","legendPosY","clickedItem","clickedLegend","findItem","clickable","onClick","filteredVals","legendCfg","_chart","addLegend","fieldCfg","addCustomLegend","_addCategoryLegend","_isFiltered","lastCfg","_alignLegend","_self$plotRange","chartWidth","chartHeight","legendHeight","legendWidth","verticalAlign","preWidth","alignLegends","handleEvent","init$2","legendController","beforeGeomDraw","getPaddingByPos","afterGeomDraw$2","clearInner$1","Legend","clock","performance","Timeline","anims","playing","play","update","pushAnim","animInfo","delay","duration","endTime","currentTime","propertyAnim","hasEnded","startState","endState","interpolate","hasStarted","onStart","easing","onFrame","newValue","aLen","onUpdate","onEnd","linear$1","bounceIn","bounceOut","Easing","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceInOut","plainArray","interpolateNumber","interpolateArray","nb","na","Animator","timeline","to","startValue","endValue","frame","defaultAnimationCfg","appear","enter","leave","Animate","Action","getAnimation","geomType","animationType","geomAnimateCfg","animation","getAnimateCfg","geomConfig","registerAnimation","animationName","animationFun","_extends2","getScaledMatrix","scaledMatrix","_matrix","_matrix2","doAnimation","animateCfg","_getAnimateParam","getAnimateParam","anim","fadeIn","ShapeAction","_groupScaleIn","zeroY","_getCoordInfo","getCoordInfo","endMatrix","_shapeScale","groupScaleInX","groupScaleInY","groupScaleInXY","shapesScaleInXY","groupWaveIn","isTransposed","GroupAction","shapesScaleInX","shapesScaleInY","path","GROUP_ANIMATION","schema","getShapes","geomIdx","geomShapes","_getAnimateCfgByShapeType","dataObj","_getShapeId","getAnimate","addAnimate","updateShapes","newShapes","deletedShape","tempShape","updateShape","cacheAttrs","fromAttrs","toAttrs","newShape","lastShape","afterCanvasInit","beforeCanvasDraw","isUpdate","caches","cacheShapes","axisShapes","componentShapes","geomCfg","appearCfg","_animate","afterCanvasDestroyed","detail","Animation","_Interactions","registerInteraction","getInteraction","interactions","interact","clearInteraction","defaultRange","Context","getPinchScale","minScale","minCount","updateRange","updateTicks","_initEvent","_afterinit","_afterdatachange","getFollowScale","startRange","lastTickCount","doZoom","leftScale","rightScale","rangeOffset","leftOffset","rightOffset","newStart","newEnd","newRange","doMove","rangeLen","valueStart","valueEnd","newValues","currentValues","lastIndex","isValuesEqual","updateScale","updateFollowScale","pinchScale","pinchValues","followScale","pinchField","pinchScaleType","followField","pinchValueMap","_getRange","newTickCount","catTicks","Base$2","preStart","preProcess","process","onProcess","preEnd","preReset","onReset","getInteractionContext","_bindEvents","interactionContext","startEvent","endEvent","resetEvent","_process","_reset","_clearEvents","Pan","preventDefault","Pinch","coordWidth","Component"],"mappings":"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","file":"static/js/1.80e22a32.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.F2 = {}));\n}(this, (function (exports) { 'use strict';\n\n    var isArrayLike = function (value) {\n      /**\n       * isArrayLike([1, 2, 3]) => true\n       * isArrayLike(document.body.children) => true\n       * isArrayLike('abc') => true\n       * isArrayLike(Function) => false\n       */\n      return value !== null && typeof value !== 'function' && isFinite(value.length);\n    };\n\n    var contains = function (arr, value) {\n      if (!isArrayLike(arr)) {\n        return false;\n      }\n\n      return arr.indexOf(value) > -1;\n    };\n\n    var filter = function (arr, func) {\n      if (!isArrayLike(arr)) {\n        return arr;\n      }\n\n      var result = [];\n\n      for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n\n        if (func(value, index)) {\n          result.push(value);\n        }\n      }\n\n      return result;\n    };\n\n    var toString = {}.toString;\n\n    var isType = function (value, type) {\n      return toString.call(value) === '[object ' + type + ']';\n    };\n\n    /**\n     * 是否为函数\n     * @param  {*} fn 对象\n     * @return {Boolean}  是否函数\n     */\n    var isFunction = (function (value) {\n      return isType(value, 'Function');\n    });\n\n    // isFinite,\n    var isNil = function (value) {\n      /**\n       * isNil(null) => true\n       * isNil() => true\n       */\n      return value === null || value === undefined;\n    };\n\n    var isArray = (function (value) {\n      return Array.isArray ? Array.isArray(value) : isType(value, 'Array');\n    });\n\n    var isObject = (function (value) {\n      /**\n       * isObject({}) => true\n       * isObject([1, 2, 3]) => true\n       * isObject(Function) => true\n       * isObject(null) => false\n       */\n      var type = typeof value;\n      return value !== null && type === 'object' || type === 'function';\n    });\n\n    function each(elements, func) {\n      if (!elements) {\n        return;\n      }\n\n      var rst;\n\n      if (isArray(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n          rst = func(elements[i], i);\n\n          if (rst === false) {\n            break;\n          }\n        }\n      } else if (isObject(elements)) {\n        for (var k in elements) {\n          if (elements.hasOwnProperty(k)) {\n            rst = func(elements[k], k);\n\n            if (rst === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    var keys = Object.keys ? function (obj) {\n      return Object.keys(obj);\n    } : function (obj) {\n      var result = [];\n      each(obj, function (value, key) {\n        if (!(isFunction(obj) && key === 'prototype')) {\n          result.push(key);\n        }\n      });\n      return result;\n    };\n\n    function isMatch(obj, attrs) {\n      var _keys = keys(attrs);\n\n      var length = _keys.length;\n      if (isNil(obj)) return !length;\n\n      for (var i = 0; i < length; i += 1) {\n        var key = _keys[i];\n\n        if (attrs[key] !== obj[key] || !(key in obj)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var isObjectLike = function (value) {\n      /**\n       * isObjectLike({}) => true\n       * isObjectLike([1, 2, 3]) => true\n       * isObjectLike(Function) => false\n       * isObjectLike(null) => false\n       */\n      return typeof value === 'object' && value !== null;\n    };\n\n    var isPlainObject = function (value) {\n      /**\n       * isObjectLike(new Foo) => false\n       * isObjectLike([1, 2, 3]) => false\n       * isObjectLike({ x: 0, y: 0 }) => true\n       * isObjectLike(Object.create(null)) => true\n       */\n      if (!isObjectLike(value) || !isType(value, 'Object')) {\n        return false;\n      }\n\n      if (Object.getPrototypeOf(value) === null) {\n        return true;\n      }\n\n      var proto = value;\n\n      while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n      }\n\n      return Object.getPrototypeOf(value) === proto;\n    };\n\n    function find(arr, predicate) {\n      if (!isArray(arr)) return null;\n\n      var _predicate;\n\n      if (isFunction(predicate)) {\n        _predicate = predicate;\n      }\n\n      if (isPlainObject(predicate)) {\n        _predicate = function (a) {\n          return isMatch(a, predicate);\n        };\n      }\n\n      if (_predicate) {\n        for (var i = 0; i < arr.length; i += 1) {\n          if (_predicate(arr[i])) {\n            return arr[i];\n          }\n        }\n      }\n\n      return null;\n    }\n\n    var getRange = function (values) {\n      // 存在 NaN 时，min,max 判定会出问题\n      var filterValues = values.filter(function (v) {\n        return !isNaN(v);\n      });\n\n      if (!filterValues.length) {\n        // 如果没有数值则直接返回0\n        return {\n          min: 0,\n          max: 0\n        };\n      }\n\n      if (isArray(values[0])) {\n        var tmp = [];\n\n        for (var i = 0; i < values.length; i++) {\n          tmp = tmp.concat(values[i]);\n        }\n\n        filterValues = tmp;\n      }\n\n      var max = Math.max.apply(null, filterValues);\n      var min = Math.min.apply(null, filterValues);\n      return {\n        min: min,\n        max: max\n      };\n    };\n\n    var isString = (function (str) {\n      return isType(str, 'String');\n    });\n\n    var uniq = function (arr) {\n      var resultArr = [];\n      each(arr, function (item) {\n        if (!contains(resultArr, item)) {\n          resultArr.push(item);\n        }\n      });\n      return resultArr;\n    };\n\n    function head(o) {\n      if (isArrayLike(o)) {\n        return o[0];\n      }\n\n      return undefined;\n    }\n\n    function last(o) {\n      if (isArrayLike(o)) {\n        var arr = o;\n        return arr[arr.length - 1];\n      }\n\n      return undefined;\n    }\n\n    var fixedBase = function (v, base) {\n      var str = base.toString();\n      var index = str.indexOf('.');\n\n      if (index === -1) {\n        return Math.round(v);\n      }\n\n      var length = str.substr(index + 1).length;\n\n      if (length > 20) {\n        length = 20;\n      }\n\n      return parseFloat(v.toFixed(length));\n    };\n\n    /**\n     * 判断是否数字\n     * @return {Boolean} 是否数字\n     */\n\n    var isNumber = function (value) {\n      return isType(value, 'Number');\n    };\n\n    var toString$1 = (function (value) {\n      if (isNil(value)) return '';\n      return value.toString();\n    });\n\n    var lowerFirst = function (value) {\n      var str = toString$1(value);\n      return str.charAt(0).toLowerCase() + str.substring(1);\n    };\n\n    function substitute(str, o) {\n      if (!str || !o) {\n        return str;\n      }\n\n      return str.replace(/\\\\?\\{([^{}]+)\\}/g, function (match, name) {\n        if (match.charAt(0) === '\\\\') {\n          return match.slice(1);\n        }\n\n        return o[name] === undefined ? '' : o[name];\n      });\n    }\n\n    var upperFirst = function (value) {\n      var str = toString$1(value);\n      return str.charAt(0).toUpperCase() + str.substring(1);\n    };\n\n    var toString$2 = {}.toString;\n\n    var getType = function (value) {\n      return toString$2.call(value).replace(/^\\[object /, '').replace(/]$/, '');\n    };\n\n    /**\n     * 是否是布尔类型\n     *\n     * @param {Object} value 测试的值\n     * @return {Boolean}\n     */\n\n    var isBoolean = function (value) {\n      return isType(value, 'Boolean');\n    };\n\n    var isDate = function (value) {\n      return isType(value, 'Date');\n    };\n\n    var objectProto = Object.prototype;\n\n    var isPrototype = function (value) {\n      var Ctor = value && value.constructor;\n      var proto = typeof Ctor === 'function' && Ctor.prototype || objectProto;\n      return value === proto;\n    };\n\n    // FIXME: Mutable param should be forbidden in static lang.\n    function _mix(dist, obj) {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\n          dist[key] = obj[key];\n        }\n      }\n    }\n\n    function mix(dist, src1, src2, src3) {\n      if (src1) _mix(dist, src1);\n      if (src2) _mix(dist, src2);\n      if (src3) _mix(dist, src3);\n      return dist;\n    }\n\n    var MAX_MIX_LEVEL = 5;\n\n    function _deepMix(dist, src, level, maxLevel) {\n      level = level || 0;\n      maxLevel = maxLevel || MAX_MIX_LEVEL;\n\n      for (var key in src) {\n        if (src.hasOwnProperty(key)) {\n          var value = src[key];\n\n          if (value !== null && isPlainObject(value)) {\n            if (!isPlainObject(dist[key])) {\n              dist[key] = {};\n            }\n\n            if (level < maxLevel) {\n              _deepMix(dist[key], value, level + 1, maxLevel);\n            } else {\n              dist[key] = src[key];\n            }\n          } else if (isArray(value)) {\n            dist[key] = [];\n            dist[key] = dist[key].concat(value);\n          } else if (value !== undefined) {\n            dist[key] = value;\n          }\n        }\n      }\n    } // todo 重写\n\n\n    var deepMix = function (rst) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      for (var i = 0; i < args.length; i += 1) {\n        _deepMix(rst, args[i]);\n      }\n\n      return rst;\n    };\n\n    var indexOf = function (arr, obj) {\n      if (!isArrayLike(arr)) {\n        return -1;\n      }\n\n      var m = Array.prototype.indexOf;\n\n      if (m) {\n        return m.call(arr, obj);\n      }\n\n      var index = -1;\n\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] === obj) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function isEmpty(value) {\n      /**\n       * isEmpty(null) => true\n       * isEmpty() => true\n       * isEmpty(true) => true\n       * isEmpty(1) => true\n       * isEmpty([1, 2, 3]) => false\n       * isEmpty('abc') => false\n       * isEmpty({ a: 1 }) => false\n       */\n      if (isNil(value)) {\n        return true;\n      }\n\n      if (isArrayLike(value)) {\n        return !value.length;\n      }\n\n      var type = getType(value);\n\n      if (type === 'Map' || type === 'Set') {\n        return !value.size;\n      }\n\n      if (isPrototype(value)) {\n        return !Object.keys(value).length;\n      }\n\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var isEqual = function (value, other) {\n      if (value === other) {\n        return true;\n      }\n\n      if (!value || !other) {\n        return false;\n      }\n\n      if (isString(value) || isString(other)) {\n        return false;\n      }\n\n      if (isArrayLike(value) || isArrayLike(other)) {\n        if (value.length !== other.length) {\n          return false;\n        }\n\n        var rst = true;\n\n        for (var i = 0; i < value.length; i++) {\n          rst = isEqual(value[i], other[i]);\n\n          if (!rst) {\n            break;\n          }\n        }\n\n        return rst;\n      }\n\n      if (isObjectLike(value) || isObjectLike(other)) {\n        var valueKeys = Object.keys(value);\n        var otherKeys = Object.keys(other);\n\n        if (valueKeys.length !== otherKeys.length) {\n          return false;\n        }\n\n        var rst = true;\n\n        for (var i = 0; i < valueKeys.length; i++) {\n          rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n\n          if (!rst) {\n            break;\n          }\n        }\n\n        return rst;\n      }\n\n      return false;\n    };\n\n    var map = function (arr, func) {\n      if (!isArrayLike(arr)) {\n        // @ts-ignore\n        return arr;\n      }\n\n      var result = [];\n\n      for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n        result.push(func(value, index));\n      }\n\n      return result;\n    };\n\n    function size(o) {\n      if (isNil(o)) {\n        return 0;\n      }\n\n      if (isArrayLike(o)) {\n        return o.length;\n      }\n\n      return Object.keys(o).length;\n    }\n\n    function merge(dataArray) {\n      var rst = [];\n\n      for (var i = 0, len = dataArray.length; i < len; i++) {\n        rst = rst.concat(dataArray[i]);\n      }\n\n      return rst;\n    }\n\n    function values(data, name) {\n      var rst = [];\n      var tmpMap = {};\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var obj = data[i];\n        var value = obj[name];\n\n        if (!isNil(value)) {\n          if (!isArray(value)) {\n            if (!tmpMap[value]) {\n              rst.push(value);\n              tmpMap[value] = true;\n            }\n          } else {\n            each(value, function (val) {\n              if (!tmpMap[val]) {\n                rst.push(val);\n                tmpMap[val] = true;\n              }\n            });\n          }\n        }\n      }\n\n      return rst;\n    }\n\n    function firstValue(data, name) {\n      var rst = null;\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var obj = data[i];\n        var value = obj[name];\n\n        if (!isNil(value)) {\n          if (isArray(value)) {\n            rst = value[0];\n          } else {\n            rst = value;\n          }\n\n          break;\n        }\n      }\n\n      return rst;\n    }\n\n    function groupToMap(data, fields) {\n      if (!fields) {\n        return {\n          0: data\n        };\n      }\n\n      var callback = function callback(row) {\n        var unique = '_';\n\n        for (var i = 0, l = fields.length; i < l; i++) {\n          unique += row[fields[i]] && row[fields[i]].toString();\n        }\n\n        return unique;\n      };\n\n      var groups = {};\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var row = data[i];\n        var key = callback(row);\n\n        if (groups[key]) {\n          groups[key].push(row);\n        } else {\n          groups[key] = [row];\n        }\n      }\n\n      return groups;\n    }\n\n    function group(data, fields, appendConditions) {\n      if (appendConditions === void 0) {\n        appendConditions = {};\n      }\n\n      if (!fields) {\n        return [data];\n      }\n\n      var groups = groupToMap(data, fields);\n      var array = [];\n\n      if (fields.length === 1 && appendConditions[fields[0]]) {\n        var _values = appendConditions[fields[0]];\n        each(_values, function (value) {\n          value = '_' + value;\n          array.push(groups[value]);\n        });\n      } else {\n        for (var i in groups) {\n          array.push(groups[i]);\n        }\n      }\n\n      return array;\n    }\n\n    function remove(arr, obj) {\n      if (!arr) {\n        return;\n      }\n\n      var index = arr.indexOf(obj);\n\n      if (index !== -1) {\n        arr.splice(index, 1);\n      }\n    }\n\n    function getRange$1(values) {\n      if (!values.length) {\n        return {\n          min: 0,\n          max: 0\n        };\n      }\n\n      var max = Math.max.apply(null, values);\n      var min = Math.min.apply(null, values);\n      return {\n        min: min,\n        max: max\n      };\n    }\n\n    var array = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        merge: merge,\n        values: values,\n        firstValue: firstValue,\n        group: group,\n        groupToMap: groupToMap,\n        remove: remove,\n        getRange: getRange$1\n    });\n\n    /**\n     * Detects support for options object argument in addEventListener.\n     * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n     * @private\n     */\n\n    var supportsEventListenerOptions = function () {\n      var supports = false;\n\n      try {\n        var options = Object.defineProperty({}, 'passive', {\n          get: function get() {\n            supports = true;\n          }\n        });\n        window.addEventListener('e', null, options);\n      } catch (e) {// continue regardless of error\n      }\n\n      return supports;\n    }(); // Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n    // https://github.com/chartjs/Chart.js/issues/4287\n\n\n    var eventListenerOptions = supportsEventListenerOptions ? {\n      passive: true\n    } : false;\n    /* global wx, my */\n    // weixin miniprogram\n\n    var isWx = typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function'; // ant miniprogram\n\n    var isMy = typeof my === 'object' && typeof my.getSystemInfoSync === 'function'; // in node\n\n    var isNode = typeof global && !typeof window; // in browser\n\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.sessionStorage !== 'undefined';\n\n    function isCanvasElement(el) {\n      if (!el || typeof el !== 'object') return false;\n\n      if (el.nodeType === 1 && el.nodeName) {\n        // HTMLCanvasElement\n        return true;\n      } // CanvasElement\n\n\n      return !!el.isCanvasElement;\n    }\n\n    function getPixelRatio() {\n      return window && window.devicePixelRatio || 1;\n    }\n\n    function getStyle(el, property) {\n      return el.currentStyle ? el.currentStyle[property] : document.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n    }\n\n    function getWidth(el) {\n      var width = getStyle(el, 'width');\n\n      if (width === 'auto') {\n        width = el.offsetWidth;\n      }\n\n      return parseFloat(width);\n    }\n\n    function getHeight(el) {\n      var height = getStyle(el, 'height');\n\n      if (height === 'auto') {\n        height = el.offsetHeight;\n      }\n\n      return parseFloat(height);\n    }\n\n    function getDomById(id) {\n      if (!id) {\n        return null;\n      }\n\n      return document.getElementById(id);\n    }\n\n    function getRelativePosition(point, canvas) {\n      var canvasDom = canvas.get('el');\n      if (!canvasDom) return point;\n\n      var _canvasDom$getBoundin = canvasDom.getBoundingClientRect(),\n          top = _canvasDom$getBoundin.top,\n          left = _canvasDom$getBoundin.left;\n\n      var paddingLeft = parseFloat(getStyle(canvasDom, 'padding-left'));\n      var paddingTop = parseFloat(getStyle(canvasDom, 'padding-top'));\n      var mouseX = point.x - left - paddingLeft;\n      var mouseY = point.y - top - paddingTop;\n      return {\n        x: mouseX,\n        y: mouseY\n      };\n    }\n\n    function addEventListener(source, type, listener) {\n      source.addEventListener(type, listener, eventListenerOptions);\n    }\n\n    function removeEventListener(source, type, listener) {\n      source.removeEventListener(type, listener, eventListenerOptions);\n    }\n\n    function landscapePoint(point, canvas) {\n      var landscape = canvas.get('landscape');\n\n      if (!landscape) {\n        return point;\n      }\n\n      if (isFunction(landscape)) {\n        return landscape(point, canvas);\n      } // 默认顺时针旋转90度\n\n\n      var height = canvas.get('height');\n      var x = point.y;\n      var y = height - point.x;\n      return {\n        x: x,\n        y: y\n      };\n    }\n\n    function convertPoints(ev, canvas) {\n      var touches = ev.touches; // 认为是mouse事件\n\n      if (!touches) {\n        var point = getRelativePosition({\n          x: ev.clientX,\n          y: ev.clientY\n        }, canvas);\n        return [landscapePoint(point, canvas)];\n      }\n\n      var points = [];\n\n      for (var i = 0, len = touches.length; i < len; i++) {\n        var touch = touches[i]; // x, y: 相对canvas原点的位置，clientX, clientY 相对于可视窗口的位置\n\n        var x = touch.x,\n            y = touch.y,\n            clientX = touch.clientX,\n            clientY = touch.clientY;\n\n        var _point = void 0; // 小程序环境会有x,y\n\n\n        if (isNumber(x) || isNumber(y)) {\n          _point = {\n            x: x,\n            y: y\n          };\n        } else {\n          // 浏览器环境再计算下canvas的相对位置\n          _point = getRelativePosition({\n            x: clientX,\n            y: clientY\n          }, canvas);\n        }\n\n        points.push(landscapePoint(_point, canvas));\n      }\n\n      return points;\n    }\n\n    function createEvent(event, chart) {\n      var canvas = chart.get('canvas');\n      var points = convertPoints(event, canvas); // touchend会没有points\n\n      var point = points[0] || {};\n      return {\n        type: event.type,\n        chart: chart,\n        \"native\": event,\n        x: point.x,\n        y: point.y\n      };\n    }\n\n    function measureText(text, font, ctx) {\n      if (!ctx) {\n        ctx = document.createElement('canvas').getContext('2d');\n      }\n\n      ctx.font = font || '12px sans-serif';\n      return ctx.measureText(text);\n    }\n\n    /**\n     * @fileOverview Utility for F2\n     * @author dxq613 @gmail.com\n     * @author sima.zhang1990@gmail.com\n     */\n\n    function isObjectValueEqual(a, b) {\n      // for vue.js\n      a = Object.assign({}, a);\n      b = Object.assign({}, b);\n      var aProps = Object.getOwnPropertyNames(a);\n      var bProps = Object.getOwnPropertyNames(b);\n\n      if (aProps.length !== bProps.length) {\n        return false;\n      }\n\n      for (var i = 0, len = aProps.length; i < len; i++) {\n        var propName = aProps[i];\n\n        if (a[propName] !== b[propName]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    function parsePadding(padding) {\n      var top;\n      var right;\n      var bottom;\n      var left;\n\n      if (isNumber(padding) || isString(padding)) {\n        top = bottom = left = right = padding;\n      } else if (isArray(padding)) {\n        top = padding[0];\n        right = !isNil(padding[1]) ? padding[1] : padding[0];\n        bottom = !isNil(padding[2]) ? padding[2] : padding[0];\n        left = !isNil(padding[3]) ? padding[3] : right;\n      }\n\n      return [top, right, bottom, left];\n    }\n\n    function directionEnabled(mode, dir) {\n      if (mode === undefined) {\n        return true;\n      } else if (typeof mode === 'string') {\n        return mode.indexOf(dir) !== -1;\n      }\n\n      return false;\n    }\n\n    function toTimeStamp(value) {\n      if (isString(value)) {\n        if (value.indexOf('T') > 0) {\n          value = new Date(value).getTime();\n        } else {\n          // new Date('2010/01/10') 和 new Date('2010-01-10') 的差别在于:\n          // 如果仅有年月日时，前者是带有时区的: Fri Jan 10 2020 02:40:13 GMT+0800 (中国标准时间)\n          // 后者会格式化成 Sun Jan 10 2010 08:00:00 GMT+0800 (中国标准时间)\n          value = new Date(value.replace(/-/gi, '/')).getTime();\n        }\n      }\n\n      if (isDate(value)) {\n        value = value.getTime();\n      }\n\n      return value;\n    }\n\n    var Util = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Array: array,\n        upperFirst: upperFirst,\n        lowerFirst: lowerFirst,\n        isString: isString,\n        isNumber: isNumber,\n        isBoolean: isBoolean,\n        isFunction: isFunction,\n        isDate: isDate,\n        isArray: isArray,\n        isNil: isNil,\n        isObject: isObject,\n        isPlainObject: isPlainObject,\n        isEqual: isEqual,\n        deepMix: deepMix,\n        mix: mix,\n        each: each,\n        uniq: uniq,\n        find: find,\n        isObjectValueEqual: isObjectValueEqual,\n        parsePadding: parsePadding,\n        directionEnabled: directionEnabled,\n        toTimeStamp: toTimeStamp,\n        substitute: substitute,\n        isWx: isWx,\n        isMy: isMy,\n        isNode: isNode,\n        isBrowser: isBrowser,\n        isCanvasElement: isCanvasElement,\n        getPixelRatio: getPixelRatio,\n        getStyle: getStyle,\n        getWidth: getWidth,\n        getHeight: getHeight,\n        getDomById: getDomById,\n        getRelativePosition: getRelativePosition,\n        addEventListener: addEventListener,\n        removeEventListener: removeEventListener,\n        createEvent: createEvent,\n        convertPoints: convertPoints,\n        measureText: measureText\n    });\n\n    /**\n     * @fileOverview default theme\n     * @author dxq613@gail.com\n     */\n    var color1 = '#E8E8E8'; // color of axis-line and axis-grid\n\n    var color2 = '#808080'; // color of axis label\n\n    var defaultAxis = {\n      label: {\n        fill: color2,\n        fontSize: 10\n      },\n      line: {\n        stroke: color1,\n        lineWidth: 1\n      },\n      grid: {\n        type: 'line',\n        stroke: color1,\n        lineWidth: 1,\n        lineDash: [2]\n      },\n      tickLine: null,\n      labelOffset: 7.5\n    };\n    var Theme = {\n      fontFamily: '\"Helvetica Neue\", \"San Francisco\", Helvetica, Tahoma, Arial, \"PingFang SC\", \"Hiragino Sans GB\", \"Heiti SC\", \"Microsoft YaHei\", sans-serif',\n      defaultColor: '#1890FF',\n      pixelRatio: 1,\n      padding: 'auto',\n      appendPadding: 15,\n      colors: ['#1890FF', '#2FC25B', '#FACC14', '#223273', '#8543E0', '#13C2C2', '#3436C7', '#F04864'],\n      shapes: {\n        line: ['line', 'dash'],\n        point: ['circle', 'hollowCircle']\n      },\n      sizes: [4, 10],\n      axis: {\n        common: defaultAxis,\n        // common axis configuration\n        bottom: mix({}, defaultAxis, {\n          grid: null\n        }),\n        left: mix({}, defaultAxis, {\n          line: null\n        }),\n        right: mix({}, defaultAxis, {\n          line: null\n        }),\n        circle: mix({}, defaultAxis, {\n          line: null\n        }),\n        radius: mix({}, defaultAxis, {\n          labelOffset: 4\n        })\n      },\n      shape: {\n        line: {\n          lineWidth: 2,\n          lineJoin: 'round',\n          lineCap: 'round'\n        },\n        point: {\n          lineWidth: 0,\n          size: 3\n        },\n        area: {\n          fillOpacity: 0.1\n        }\n      },\n      _defaultAxis: defaultAxis\n    };\n\n    var lang = {\n      general: {\n        title: '这是一个图表，',\n        withTitle: '这是一个关于“{title}”的图表。'\n      },\n      coord: {\n        cartesian: 'X轴是{xLabel}Y轴是{yLabel}' // polar: '弧度是{xLabel}半径是{yLabel}'\n\n      },\n      scale: {\n        linear: '数值型，数据最小值为{min}，最大值为{max}；',\n        cat: '分类型, 分类类型有：{values}；',\n        timeCat: '时间型，时间范围从{start}到{end}；'\n      },\n      geometry: {\n        prefix: '共有{count}种分类组成，',\n        oneData: '第{index}类是{name}，数据是{values};',\n        partData: '第{index}类是{name}，共有{count}项数据，前{part}项是{values};',\n        allData: '第{index}类是{name}，有{count}项数据，分别是{values};'\n      },\n      legend: {\n        prefix: '图例分类有：'\n      }\n    };\n\n    var Global = {\n      version: '3.8.1',\n      scales: {},\n      widthRatio: {\n        column: 1 / 2,\n        rose: 0.999999,\n        multiplePie: 3 / 4\n      },\n      lineDash: [4, 4],\n      lang: lang\n    };\n\n    Global.setTheme = function (theme) {\n      deepMix(Global, theme);\n    };\n\n    Global.setTheme(Theme);\n\n    function _defineProperty(obj, key, value) {\n      if (key in obj) {\n        Object.defineProperty(obj, key, {\n          value: value,\n          enumerable: true,\n          configurable: true,\n          writable: true\n        });\n      } else {\n        obj[key] = value;\n      }\n\n      return obj;\n    }\n\n    function _extends() {\n      _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n      return _extends.apply(this, arguments);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    function _assertThisInitialized(self) {\n      if (self === void 0) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n\n      return self;\n    }\n\n    var EVENT_AFTER_INIT = 'afterinit';\n    var EVENT_BEFORE_RENDER = 'beforerender';\n    var EVENT_AFTER_RENDER = 'afterrender';\n    var EVENT_BEFORE_DATA_CHANGE = 'beforedatachange';\n    var EVENT_AFTER_DATA_CHANGE = 'afterdatachange';\n    var EVENT_AFTER_SIZE_CHANGE = '_aftersizechange';\n    var EVENT_AFTER_GEOM_INIT = '_aftergeominit';\n    var EVENT_BEFORE_GEOM_DRAW = 'beforegeomdraw';\n    var EVENT_AFTER_GEOM_DRAW = 'aftergeomdraw';\n    var EVENT_CLEAR = 'clear';\n    var EVENT_CLEAR_INNER = 'clearinner';\n    var EVENT_REPAINT = 'repaint';\n\n    // 实现简单的事件机制\n\n    var EventEmit = /*#__PURE__*/function () {\n      function EventEmit() {\n        this.__events = {};\n      }\n\n      var _proto = EventEmit.prototype;\n\n      _proto.on = function on(type, listener) {\n        if (!type || !listener) {\n          return;\n        }\n\n        var events = this.__events[type] || [];\n        events.push(listener);\n        this.__events[type] = events;\n      };\n\n      _proto.emit = function emit(type, e) {\n        var _this = this;\n\n        if (isObject(type)) {\n          e = type;\n          type = e && e.type;\n        }\n\n        if (!type) {\n          return;\n        }\n\n        var events = this.__events[type];\n\n        if (!events || !events.length) {\n          return;\n        }\n\n        events.forEach(function (listener) {\n          listener.call(_this, e);\n        });\n      };\n\n      _proto.off = function off(type, listener) {\n        var __events = this.__events;\n        var events = __events[type];\n\n        if (!events || !events.length) {\n          return;\n        } // 如果没有指定方法，则删除所有项\n\n\n        if (!listener) {\n          delete __events[type];\n          return;\n        } // 删除指定的 listener\n\n\n        for (var i = 0, len = events.length; i < len; i++) {\n          if (events[i] === listener) {\n            events.splice(i, 1);\n            i--;\n          }\n        }\n      };\n\n      return EventEmit;\n    }();\n\n    var Base = /*#__PURE__*/function (_Emit) {\n      _inheritsLoose(Base, _Emit);\n\n      var _proto = Base.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {};\n      };\n\n      function Base(cfg) {\n        var _this;\n\n        _this = _Emit.call(this) || this;\n        var attrs = {};\n\n        var defaultCfg = _this.getDefaultCfg();\n\n        _this._attrs = attrs;\n        mix(attrs, defaultCfg, cfg);\n        return _this;\n      }\n\n      _proto.get = function get(name) {\n        return this._attrs[name];\n      };\n\n      _proto.set = function set(name, value) {\n        this._attrs[name] = value;\n      };\n\n      _proto.destroy = function destroy() {\n        this._attrs = {};\n        this.destroyed = true;\n      };\n\n      return Base;\n    }(EventEmit);\n\n    var Plot = /*#__PURE__*/function () {\n      function Plot(cfg) {\n        mix(this, cfg);\n\n        this._init();\n      }\n\n      var _proto = Plot.prototype;\n\n      _proto._init = function _init() {\n        var self = this;\n        var start = self.start;\n        var end = self.end;\n        var xMin = Math.min(start.x, end.x);\n        var xMax = Math.max(start.x, end.x);\n        var yMin = Math.min(start.y, end.y);\n        var yMax = Math.max(start.y, end.y);\n        this.tl = {\n          x: xMin,\n          y: yMin\n        };\n        this.tr = {\n          x: xMax,\n          y: yMin\n        };\n        this.bl = {\n          x: xMin,\n          y: yMax\n        };\n        this.br = {\n          x: xMax,\n          y: yMax\n        };\n        this.width = xMax - xMin;\n        this.height = yMax - yMin;\n      }\n      /**\n       * reset\n       * @param  {Object} start start point\n       * @param  {Object} end end point\n       */\n      ;\n\n      _proto.reset = function reset(start, end) {\n        this.start = start;\n        this.end = end;\n\n        this._init();\n      }\n      /**\n       * check the point is in the range of plot\n       * @param  {Number}  x x value\n       * @param  {[type]}  y y value\n       * @return {Boolean} return the result\n       */\n      ;\n\n      _proto.isInRange = function isInRange(x, y) {\n        if (isObject(x)) {\n          y = x.y;\n          x = x.x;\n        }\n\n        var tl = this.tl;\n        var br = this.br;\n        return tl.x <= x && x <= br.x && tl.y <= y && y <= br.y;\n      };\n\n      return Plot;\n    }();\n\n    var Matrix = {\n      generateDefault: function generateDefault() {\n        return [1, 0, 0, 1, 0, 0];\n      },\n      isChanged: function isChanged(m) {\n        return m[0] !== 1 || m[1] !== 0 || m[2] !== 0 || m[3] !== 1 || m[4] !== 0 || m[5] !== 0;\n      },\n      multiply: function multiply(m1, m2) {\n        var m11 = m1[0] * m2[0] + m1[2] * m2[1];\n        var m12 = m1[1] * m2[0] + m1[3] * m2[1];\n        var m21 = m1[0] * m2[2] + m1[2] * m2[3];\n        var m22 = m1[1] * m2[2] + m1[3] * m2[3];\n        var dx = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n        var dy = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n        return [m11, m12, m21, m22, dx, dy];\n      },\n      scale: function scale(out, m, v) {\n        out[0] = m[0] * v[0];\n        out[1] = m[1] * v[0];\n        out[2] = m[2] * v[1];\n        out[3] = m[3] * v[1];\n        out[4] = m[4];\n        out[5] = m[5];\n        return out;\n      },\n      rotate: function rotate(out, m, radian) {\n        var c = Math.cos(radian);\n        var s = Math.sin(radian);\n        var m11 = m[0] * c + m[2] * s;\n        var m12 = m[1] * c + m[3] * s;\n        var m21 = m[0] * -s + m[2] * c;\n        var m22 = m[1] * -s + m[3] * c;\n        out[0] = m11;\n        out[1] = m12;\n        out[2] = m21;\n        out[3] = m22;\n        out[4] = m[4];\n        out[5] = m[5];\n        return out;\n      },\n      translate: function translate(out, m, v) {\n        out[0] = m[0];\n        out[1] = m[1];\n        out[2] = m[2];\n        out[3] = m[3];\n        out[4] = m[4] + m[0] * v[0] + m[2] * v[1];\n        out[5] = m[5] + m[1] * v[0] + m[3] * v[1];\n        return out;\n      },\n      transform: function transform(m, actions) {\n        var out = [].concat(m);\n\n        for (var i = 0, len = actions.length; i < len; i++) {\n          var action = actions[i];\n\n          switch (action[0]) {\n            case 't':\n              Matrix.translate(out, out, [action[1], action[2]]);\n              break;\n\n            case 's':\n              Matrix.scale(out, out, [action[1], action[2]]);\n              break;\n\n            case 'r':\n              Matrix.rotate(out, out, action[1]);\n              break;\n          }\n        }\n\n        return out;\n      }\n    };\n\n    /**\n     * 2 Dimensional Vector\n     * @module vector2\n     */\n    var Vector2 = {\n      /**\n       * Creates a new, empty vector2\n       *\n       * @return {vector2} a new 2D vector\n       */\n      create: function create() {\n        return [0, 0];\n      },\n\n      /**\n       * Calculates the length of a vector2\n       *\n       * @param {vector2} v vector to calculate length of\n       * @return {Number} length of v\n       */\n      length: function length(v) {\n        var x = v[0];\n        var y = v[1];\n        return Math.sqrt(x * x + y * y);\n      },\n\n      /**\n       * Normalize a vector2\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v vector to normalize\n       * @return {vector2} out\n       */\n      normalize: function normalize(out, v) {\n        var len = this.length(v);\n\n        if (len === 0) {\n          out[0] = 0;\n          out[1] = 0;\n        } else {\n          out[0] = v[0] / len;\n          out[1] = v[1] / len;\n        }\n\n        return out;\n      },\n\n      /**\n       * Adds two vector2's\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      add: function add(out, v1, v2) {\n        out[0] = v1[0] + v2[0];\n        out[1] = v1[1] + v2[1];\n        return out;\n      },\n\n      /**\n       * Subtracts vector v2 from vector v1\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      sub: function sub(out, v1, v2) {\n        out[0] = v1[0] - v2[0];\n        out[1] = v1[1] - v2[1];\n        return out;\n      },\n\n      /**\n       * Scales a vector2 by a scalar number\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v the vector to scale\n       * @param {Number} s amount to scale the vector by\n       * @return {vector2} out\n       */\n      scale: function scale(out, v, s) {\n        out[0] = v[0] * s;\n        out[1] = v[1] * s;\n        return out;\n      },\n\n      /**\n       * Calculates the dot product of two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Number} dot product of v1 and v2\n       */\n      dot: function dot(v1, v2) {\n        return v1[0] * v2[0] + v1[1] * v2[1];\n      },\n\n      /**\n       * Calculates the direction of two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Boolean} the direction of v1 and v2\n       */\n      direction: function direction(v1, v2) {\n        return v1[0] * v2[1] - v2[0] * v1[1];\n      },\n\n      /**\n       * Calculates the angle of two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Number} angle of v1 and v2\n       */\n      angle: function angle(v1, v2) {\n        var theta = this.dot(v1, v2) / (this.length(v1) * this.length(v2));\n        return Math.acos(theta);\n      },\n\n      /**\n       * Calculates the angle of two vector2's with direction\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @param {Boolean} direction the direction of two vector2's\n       * @return {Number} angle of v1 and v2\n       */\n      angleTo: function angleTo(v1, v2, direction) {\n        var angle = this.angle(v1, v2);\n        var angleLargeThanPI = this.direction(v1, v2) >= 0;\n\n        if (direction) {\n          if (angleLargeThanPI) {\n            return Math.PI * 2 - angle;\n          }\n\n          return angle;\n        }\n\n        if (angleLargeThanPI) {\n          return angle;\n        }\n\n        return Math.PI * 2 - angle;\n      },\n\n      /**\n       * whether a vector2 is zero vector\n       *\n       * @param  {vector2} v vector to calculate\n       * @return {Boolean}   is or not a zero vector\n       */\n      zero: function zero(v) {\n        return v[0] === 0 && v[1] === 0;\n      },\n\n      /**\n       * Calculates the euclidian distance between two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Number} distance between a and b\n       */\n      distance: function distance(v1, v2) {\n        var x = v2[0] - v1[0];\n        var y = v2[1] - v1[1];\n        return Math.sqrt(x * x + y * y);\n      },\n\n      /**\n       * Creates a new vector2 initialized with values from an existing vector\n       *\n       * @param {vector2} v vector to clone\n       * @return {Array} a new 2D vector\n       */\n      clone: function clone(v) {\n        return [v[0], v[1]];\n      },\n\n      /**\n       * Return the minimum of two vector2's\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      min: function min(out, v1, v2) {\n        out[0] = Math.min(v1[0], v2[0]);\n        out[1] = Math.min(v1[1], v2[1]);\n        return out;\n      },\n\n      /**\n       * Return the maximum of two vector2's\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      max: function max(out, v1, v2) {\n        out[0] = Math.max(v1[0], v2[0]);\n        out[1] = Math.max(v1[1], v2[1]);\n        return out;\n      },\n\n      /**\n       * Transforms the vector2 with a mat2d\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v the vector to transform\n       * @param {mat2d} m matrix to transform with\n       * @return {vector2} out\n       */\n      transformMat2d: function transformMat2d(out, v, m) {\n        var x = v[0];\n        var y = v[1];\n        out[0] = m[0] * x + m[2] * y + m[4];\n        out[1] = m[1] * x + m[3] * y + m[5];\n        return out;\n      }\n    };\n\n    var defaultMatrix = [1, 0, 0, 1, 0, 0];\n\n    var Base$1 = /*#__PURE__*/function () {\n      var _proto = Base.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {};\n\n      function Base(cfg) {\n        this._initDefaultCfg();\n\n        mix(this, cfg);\n        var start;\n        var end;\n\n        if (this.plot) {\n          start = this.plot.bl;\n          end = this.plot.tr;\n          this.start = start;\n          this.end = end;\n        } else {\n          start = this.start;\n          end = this.end;\n        }\n\n        this.init(start, end);\n      }\n\n      _proto._scale = function _scale(s1, s2) {\n        var matrix = this.matrix;\n        var center = this.center;\n        Matrix.translate(matrix, matrix, [center.x, center.y]);\n        Matrix.scale(matrix, matrix, [s1, s2]);\n        Matrix.translate(matrix, matrix, [-center.x, -center.y]);\n      };\n\n      _proto.init = function init(start, end) {\n        this.matrix = [].concat(defaultMatrix); // 设置中心点\n\n        this.center = {\n          x: (end.x - start.x) / 2 + start.x,\n          y: (end.y - start.y) / 2 + start.y\n        };\n\n        if (this.scale) {\n          this._scale(this.scale[0], this.scale[1]);\n        }\n      };\n\n      _proto.convertPoint = function convertPoint(point) {\n        var _this$_convertPoint = this._convertPoint(point),\n            x = _this$_convertPoint.x,\n            y = _this$_convertPoint.y;\n\n        if (!Matrix.isChanged(this.matrix)) {\n          return {\n            x: x,\n            y: y\n          };\n        }\n\n        var vector = [x, y];\n        Vector2.transformMat2d(vector, vector, this.matrix);\n        return {\n          x: vector[0],\n          y: vector[1]\n        };\n      };\n\n      _proto.invertPoint = function invertPoint(point) {\n        return this._invertPoint(point);\n      };\n\n      _proto._convertPoint = function _convertPoint(point) {\n        return point;\n      };\n\n      _proto._invertPoint = function _invertPoint(point) {\n        return point;\n      };\n\n      _proto.reset = function reset(plot) {\n        this.plot = plot;\n        var bl = plot.bl,\n            tr = plot.tr;\n        this.start = bl;\n        this.end = tr;\n        this.init(bl, tr);\n      };\n\n      return Base;\n    }();\n\n    var Cartesian = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Cartesian, _Base);\n\n      function Cartesian() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Cartesian.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'cartesian';\n        this.transposed = false;\n        this.isRect = true;\n      };\n\n      _proto.init = function init(start, end) {\n        _Base.prototype.init.call(this, start, end);\n\n        this.x = {\n          start: start.x,\n          end: end.x\n        };\n        this.y = {\n          start: start.y,\n          end: end.y\n        };\n      };\n\n      _proto._convertPoint = function _convertPoint(point) {\n        var self = this;\n        var transposed = self.transposed;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var x = self.x;\n        var y = self.y;\n        return {\n          x: x.start + (x.end - x.start) * point[xDim],\n          y: y.start + (y.end - y.start) * point[yDim]\n        };\n      };\n\n      _proto._invertPoint = function _invertPoint(point) {\n        var self = this;\n        var transposed = self.transposed;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var x = self.x;\n        var y = self.y;\n        var rst = {};\n        rst[xDim] = (point.x - x.start) / (x.end - x.start);\n        rst[yDim] = (point.y - y.start) / (y.end - y.start);\n        return rst;\n      };\n\n      return Cartesian;\n    }(Base$1);\n\n    Base$1.Cartesian = Cartesian;\n    Base$1.Rect = Cartesian;\n\n    /**\n     * @fileOverview the Attribute base class\n     */\n\n    function toScaleString(scale, value) {\n      if (isString(value)) {\n        return value;\n      }\n\n      return scale.invert(scale.scale(value));\n    }\n    /**\n     * 所有视觉通道属性的基类\n     * @class Attr\n     */\n\n\n    var AttributeBase = /*#__PURE__*/function () {\n      function AttributeBase(cfg) {\n        var _this = this;\n\n        /**\n         * 属性的类型\n         * @type {String}\n         */\n        this.type = 'base';\n        /**\n         * 属性的名称\n         * @type {String}\n         */\n\n        this.name = null;\n        /**\n         * 回调函数\n         * @type {Function}\n         */\n\n        this.method = null;\n        /**\n         * 备选的值数组\n         * @type {Array}\n         */\n\n        this.values = [];\n        /**\n         * 属性内部的度量\n         * @type {Array}\n         */\n\n        this.scales = [];\n        /**\n         * 是否通过线性取值, 如果未指定，则根据数值的类型判定\n         * @type {Boolean}\n         */\n\n        this.linear = null;\n        /**\n         * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n         */\n\n        var mixedCallback = null;\n        var defaultCallback = this.callback;\n\n        if (cfg.callback) {\n          var userCallback = cfg.callback;\n\n          mixedCallback = function mixedCallback() {\n            for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n              params[_key] = arguments[_key];\n            }\n\n            var ret = userCallback.apply(void 0, params);\n\n            if (isNil(ret)) {\n              ret = defaultCallback.apply(_this, params);\n            }\n\n            return ret;\n          };\n        }\n\n        mix(this, cfg);\n\n        if (mixedCallback) {\n          mix(this, {\n            callback: mixedCallback\n          });\n        }\n      } // 获取属性值，将值映射到视觉通道\n\n\n      var _proto = AttributeBase.prototype;\n\n      _proto._getAttrValue = function _getAttrValue(scale, value) {\n        var values = this.values;\n\n        if (scale.isCategory && !this.linear) {\n          var index = scale.translate(value);\n          return values[index % values.length];\n        }\n\n        var percent = scale.scale(value);\n        return this.getLinearValue(percent);\n      }\n      /**\n       * 如果进行线性映射，返回对应的映射值\n       * @protected\n       * @param  {Number} percent 百分比\n       * @return {*}  颜色值、形状、大小等\n       */\n      ;\n\n      _proto.getLinearValue = function getLinearValue(percent) {\n        var values = this.values;\n        var steps = values.length - 1;\n        var step = Math.floor(steps * percent);\n        var leftPercent = steps * percent - step;\n        var start = values[step];\n        var end = step === steps ? start : values[step + 1];\n        var rstValue = start + (end - start) * leftPercent;\n        return rstValue;\n      }\n      /**\n       * 默认的回调函数\n       * @param {*} value 回调函数的值\n       * @type {Function}\n       * @return {Array} 返回映射后的值\n       */\n      ;\n\n      _proto.callback = function callback(value) {\n        var self = this;\n        var scale = self.scales[0];\n        var rstValue = null;\n\n        if (scale.type === 'identity') {\n          rstValue = scale.value;\n        } else {\n          rstValue = self._getAttrValue(scale, value);\n        }\n\n        return rstValue;\n      }\n      /**\n       * 根据度量获取属性名\n       * @return {Array} dims of this Attribute\n       */\n      ;\n\n      _proto.getNames = function getNames() {\n        var scales = this.scales;\n        var names = this.names;\n        var length = Math.min(scales.length, names.length);\n        var rst = [];\n\n        for (var i = 0; i < length; i++) {\n          rst.push(names[i]);\n        }\n\n        return rst;\n      }\n      /**\n       * 根据度量获取维度名\n       * @return {Array} dims of this Attribute\n       */\n      ;\n\n      _proto.getFields = function getFields() {\n        var scales = this.scales;\n        var rst = [];\n        each(scales, function (scale) {\n          rst.push(scale.field);\n        });\n        return rst;\n      }\n      /**\n       * 根据名称获取度量\n       * @param  {String} name the name of scale\n       * @return {Scale} scale\n       */\n      ;\n\n      _proto.getScale = function getScale(name) {\n        var scales = this.scales;\n        var names = this.names;\n        var index = names.indexOf(name);\n        return scales[index];\n      }\n      /**\n       * 映射数据\n       * @param {*} param1...paramn 多个数值\n       * @return {Array} 映射的值组成的数组\n       */\n      ;\n\n      _proto.mapping = function mapping() {\n        var scales = this.scales;\n        var callback = this.callback;\n\n        for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          params[_key2] = arguments[_key2];\n        }\n\n        var values = params;\n\n        if (callback) {\n          for (var i = 0, len = params.length; i < len; i++) {\n            params[i] = this._toOriginParam(params[i], scales[i]);\n          }\n\n          values = callback.apply(this, params);\n        }\n\n        values = [].concat(values);\n        return values;\n      } // 原始的参数\n      ;\n\n      _proto._toOriginParam = function _toOriginParam(param, scale) {\n        var rst = param;\n\n        if (!scale.isLinear) {\n          if (isArray(param)) {\n            rst = [];\n\n            for (var i = 0, len = param.length; i < len; i++) {\n              rst.push(toScaleString(scale, param[i]));\n            }\n          } else {\n            rst = toScaleString(scale, param);\n          }\n        }\n\n        return rst;\n      };\n\n      return AttributeBase;\n    }();\n\n    var Position = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Position, _Base);\n\n      function Position(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['x', 'y'];\n        _this.type = 'position';\n        return _this;\n      }\n\n      var _proto = Position.prototype;\n\n      _proto.mapping = function mapping(x, y) {\n        var scales = this.scales;\n        var coord = this.coord;\n        var scaleX = scales[0];\n        var scaleY = scales[1];\n        var rstX;\n        var rstY;\n        var obj;\n\n        if (isNil(x) || isNil(y)) {\n          return [];\n        }\n\n        if (isArray(y) && isArray(x)) {\n          rstX = [];\n          rstY = [];\n\n          for (var i = 0, j = 0, xLen = x.length, yLen = y.length; i < xLen && j < yLen; i++, j++) {\n            obj = coord.convertPoint({\n              x: scaleX.scale(x[i]),\n              y: scaleY.scale(y[j])\n            });\n            rstX.push(obj.x);\n            rstY.push(obj.y);\n          }\n        } else if (isArray(y)) {\n          x = scaleX.scale(x);\n          rstY = [];\n          each(y, function (yVal) {\n            yVal = scaleY.scale(yVal);\n            obj = coord.convertPoint({\n              x: x,\n              y: yVal\n            });\n\n            if (rstX && rstX !== obj.x) {\n              if (!isArray(rstX)) {\n                rstX = [rstX];\n              }\n\n              rstX.push(obj.x);\n            } else {\n              rstX = obj.x;\n            }\n\n            rstY.push(obj.y);\n          });\n        } else if (isArray(x)) {\n          y = scaleY.scale(y);\n          rstX = [];\n          each(x, function (xVal) {\n            xVal = scaleX.scale(xVal);\n            obj = coord.convertPoint({\n              x: xVal,\n              y: y\n            });\n\n            if (rstY && rstY !== obj.y) {\n              if (!isArray(rstY)) {\n                rstY = [rstY];\n              }\n\n              rstY.push(obj.y);\n            } else {\n              rstY = obj.y;\n            }\n\n            rstX.push(obj.x);\n          });\n        } else {\n          x = scaleX.scale(x);\n          y = scaleY.scale(y);\n          var point = coord.convertPoint({\n            x: x,\n            y: y\n          });\n          rstX = point.x;\n          rstY = point.y;\n        }\n\n        return [rstX, rstY];\n      };\n\n      return Position;\n    }(AttributeBase);\n\n    var Shape = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Shape, _Base);\n\n      function Shape(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['shape'];\n        _this.type = 'shape';\n        _this.gradient = null;\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      var _proto = Shape.prototype;\n\n      _proto.getLinearValue = function getLinearValue(percent) {\n        var values = this.values;\n        var index = Math.round((values.length - 1) * percent);\n        return values[index];\n      };\n\n      return Shape;\n    }(AttributeBase);\n\n    var Size = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Size, _Base);\n\n      function Size(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['size'];\n        _this.type = 'size';\n        _this.gradient = null;\n        return _this;\n      }\n\n      return Size;\n    }(AttributeBase);\n\n    function getValue(start, end, percent, index) {\n      var value = start[index] + (end[index] - start[index]) * percent;\n      return value;\n    } // convert to hex\n\n\n    function arr2hex(arr) {\n      return '#' + toRGBValue(arr[0]) + toRGBValue(arr[1]) + toRGBValue(arr[2]);\n    }\n\n    function toRGBValue(value) {\n      value = Math.round(value);\n      value = value.toString(16);\n\n      if (value.length === 1) {\n        value = '0' + value;\n      }\n\n      return value;\n    }\n\n    function calColor(colors, percent) {\n      var steps = colors.length - 1;\n      var step = Math.floor(steps * percent);\n      var left = steps * percent - step;\n      var start = colors[step];\n      var end = step === steps ? start : colors[step + 1];\n      var rgb = arr2hex([getValue(start, end, left, 0), getValue(start, end, left, 1), getValue(start, end, left, 2)]);\n      return rgb;\n    }\n\n    function hex2arr(str) {\n      var arr = [];\n      arr.push(parseInt(str.substr(1, 2), 16));\n      arr.push(parseInt(str.substr(3, 2), 16));\n      arr.push(parseInt(str.substr(5, 2), 16));\n      return arr;\n    }\n\n    var colorCache = {\n      black: '#000000',\n      blue: '#0000ff',\n      grey: '#808080',\n      green: '#008000',\n      orange: '#ffa500',\n      pink: '#ffc0cb',\n      purple: '#800080',\n      red: '#ff0000',\n      white: '#ffffff',\n      yellow: '#ffff00'\n    };\n    /**\n     * Returns a hexadecimal string representing this color in RGB space, such as #f7eaba.\n     * @param  {String} color color value\n     * @return {String} Returns a hexadecimal string\n     */\n\n    function toHex(color) {\n      if (colorCache[color]) {\n        return colorCache[color];\n      }\n\n      if (color[0] === '#') {\n        if (color.length === 7) {\n          return color;\n        }\n\n        var hex = color.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, function (m, r, g, b) {\n          return '#' + r + r + g + g + b + b;\n        }); // hex3 to hex6\n\n        colorCache[color] = hex;\n        return hex;\n      } // rgb/rgba to hex\n\n\n      var rst = color.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n      rst.shift();\n      rst = arr2hex(rst);\n      colorCache[color] = rst;\n      return rst;\n    }\n    /**\n     * handle the gradient color\n     * @param  {Array} colors the colors\n     * @return {String} return the color value\n     */\n\n\n    function gradient(colors) {\n      var points = [];\n\n      if (isString(colors)) {\n        colors = colors.split('-');\n      }\n\n      each(colors, function (color) {\n        if (color.indexOf('#') === -1) {\n          color = toHex(color);\n        }\n\n        points.push(hex2arr(color));\n      });\n      return function (percent) {\n        return calColor(points, percent);\n      };\n    }\n\n    var Color = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Color, _Base);\n\n      function Color(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['color'];\n        _this.type = 'color';\n        _this.gradient = null;\n\n        if (isString(_this.values)) {\n          _this.linear = true;\n        }\n\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      var _proto = Color.prototype;\n\n      _proto.getLinearValue = function getLinearValue(percent) {\n        var gradient$1 = this.gradient;\n\n        if (!gradient$1) {\n          var values = this.values;\n          gradient$1 = gradient(values);\n          this.gradient = gradient$1;\n        }\n\n        return gradient$1(percent);\n      };\n\n      return Color;\n    }(AttributeBase);\n\n    var Attr = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Position: Position,\n        Shape: Shape,\n        Size: Size,\n        Color: Color\n    });\n\n    var Shape$1 = {};\n    var ShapeBase = {\n      _coord: null,\n\n      /**\n       * draw the shape\n       * @param {Object} cfg options\n       * @param {Object} container container to store the shapes\n       */\n      draw: function draw(cfg, container) {\n        if (this.drawShape) {\n          this.drawShape(cfg, container);\n        }\n      },\n\n      /**\n       * set the coordinate instance\n       * @param {Coord} coord coordinate instance\n       */\n      setCoord: function setCoord(coord) {\n        this._coord = coord;\n      },\n\n      /**\n       * convert the normalized value to the canvas position\n       * @param  {point} point the point to convert\n       * @return {point} point return the result\n       */\n      parsePoint: function parsePoint(point) {\n        var coord = this._coord;\n\n        if (coord.isPolar) {\n          if (point.x === 1) point.x = 0.9999999;\n          if (point.y === 1) point.y = 0.9999999;\n        }\n\n        return coord.convertPoint(point);\n      },\n\n      /**\n       * convert the normalized value to the canvas position\n       * @param  {points} points the array that store the points\n       * @return {points} points return the result\n       */\n      parsePoints: function parsePoints(points) {\n        if (!points) return false;\n        var self = this;\n        var rst = [];\n        points.forEach(function (point) {\n          rst.push(self.parsePoint(point));\n        });\n        return rst;\n      }\n    };\n    var ShapeFactoryBase = {\n      defaultShapeType: null,\n      setCoord: function setCoord(coord) {\n        this._coord = coord;\n      },\n      getShape: function getShape(type) {\n        var self = this;\n\n        if (isArray(type)) {\n          type = type[0];\n        }\n\n        var shape = self[type] || self[self.defaultShapeType];\n        shape._coord = self._coord;\n        return shape;\n      },\n      getShapePoints: function getShapePoints(type, cfg) {\n        var shape = this.getShape(type);\n        var fn = shape.getPoints || shape.getShapePoints || this.getDefaultPoints;\n        var points = fn(cfg);\n        return points;\n      },\n      getDefaultPoints: function getDefaultPoints()\n      /* cfg */\n      {\n        return [];\n      },\n      drawShape: function drawShape(type, cfg, container) {\n        var shape = this.getShape(type);\n\n        if (!cfg.color) {\n          cfg.color = Global.colors[0];\n        }\n\n        return shape.draw(cfg, container);\n      }\n    };\n\n    Shape$1.registerFactory = function (factoryName, cfg) {\n      var className = upperFirst(factoryName);\n      var geomObj = mix({}, ShapeFactoryBase, cfg);\n      Shape$1[className] = geomObj;\n      geomObj.name = factoryName;\n      return geomObj;\n    };\n\n    Shape$1.registerShape = function (factoryName, shapeType, cfg) {\n      var className = upperFirst(factoryName);\n      var factory = Shape$1[className];\n      var shapeObj = mix({}, ShapeBase, cfg);\n      factory[shapeType] = shapeObj;\n      return shapeObj;\n    };\n\n    Shape$1.registShape = Shape$1.registerShape;\n\n    Shape$1.getShapeFactory = function (factoryName) {\n      var self = this;\n      factoryName = factoryName || 'point';\n      var className = upperFirst(factoryName);\n      return self[className];\n    };\n\n    function _mix$1(dist, obj) {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\n          dist[key] = obj[key];\n        }\n      }\n    }\n\n    var mix$1 = function mix(dist, src1, src2, src3) {\n      if (src1) _mix$1(dist, src1);\n      if (src2) _mix$1(dist, src2);\n      if (src3) _mix$1(dist, src3);\n      return dist;\n    };\n\n    var mix_1 = mix$1;\n\n    var Adjust = /*#__PURE__*/function () {\n      var _proto = Adjust.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.adjustNames = ['x', 'y']; // 调整的维度，默认,x,y都做调整\n      };\n\n      function Adjust(cfg) {\n        this._initDefaultCfg();\n\n        mix_1(this, cfg);\n      }\n      /**\n       * @override\n       */\n\n\n      _proto.processAdjust = function processAdjust()\n      /* dataArray */\n      {};\n\n      return Adjust;\n    }();\n\n    var base = Adjust;\n\n    function generateScaleAria(scale) {\n      var type = scale.type,\n          values = scale.values;\n\n      if (type === 'linear') {\n        return substitute(lang.scale.linear, scale);\n      }\n\n      if (type === 'cat') {\n        return substitute(lang.scale.cat, {\n          values: values.slice(0, 10).join(' ')\n        });\n      }\n\n      if (type === 'timeCat') {\n        var start = scale.getText(values[0]);\n        var end = scale.getText(values[values.length - 1]);\n        return substitute(lang.scale.timeCat, {\n          start: start,\n          end: end\n        });\n      }\n\n      return '';\n    }\n    function generateCoordAria(coord, xScale, yScale) {\n      var type = coord.type;\n\n      if (!lang.coord[type]) {\n        return '';\n      }\n\n      return substitute(lang.coord[type], {\n        xLabel: generateScaleAria(xScale),\n        yLabel: generateScaleAria(yScale)\n      });\n    }\n\n    var GROUP_ATTRS = ['color', 'size', 'shape'];\n    var FIELD_ORIGIN = '_origin';\n    var FIELD_ORIGIN_Y = '_originY';\n\n    function parseFields(field) {\n      if (isArray(field)) {\n        return field;\n      }\n\n      if (isString(field)) {\n        return field.split('*');\n      }\n\n      return [field];\n    }\n    /**\n     * The parent class for Geometry\n     * @class Geom\n     */\n\n\n    var Geom = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Geom, _Base);\n\n      function Geom() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Geom.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          /**\n           * geometry type\n           * @type {String}\n           */\n          type: null,\n\n          /**\n           * the data of geometry\n           * @type {Array}\n           */\n          data: null,\n\n          /**\n           * the attrs of geo,etry\n           * @type {Object}\n           */\n          attrs: {},\n          scales: {},\n\n          /**\n           * group for storing the shapes\n           * @type {Canvas}\n           */\n          container: null,\n\n          /**\n           * style options\n           * @type {Object}\n           */\n          styleOptions: null,\n          chart: null,\n          shapeType: '',\n\n          /**\n           * wether to generate key points for each shape\n           * @protected\n           * @type {Boolean}\n           */\n          generatePoints: false,\n          attrOptions: {},\n          sortable: false,\n          startOnZero: true,\n          visible: true,\n          connectNulls: false,\n          // 是否丢弃没有值的分组。\n          ignoreEmptyGroup: false,\n          // 是否已经初始化\n          isInit: false\n        };\n      };\n\n      _proto.init = function init() {\n        var self = this;\n        var isInit = self.get('isInit');\n\n        if (isInit) {\n          return;\n        }\n\n        self._initAttrs();\n\n        self._processData();\n\n        self.set('isInit', true);\n      };\n\n      _proto._getGroupScales = function _getGroupScales() {\n        var self = this;\n        var scales = [];\n        each(GROUP_ATTRS, function (attrName) {\n          var attr = self.getAttr(attrName);\n\n          if (attr) {\n            var attrScales = attr.scales;\n            each(attrScales, function (scale) {\n              if (scale && scale.isCategory && scales.indexOf(scale) === -1) {\n                scales.push(scale);\n              }\n            });\n          }\n        });\n        return scales;\n      };\n\n      _proto._groupData = function _groupData(data) {\n        var self = this;\n        var colDefs = self.get('colDefs');\n\n        var groupScales = self._getGroupScales();\n\n        if (groupScales.length) {\n          var appendConditions = {};\n          var names = [];\n          each(groupScales, function (scale) {\n            var field = scale.field;\n            names.push(field);\n\n            if (colDefs && colDefs[field] && colDefs[field].values) {\n              // users have defined\n              appendConditions[scale.field] = colDefs[field].values;\n            }\n          });\n          return group(data, names, appendConditions);\n        }\n\n        return [data];\n      };\n\n      _proto._setAttrOptions = function _setAttrOptions(attrName, attrCfg) {\n        var options = this.get('attrOptions');\n        options[attrName] = attrCfg;\n        var attrs = this.get('attrs'); // 说明已经初始化过了\n\n        if (Object.keys(attrs).length) {\n          this._createAttr(attrName, attrCfg);\n        }\n      };\n\n      _proto._createAttrOption = function _createAttrOption(attrName, field, cfg, defaultValues) {\n        var attrCfg = {};\n        attrCfg.field = field;\n\n        if (cfg) {\n          if (isFunction(cfg)) {\n            attrCfg.callback = cfg;\n          } else {\n            attrCfg.values = cfg;\n          }\n        } else {\n          attrCfg.values = defaultValues;\n        }\n\n        this._setAttrOptions(attrName, attrCfg);\n      };\n\n      _proto._createAttr = function _createAttr(type, option) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var coord = self.get('coord');\n        var className = upperFirst(type);\n        var fields = parseFields(option.field);\n\n        if (type === 'position') {\n          option.coord = coord;\n        }\n\n        var scales = [];\n\n        for (var i = 0, len = fields.length; i < len; i++) {\n          var field = fields[i];\n\n          var scale = self._createScale(field);\n\n          scales.push(scale);\n        }\n\n        if (type === 'position') {\n          var yScale = scales[1]; // 饼图的处理，但是还不知道为啥\n\n          if (coord.type === 'polar' && coord.transposed && self.hasAdjust('stack')) {\n            if (yScale.values.length) {\n              yScale.change({\n                nice: false,\n                min: 0,\n                max: Math.max.apply(null, yScale.values)\n              });\n            }\n          }\n        }\n\n        option.scales = scales;\n        var attr = new Attr[className](option);\n        attrs[type] = attr;\n        return attr;\n      };\n\n      _proto._initAttrs = function _initAttrs() {\n        var self = this;\n        var attrOptions = self.get('attrOptions');\n\n        for (var type in attrOptions) {\n          if (attrOptions.hasOwnProperty(type)) {\n            this._createAttr(type, attrOptions[type]);\n          }\n        }\n      };\n\n      _proto._createScale = function _createScale(field) {\n        var scales = this.get('scales');\n        var scale = scales[field];\n\n        if (!scale) {\n          scale = this.get('chart').createScale(field);\n          scales[field] = scale;\n        }\n\n        return scale;\n      };\n\n      _proto._processData = function _processData() {\n        var self = this;\n        var data = this.get('data');\n        var dataArray = [];\n\n        var groupedArray = this._groupData(data);\n\n        if (this.get('ignoreEmptyGroup')) {\n          var yScale = this.getYScale();\n          groupedArray = groupedArray.filter(function (group) {\n            return group.some(function (item) {\n              return typeof item[yScale.field] !== 'undefined';\n            });\n          });\n        }\n\n        for (var i = 0, len = groupedArray.length; i < len; i++) {\n          var subData = groupedArray[i];\n\n          var tempData = self._saveOrigin(subData);\n\n          if (this.hasAdjust('dodge')) {\n            self._numberic(tempData);\n          }\n\n          dataArray.push(tempData);\n        }\n\n        if (self.get('adjust')) {\n          self._adjustData(dataArray);\n        }\n\n        if (self.get('sortable')) {\n          self._sort(dataArray);\n        }\n\n        self.emit('afterprocessdata', {\n          dataArray: dataArray\n        });\n        self.set('mappingData', dataArray);\n        self.set('dataArray', dataArray);\n        return dataArray;\n      };\n\n      _proto._saveOrigin = function _saveOrigin(data) {\n        var rst = [];\n\n        for (var i = 0, len = data.length; i < len; i++) {\n          var origin = data[i];\n          var obj = {};\n\n          for (var k in origin) {\n            obj[k] = origin[k];\n          }\n\n          obj[FIELD_ORIGIN] = origin;\n          rst.push(obj);\n        }\n\n        return rst;\n      };\n\n      _proto._numberic = function _numberic(data) {\n        var positionAttr = this.getAttr('position');\n        var scales = positionAttr.scales;\n\n        for (var j = 0, len = data.length; j < len; j++) {\n          var obj = data[j];\n          var count = Math.min(2, scales.length);\n\n          for (var i = 0; i < count; i++) {\n            var scale = scales[i];\n\n            if (scale.isCategory) {\n              var field = scale.field;\n              obj[field] = scale.translate(obj[field]);\n            }\n          }\n        }\n      };\n\n      _proto._adjustData = function _adjustData(dataArray) {\n        var self = this;\n        var adjust = self.get('adjust');\n\n        if (adjust) {\n          var adjustType = upperFirst(adjust.type);\n\n          if (!base[adjustType]) {\n            throw new Error('not support such adjust : ' + adjust);\n          }\n\n          var xScale = self.getXScale();\n          var yScale = self.getYScale();\n          var cfg = mix({\n            xField: xScale.field,\n            yField: yScale.field\n          }, adjust);\n          var adjustObject = new base[adjustType](cfg);\n          adjustObject.processAdjust(dataArray);\n\n          if (adjustType === 'Stack') {\n            self._updateStackRange(yScale.field, yScale, dataArray);\n          }\n        }\n      };\n\n      _proto._updateStackRange = function _updateStackRange(field, scale, dataArray) {\n        var mergeArray = merge(dataArray);\n        var min = scale.min;\n        var max = scale.max;\n\n        for (var i = 0, len = mergeArray.length; i < len; i++) {\n          var obj = mergeArray[i];\n          var tmpMin = Math.min.apply(null, obj[field]);\n          var tmpMax = Math.max.apply(null, obj[field]);\n\n          if (tmpMin < min) {\n            min = tmpMin;\n          }\n\n          if (tmpMax > max) {\n            max = tmpMax;\n          }\n        }\n\n        if (min < scale.min || max > scale.max) {\n          scale.change({\n            min: min,\n            max: max\n          });\n        }\n      };\n\n      _proto._sort = function _sort(mappedArray) {\n        var self = this;\n        var xScale = self.getXScale();\n        var field = xScale.field,\n            type = xScale.type;\n\n        if (type !== 'identity' && xScale.values.length > 1) {\n          each(mappedArray, function (itemArr) {\n            itemArr.sort(function (obj1, obj2) {\n              if (type === 'timeCat') {\n                return toTimeStamp(obj1[FIELD_ORIGIN][field]) - toTimeStamp(obj2[FIELD_ORIGIN][field]);\n              }\n\n              return xScale.translate(obj1[FIELD_ORIGIN][field]) - xScale.translate(obj2[FIELD_ORIGIN][field]);\n            });\n          });\n        }\n\n        self.set('hasSorted', true);\n        self.set('dataArray', mappedArray);\n      };\n\n      _proto.paint = function paint() {\n        var self = this;\n        var dataArray = self.get('mappingData');\n        var mappedArray = [];\n        var shapeFactory = self.getShapeFactory();\n        shapeFactory.setCoord(self.get('coord'));\n\n        self._beforeMapping(dataArray);\n\n        for (var i = 0, len = dataArray.length; i < len; i++) {\n          var data = dataArray[i];\n\n          if (data.length) {\n            var mappedData = self._mapping(data);\n\n            mappedArray.push(mappedData);\n            self.draw(mappedData, shapeFactory);\n          }\n        }\n\n        self.set('dataArray', mappedArray);\n        this.generateAria();\n      };\n\n      _proto.getShapeFactory = function getShapeFactory() {\n        var shapeFactory = this.get('shapeFactory');\n\n        if (!shapeFactory) {\n          var shapeType = this.get('shapeType');\n          shapeFactory = Shape$1.getShapeFactory(shapeType);\n          this.set('shapeFactory', shapeFactory);\n        }\n\n        return shapeFactory;\n      };\n\n      _proto._mapping = function _mapping(data) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var yField = self.getYScale().field; // 用来缓存转换的值，减少mapping耗时\n\n        var mappedCache = {};\n        var mappedData = new Array(data.length);\n\n        for (var k in attrs) {\n          if (attrs.hasOwnProperty(k)) {\n            var attr = attrs[k];\n            var names = attr.names;\n            var scales = attr.scales;\n\n            for (var i = 0, len = data.length; i < len; i++) {\n              var record = data[i];\n\n              var mappedRecord = _extends({}, record, mappedData[i]);\n\n              mappedRecord[FIELD_ORIGIN_Y] = record[yField]; // 获取视觉属性对应的value值\n              // 位置的缓存命中率低，还是每次单独计算\n\n              if (attr.type === 'position') {\n                var values = self._getAttrValues(attr, record);\n\n                for (var j = 0, _len = values.length; j < _len; j++) {\n                  var val = values[j];\n                  var name = names[j];\n                  mappedRecord[name] = isArray(val) && val.length === 1 ? val[0] : val;\n                }\n              } else {\n                // 除了position其他都只有一项\n                var _name = names[0];\n                var field = scales[0].field;\n                var value = record[field];\n                var key = \"\" + _name + value;\n                var _values = mappedCache[key];\n\n                if (!_values) {\n                  _values = self._getAttrValues(attr, record);\n                  mappedCache[key] = _values;\n                }\n\n                mappedRecord[_name] = _values[0];\n              } // 设置新数组\n\n\n              mappedData[i] = mappedRecord;\n            }\n          }\n        }\n\n        return mappedData;\n      };\n\n      _proto._getAttrValues = function _getAttrValues(attr, record) {\n        var scales = attr.scales;\n        var params = [];\n\n        for (var i = 0, len = scales.length; i < len; i++) {\n          var scale = scales[i];\n          var field = scale.field;\n\n          if (scale.type === 'identity') {\n            params.push(scale.value);\n          } else {\n            params.push(record[field]);\n          }\n        }\n\n        var values = attr.mapping.apply(attr, params);\n        return values;\n      };\n\n      _proto.getAttrValue = function getAttrValue(attrName, record) {\n        var attr = this.getAttr(attrName);\n        var rst = null;\n\n        if (attr) {\n          var values = this._getAttrValues(attr, record);\n\n          rst = values[0];\n        }\n\n        return rst;\n      };\n\n      _proto._beforeMapping = function _beforeMapping(dataArray) {\n        var self = this;\n\n        if (self.get('generatePoints')) {\n          self._generatePoints(dataArray);\n        }\n      };\n\n      _proto.isInCircle = function isInCircle() {\n        var coord = this.get('coord');\n        return coord && coord.isPolar;\n      };\n\n      _proto.getCallbackCfg = function getCallbackCfg(fields, cfg, origin) {\n        if (!fields) {\n          return cfg;\n        }\n\n        var tmpCfg = {};\n        var params = fields.map(function (field) {\n          return origin[field];\n        });\n        each(cfg, function (v, k) {\n          if (isFunction(v)) {\n            tmpCfg[k] = v.apply(null, params);\n          } else {\n            tmpCfg[k] = v;\n          }\n        });\n        return tmpCfg;\n      };\n\n      _proto.getDrawCfg = function getDrawCfg(obj) {\n        var self = this;\n        var isInCircle = self.isInCircle();\n        var cfg = {\n          origin: obj,\n          x: obj.x,\n          y: obj.y,\n          color: obj.color,\n          size: obj.size,\n          shape: obj.shape,\n          isInCircle: isInCircle,\n          opacity: obj.opacity\n        };\n        var styleOptions = self.get('styleOptions');\n\n        if (styleOptions && styleOptions.style) {\n          cfg.style = self.getCallbackCfg(styleOptions.fields, styleOptions.style, obj[FIELD_ORIGIN]);\n        }\n\n        if (self.get('generatePoints')) {\n          cfg.points = obj.points;\n          cfg.nextPoints = obj.nextPoints;\n        }\n\n        if (isInCircle) {\n          cfg.center = self.get('coord').center;\n        }\n\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        var yScale = self.getYScale();\n        each(data, function (obj, index) {\n          if (yScale && isNil(obj._origin[yScale.field])) {\n            return;\n          }\n\n          obj.index = index;\n          var cfg = self.getDrawCfg(obj);\n          var shape = obj.shape;\n          self.drawShape(shape, obj, cfg, container, shapeFactory);\n        });\n      };\n\n      _proto.drawShape = function drawShape(shape, shapeData, cfg, container, shapeFactory) {\n        var gShape = shapeFactory.drawShape(shape, cfg, container);\n\n        if (gShape) {\n          each([].concat(gShape), function (s) {\n            s.set('origin', shapeData);\n          });\n        }\n      };\n\n      _proto._generatePoints = function _generatePoints(dataArray) {\n        var self = this;\n        var shapeFactory = self.getShapeFactory();\n        var shapeAttr = self.getAttr('shape');\n        each(dataArray, function (data) {\n          for (var i = 0, len = data.length; i < len; i++) {\n            var obj = data[i];\n            var cfg = self.createShapePointsCfg(obj);\n            var shape = shapeAttr ? self._getAttrValues(shapeAttr, obj) : null;\n            var points = shapeFactory.getShapePoints(shape, cfg);\n            obj.points = points;\n          }\n        }); // 添加nextPoints\n\n        each(dataArray, function (data, index) {\n          var nextData = dataArray[index + 1];\n\n          if (nextData) {\n            data[0].nextPoints = nextData[0].points;\n          }\n        });\n      } // 生成无障碍文本\n      ;\n\n      _proto.generateAria = function generateAria() {\n        var container = this.get('container');\n        var aria = container.get('aria');\n\n        if (!aria) {\n          return;\n        }\n\n        var ariaLables = [];\n        var coord = this.get('coord');\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n        var coordAriaLabel = generateCoordAria(coord, xScale, yScale);\n        ariaLables.push(coordAriaLabel);\n        var _lang$geometry = lang.geometry,\n            prefix = _lang$geometry.prefix,\n            oneData = _lang$geometry.oneData,\n            partData = _lang$geometry.partData,\n            allData = _lang$geometry.allData;\n        var dataArray = this.get('dataArray');\n        var count = dataArray.length; // 只处理一个，不然太复杂\n\n        var groupScale = this._getGroupScales()[0];\n\n        if (groupScale) {\n          var prefixLabel = substitute(prefix, {\n            count: count\n          });\n          ariaLables.push(prefixLabel);\n          each(dataArray, function (data, index) {\n            var len = data.length;\n            if (!len) return;\n            var firstObj = data[0]._origin;\n\n            if (len === 1) {\n              ariaLables.push(substitute(oneData, {\n                index: index + 1,\n                count: len,\n                name: firstObj[groupScale.field],\n                values: firstObj[yScale.field]\n              }));\n            } else {\n              var template = len > 5 ? partData : allData;\n              var values = data.slice(0, 5).map(function (record) {\n                var _origin = record._origin;\n                var xValue = xScale.getText(_origin[xScale.field]);\n                var yValue = yScale.getText(_origin[yScale.field]);\n                return xValue + \":\" + yValue;\n              });\n              ariaLables.push(substitute(template, {\n                index: index + 1,\n                count: len,\n                part: 3,\n                name: firstObj[groupScale.field],\n                values: values.join(' ')\n              }));\n            }\n          });\n        }\n\n        container.set('ariaLabel', ariaLables.join(''));\n      }\n      /**\n       * get the info of each shape\n       * @protected\n       * @param  {Object} obj the data item\n       * @return {Object} cfg return the result\n       */\n      ;\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n\n        var x = this._normalizeValues(obj[xScale.field], xScale);\n\n        var y;\n\n        if (yScale) {\n          y = this._normalizeValues(obj[yScale.field], yScale);\n        } else {\n          y = obj.y ? obj.y : 0.1;\n        }\n\n        return {\n          x: x,\n          y: y,\n          y0: yScale ? yScale.scale(this.getYMinValue()) : undefined\n        };\n      };\n\n      _proto.getYMinValue = function getYMinValue() {\n        var yScale = this.getYScale();\n        var min = yScale.min,\n            max = yScale.max;\n        var value;\n\n        if (this.get('startOnZero')) {\n          if (max <= 0 && min <= 0) {\n            value = max;\n          } else {\n            value = min >= 0 ? min : 0;\n          }\n        } else {\n          value = min;\n        }\n\n        return value;\n      };\n\n      _proto._normalizeValues = function _normalizeValues(values, scale) {\n        var rst = [];\n\n        if (isArray(values)) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            var v = values[i];\n            rst.push(scale.scale(v));\n          }\n        } else {\n          rst = scale.scale(values);\n        }\n\n        return rst;\n      };\n\n      _proto.getAttr = function getAttr(name) {\n        return this.get('attrs')[name];\n      };\n\n      _proto.getXScale = function getXScale() {\n        return this.getAttr('position').scales[0];\n      };\n\n      _proto.getYScale = function getYScale() {\n        return this.getAttr('position').scales[1];\n      };\n\n      _proto.hasAdjust = function hasAdjust(adjust) {\n        return this.get('adjust') && this.get('adjust').type === adjust;\n      };\n\n      _proto._getSnap = function _getSnap(scale, item, arr) {\n        var i = 0;\n        var values;\n        var yField = this.getYScale().field; // 叠加的维度\n\n        if (this.hasAdjust('stack') && scale.field === yField) {\n          values = [];\n          arr.forEach(function (obj) {\n            values.push(obj[FIELD_ORIGIN_Y]);\n          });\n\n          for (var len = values.length; i < len; i++) {\n            if (values[0][0] > item) {\n              break;\n            }\n\n            if (values[values.length - 1][1] <= item) {\n              i = values.length - 1;\n              break;\n            }\n\n            if (values[i][0] <= item && values[i][1] > item) {\n              break;\n            }\n          }\n        } else {\n          values = scale.values;\n          values.sort(function (a, b) {\n            return a - b;\n          });\n\n          for (var _len2 = values.length; i < _len2; i++) {\n            // 如果只有1个点直接返回第1个点\n            if (_len2 <= 1) {\n              break;\n            } // 第1个点和第2个点之间\n\n\n            if ((values[0] + values[1]) / 2 > item) {\n              break;\n            } // 中间的点\n\n\n            if ((values[i - 1] + values[i]) / 2 <= item && (values[i + 1] + values[i]) / 2 > item) {\n              break;\n            } // 最后2个点\n\n\n            if ((values[values.length - 2] + values[values.length - 1]) / 2 <= item) {\n              i = values.length - 1;\n              break;\n            }\n          }\n        }\n\n        var result = values[i];\n        return result;\n      };\n\n      _proto.getSnapRecords = function getSnapRecords(point) {\n        var self = this;\n        var coord = self.get('coord');\n        var xScale = self.getXScale();\n        var yScale = self.getYScale();\n        var xfield = xScale.field;\n        var dataArray = self.get('dataArray');\n\n        if (!this.get('hasSorted')) {\n          this._sort(dataArray);\n        }\n\n        var rst = [];\n        var invertPoint = coord.invertPoint(point);\n        var invertPointX = invertPoint.x;\n\n        if (self.isInCircle() && !coord.transposed && invertPointX > (1 + xScale.rangeMax()) / 2) {\n          invertPointX = xScale.rangeMin();\n        }\n\n        var xValue = xScale.invert(invertPointX);\n\n        if (!xScale.isCategory) {\n          xValue = self._getSnap(xScale, xValue);\n        }\n\n        var tmp = [];\n        dataArray.forEach(function (data) {\n          data.forEach(function (obj) {\n            var originValue = isNil(obj[FIELD_ORIGIN]) ? obj[xfield] : obj[FIELD_ORIGIN][xfield];\n\n            if (self._isEqual(originValue, xValue, xScale)) {\n              tmp.push(obj);\n            }\n          });\n        }); // special for pie chart\n\n        if (this.hasAdjust('stack') && coord.isPolar && coord.transposed) {\n          if (invertPointX >= 0 && invertPointX <= 1) {\n            var yValue = yScale.invert(invertPoint.y);\n            yValue = self._getSnap(yScale, yValue, tmp);\n            tmp.forEach(function (obj) {\n              if (isArray(yValue) ? obj[FIELD_ORIGIN_Y].toString() === yValue.toString() : obj[FIELD_ORIGIN_Y] === yValue) {\n                rst.push(obj);\n              }\n            });\n          }\n        } else {\n          rst = tmp;\n        }\n\n        return rst;\n      };\n\n      _proto.getRecords = function getRecords(value) {\n        var _this = this;\n\n        var xScale = this.getXScale();\n        var dataArray = this.get('dataArray');\n        var xfield = xScale.field;\n        return dataArray.map(function (data) {\n          for (var len = data.length, i = len - 1; i >= 0; i--) {\n            var obj = data[i];\n            var originValue = isNil(obj[FIELD_ORIGIN]) ? obj[xfield] : obj[FIELD_ORIGIN][xfield];\n\n            if (_this._isEqual(originValue, value, xScale)) {\n              return obj;\n            }\n          }\n\n          return null;\n        });\n      };\n\n      _proto._isEqual = function _isEqual(originValue, value, scale) {\n        if (scale.type === 'timeCat') {\n          return toTimeStamp(originValue) === value;\n        }\n\n        return value === originValue;\n      };\n\n      _proto.position = function position(field) {\n        this._setAttrOptions('position', {\n          field: field\n        });\n\n        return this;\n      };\n\n      _proto.color = function color(field, values) {\n        this._createAttrOption('color', field, values, Global.colors);\n\n        return this;\n      };\n\n      _proto.size = function size(field, values) {\n        this._createAttrOption('size', field, values, Global.sizes);\n\n        return this;\n      };\n\n      _proto.shape = function shape(field, values) {\n        var type = this.get('type');\n        var shapes = Global.shapes[type] || [];\n\n        this._createAttrOption('shape', field, values, shapes);\n\n        return this;\n      };\n\n      _proto.style = function style(field, cfg) {\n        var styleOptions = this.get('styleOptions');\n\n        if (!styleOptions) {\n          styleOptions = {};\n          this.set('styleOptions', styleOptions);\n        }\n\n        if (isObject(field)) {\n          cfg = field;\n          field = null;\n        }\n\n        var fields;\n\n        if (field) {\n          fields = parseFields(field);\n        }\n\n        styleOptions.fields = fields;\n        styleOptions.style = cfg;\n        return this;\n      };\n\n      _proto.adjust = function adjust(type) {\n        if (isString(type)) {\n          type = {\n            type: type\n          };\n        }\n\n        this.set('adjust', type);\n        return this;\n      };\n\n      _proto.animate = function animate(cfg) {\n        this.set('animateCfg', cfg);\n        return this;\n      };\n\n      _proto.changeData = function changeData(data) {\n        this.set('data', data); // 改变数据后，情况度量，因为需要重新实例化\n\n        this.set('scales', {});\n        if (!this.get('isInit')) return;\n        this.set('isInit', false);\n        this.init();\n      };\n\n      _proto.clearInner = function clearInner() {\n        var container = this.get('container');\n\n        if (container) {\n          container.clear(); // container.setMatrix([ 1, 0, 0, 1, 0, 0 ]);\n        }\n      };\n\n      _proto.reset = function reset() {\n        this.set('isInit', false);\n        this.set('attrs', {});\n        this.set('attrOptions', {});\n        this.set('adjust', null);\n        this.clearInner();\n      };\n\n      _proto.clear = function clear() {\n        this.clearInner();\n      };\n\n      _proto.destroy = function destroy() {\n        this.set('isInit', false);\n        this.clear();\n\n        _Base.prototype.destroy.call(this);\n      };\n\n      _proto._display = function _display(visible) {\n        this.set('visible', visible);\n        var container = this.get('container');\n        var canvas = container.get('canvas');\n        container.set('visible', visible);\n        canvas.draw();\n      };\n\n      _proto.show = function show() {\n        this._display(true);\n      };\n\n      _proto.hide = function hide() {\n        this._display(false);\n      };\n\n      return Geom;\n    }(Base);\n\n    var methodCache = {};\n    /**\n     * 获取计算 ticks 的方法\n     * @param key 键值\n     * @returns 计算 ticks 的方法\n     */\n\n    function getTickMethod(key) {\n      return methodCache[key];\n    }\n    /**\n     * 注册计算 ticks 的方法\n     * @param key 键值\n     * @param method 方法\n     */\n\n    function registerTickMethod(key, method) {\n      methodCache[key] = method;\n    }\n\n    var Scale =\n    /** @class */\n    function () {\n      function Scale(cfg) {\n        /**\n         * 度量的类型\n         */\n        this.type = 'base';\n        /**\n         * 是否分类类型的度量\n         */\n\n        this.isCategory = false;\n        /**\n         * 是否线性度量，有linear, time 度量\n         */\n\n        this.isLinear = false;\n        /**\n         * 是否连续类型的度量，linear,time,log, pow, quantile, quantize 都支持\n         */\n\n        this.isContinuous = false;\n        /**\n         * 是否是常量的度量，传入和传出一致\n         */\n\n        this.isIdentity = false;\n        this.values = [];\n        this.range = [0, 1];\n        this.ticks = [];\n        this.__cfg__ = cfg;\n        this.initCfg();\n        this.init();\n      } // 对于原始值的必要转换，如分类、时间字段需转换成数值，用transform/map命名可能更好\n\n\n      Scale.prototype.translate = function (v) {\n        return v;\n      };\n      /** 重新初始化 */\n\n\n      Scale.prototype.change = function (cfg) {\n        // 覆盖配置项，而不替代\n        mix(this.__cfg__, cfg);\n        this.init();\n      };\n\n      Scale.prototype.clone = function () {\n        return this.constructor(this.__cfg__);\n      };\n      /** 获取坐标轴需要的ticks */\n\n\n      Scale.prototype.getTicks = function () {\n        var _this = this;\n\n        return map(this.ticks, function (tick, idx) {\n          if (isObject(tick)) {\n            // 仅当符合Tick类型时才有意义\n            return tick;\n          }\n\n          return {\n            text: _this.getText(tick, idx),\n            tickValue: tick,\n            value: _this.scale(tick)\n          };\n        });\n      };\n      /** 获取Tick的格式化结果 */\n\n\n      Scale.prototype.getText = function (value, key) {\n        var formatter = this.formatter;\n        var res = formatter ? formatter(value, key) : value;\n\n        if (isNil(res) || !isFunction(res.toString)) {\n          return '';\n        }\n\n        return res.toString();\n      }; // 获取配置项中的值，当前 scale 上的值可能会被修改\n\n\n      Scale.prototype.getConfig = function (key) {\n        return this.__cfg__[key];\n      }; // scale初始化\n\n\n      Scale.prototype.init = function () {\n        mix(this, this.__cfg__);\n        this.setDomain();\n\n        if (isEmpty(this.getConfig('ticks'))) {\n          this.ticks = this.calculateTicks();\n        }\n      }; // 子类上覆盖某些属性，不能直接在类上声明，否则会被覆盖\n\n\n      Scale.prototype.initCfg = function () {};\n\n      Scale.prototype.setDomain = function () {};\n\n      Scale.prototype.calculateTicks = function () {\n        var tickMethod = this.tickMethod;\n        var ticks = [];\n\n        if (isString(tickMethod)) {\n          var method = getTickMethod(tickMethod);\n\n          if (!method) {\n            throw new Error('There is no method to to calculate ticks!');\n          }\n\n          ticks = method(this);\n        } else if (isFunction(tickMethod)) {\n          ticks = tickMethod(this);\n        }\n\n        return ticks;\n      }; // range 的最小值\n\n\n      Scale.prototype.rangeMin = function () {\n        return head(this.range);\n      }; // range 的最大值\n\n\n      Scale.prototype.rangeMax = function () {\n        return last(this.range);\n      };\n      /** 定义域转 0~1 */\n\n\n      Scale.prototype.calcPercent = function (value, min, max) {\n        if (isNumber(value)) {\n          return (value - min) / (max - min);\n        }\n\n        return NaN;\n      };\n      /** 0~1转定义域 */\n\n\n      Scale.prototype.calcValue = function (percent, min, max) {\n        return min + percent * (max - min);\n      };\n\n      return Scale;\n    }();\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\n\n    /* global Reflect, Promise */\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n\n      return extendStatics(d, b);\n    };\n\n    function __extends(d, b) {\n      extendStatics(d, b);\n\n      function __() {\n        this.constructor = d;\n      }\n\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n      for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n      return r;\n    }\n\n    /**\n     * 分类度量\n     * @class\n     */\n\n    var Category =\n    /** @class */\n    function (_super) {\n      __extends(Category, _super);\n\n      function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'cat';\n        _this.isCategory = true;\n        return _this;\n      }\n\n      Category.prototype.translate = function (value) {\n        var index = indexOf(this.values, value);\n\n        if (index === -1) {\n          return isNumber(value) ? value : NaN;\n        }\n\n        return index;\n      };\n\n      Category.prototype.scale = function (value) {\n        var order = this.translate(value); // 分类数据允许 0.5 范围内调整\n        // if (order < this.min - 0.5 || order > this.max + 0.5) {\n        //   return NaN;\n        // }\n\n        var percent = this.calcPercent(order, this.min, this.max);\n        return this.calcValue(percent, this.rangeMin(), this.rangeMax());\n      };\n\n      Category.prototype.invert = function (scaledValue) {\n        var domainRange = this.max - this.min;\n        var percent = this.calcPercent(scaledValue, this.rangeMin(), this.rangeMax());\n        var idx = Math.round(domainRange * percent) + this.min;\n\n        if (idx < this.min || idx > this.max) {\n          return NaN;\n        }\n\n        return this.values[idx];\n      };\n\n      Category.prototype.getText = function (value) {\n        var args = [];\n\n        for (var _i = 1; _i < arguments.length; _i++) {\n          args[_i - 1] = arguments[_i];\n        }\n\n        var v = value; // value为index\n\n        if (isNumber(value) && !this.values.includes(value)) {\n          v = this.values[v];\n        }\n\n        return _super.prototype.getText.apply(this, __spreadArrays([v], args));\n      }; // 复写属性\n\n\n      Category.prototype.initCfg = function () {\n        this.tickMethod = 'cat';\n      }; // 设置 min, max\n\n\n      Category.prototype.setDomain = function () {\n        // 用户有可能设置 min\n        if (isNil(this.getConfig('min'))) {\n          this.min = 0;\n        }\n\n        if (isNil(this.getConfig('max'))) {\n          var size = this.values.length;\n          this.max = size > 1 ? size - 1 : size;\n        }\n      };\n\n      return Category;\n    }(Scale);\n\n    var token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\n    var twoDigitsOptional = \"[1-9]\\\\d?\";\n    var twoDigits = \"\\\\d\\\\d\";\n    var threeDigits = \"\\\\d{3}\";\n    var fourDigits = \"\\\\d{4}\";\n    var word = \"[^\\\\s]+\";\n    var literal = /\\[([^]*?)\\]/gm;\n\n    function shorten(arr, sLen) {\n      var newArr = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        newArr.push(arr[i].substr(0, sLen));\n      }\n\n      return newArr;\n    }\n\n    var monthUpdate = function (arrName) {\n      return function (v, i18n) {\n        var lowerCaseArr = i18n[arrName].map(function (v) {\n          return v.toLowerCase();\n        });\n        var index = lowerCaseArr.indexOf(v.toLowerCase());\n\n        if (index > -1) {\n          return index;\n        }\n\n        return null;\n      };\n    };\n\n    function assign(origObj) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n        var obj = args_1[_a];\n\n        for (var key in obj) {\n          // @ts-ignore ex\n          origObj[key] = obj[key];\n        }\n      }\n\n      return origObj;\n    }\n\n    var dayNames = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var monthNamesShort = shorten(monthNames, 3);\n    var dayNamesShort = shorten(dayNames, 3);\n    var defaultI18n = {\n      dayNamesShort: dayNamesShort,\n      dayNames: dayNames,\n      monthNamesShort: monthNamesShort,\n      monthNames: monthNames,\n      amPm: [\"am\", \"pm\"],\n      DoFn: function (dayOfMonth) {\n        return dayOfMonth + [\"th\", \"st\", \"nd\", \"rd\"][dayOfMonth % 10 > 3 ? 0 : (dayOfMonth - dayOfMonth % 10 !== 10 ? 1 : 0) * dayOfMonth % 10];\n      }\n    };\n    var globalI18n = assign({}, defaultI18n);\n\n    var setGlobalDateI18n = function (i18n) {\n      return globalI18n = assign(globalI18n, i18n);\n    };\n\n    var regexEscape = function (str) {\n      return str.replace(/[|\\\\{()[^$+*?.-]/g, \"\\\\$&\");\n    };\n\n    var pad = function (val, len) {\n      if (len === void 0) {\n        len = 2;\n      }\n\n      val = String(val);\n\n      while (val.length < len) {\n        val = \"0\" + val;\n      }\n\n      return val;\n    };\n\n    var formatFlags = {\n      D: function (dateObj) {\n        return String(dateObj.getDate());\n      },\n      DD: function (dateObj) {\n        return pad(dateObj.getDate());\n      },\n      Do: function (dateObj, i18n) {\n        return i18n.DoFn(dateObj.getDate());\n      },\n      d: function (dateObj) {\n        return String(dateObj.getDay());\n      },\n      dd: function (dateObj) {\n        return pad(dateObj.getDay());\n      },\n      ddd: function (dateObj, i18n) {\n        return i18n.dayNamesShort[dateObj.getDay()];\n      },\n      dddd: function (dateObj, i18n) {\n        return i18n.dayNames[dateObj.getDay()];\n      },\n      M: function (dateObj) {\n        return String(dateObj.getMonth() + 1);\n      },\n      MM: function (dateObj) {\n        return pad(dateObj.getMonth() + 1);\n      },\n      MMM: function (dateObj, i18n) {\n        return i18n.monthNamesShort[dateObj.getMonth()];\n      },\n      MMMM: function (dateObj, i18n) {\n        return i18n.monthNames[dateObj.getMonth()];\n      },\n      YY: function (dateObj) {\n        return pad(String(dateObj.getFullYear()), 4).substr(2);\n      },\n      YYYY: function (dateObj) {\n        return pad(dateObj.getFullYear(), 4);\n      },\n      h: function (dateObj) {\n        return String(dateObj.getHours() % 12 || 12);\n      },\n      hh: function (dateObj) {\n        return pad(dateObj.getHours() % 12 || 12);\n      },\n      H: function (dateObj) {\n        return String(dateObj.getHours());\n      },\n      HH: function (dateObj) {\n        return pad(dateObj.getHours());\n      },\n      m: function (dateObj) {\n        return String(dateObj.getMinutes());\n      },\n      mm: function (dateObj) {\n        return pad(dateObj.getMinutes());\n      },\n      s: function (dateObj) {\n        return String(dateObj.getSeconds());\n      },\n      ss: function (dateObj) {\n        return pad(dateObj.getSeconds());\n      },\n      S: function (dateObj) {\n        return String(Math.round(dateObj.getMilliseconds() / 100));\n      },\n      SS: function (dateObj) {\n        return pad(Math.round(dateObj.getMilliseconds() / 10), 2);\n      },\n      SSS: function (dateObj) {\n        return pad(dateObj.getMilliseconds(), 3);\n      },\n      a: function (dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];\n      },\n      A: function (dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n      },\n      ZZ: function (dateObj) {\n        var offset = dateObj.getTimezoneOffset();\n        return (offset > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(offset) / 60) * 100 + Math.abs(offset) % 60, 4);\n      },\n      Z: function (dateObj) {\n        var offset = dateObj.getTimezoneOffset();\n        return (offset > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(offset) / 60), 2) + \":\" + pad(Math.abs(offset) % 60, 2);\n      }\n    };\n\n    var monthParse = function (v) {\n      return +v - 1;\n    };\n\n    var emptyDigits = [null, twoDigitsOptional];\n    var emptyWord = [null, word];\n    var amPm = [\"isPm\", word, function (v, i18n) {\n      var val = v.toLowerCase();\n\n      if (val === i18n.amPm[0]) {\n        return 0;\n      } else if (val === i18n.amPm[1]) {\n        return 1;\n      }\n\n      return null;\n    }];\n    var timezoneOffset = [\"timezoneOffset\", \"[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z?\", function (v) {\n      var parts = (v + \"\").match(/([+-]|\\d\\d)/gi);\n\n      if (parts) {\n        var minutes = +parts[1] * 60 + parseInt(parts[2], 10);\n        return parts[0] === \"+\" ? minutes : -minutes;\n      }\n\n      return 0;\n    }];\n    var parseFlags = {\n      D: [\"day\", twoDigitsOptional],\n      DD: [\"day\", twoDigits],\n      Do: [\"day\", twoDigitsOptional + word, function (v) {\n        return parseInt(v, 10);\n      }],\n      M: [\"month\", twoDigitsOptional, monthParse],\n      MM: [\"month\", twoDigits, monthParse],\n      YY: [\"year\", twoDigits, function (v) {\n        var now = new Date();\n        var cent = +(\"\" + now.getFullYear()).substr(0, 2);\n        return +(\"\" + (+v > 68 ? cent - 1 : cent) + v);\n      }],\n      h: [\"hour\", twoDigitsOptional, undefined, \"isPm\"],\n      hh: [\"hour\", twoDigits, undefined, \"isPm\"],\n      H: [\"hour\", twoDigitsOptional],\n      HH: [\"hour\", twoDigits],\n      m: [\"minute\", twoDigitsOptional],\n      mm: [\"minute\", twoDigits],\n      s: [\"second\", twoDigitsOptional],\n      ss: [\"second\", twoDigits],\n      YYYY: [\"year\", fourDigits],\n      S: [\"millisecond\", \"\\\\d\", function (v) {\n        return +v * 100;\n      }],\n      SS: [\"millisecond\", twoDigits, function (v) {\n        return +v * 10;\n      }],\n      SSS: [\"millisecond\", threeDigits],\n      d: emptyDigits,\n      dd: emptyDigits,\n      ddd: emptyWord,\n      dddd: emptyWord,\n      MMM: [\"month\", word, monthUpdate(\"monthNamesShort\")],\n      MMMM: [\"month\", word, monthUpdate(\"monthNames\")],\n      a: amPm,\n      A: amPm,\n      ZZ: timezoneOffset,\n      Z: timezoneOffset\n    }; // Some common format strings\n\n    var globalMasks = {\n      default: \"ddd MMM DD YYYY HH:mm:ss\",\n      shortDate: \"M/D/YY\",\n      mediumDate: \"MMM D, YYYY\",\n      longDate: \"MMMM D, YYYY\",\n      fullDate: \"dddd, MMMM D, YYYY\",\n      isoDate: \"YYYY-MM-DD\",\n      isoDateTime: \"YYYY-MM-DDTHH:mm:ssZ\",\n      shortTime: \"HH:mm\",\n      mediumTime: \"HH:mm:ss\",\n      longTime: \"HH:mm:ss.SSS\"\n    };\n\n    var setGlobalDateMasks = function (masks) {\n      return assign(globalMasks, masks);\n    };\n    /***\n     * Format a date\n     * @method format\n     * @param {Date|number} dateObj\n     * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n     * @returns {string} Formatted date string\n     */\n\n\n    var format = function (dateObj, mask, i18n) {\n      if (mask === void 0) {\n        mask = globalMasks[\"default\"];\n      }\n\n      if (i18n === void 0) {\n        i18n = {};\n      }\n\n      if (typeof dateObj === \"number\") {\n        dateObj = new Date(dateObj);\n      }\n\n      if (Object.prototype.toString.call(dateObj) !== \"[object Date]\" || isNaN(dateObj.getTime())) {\n        throw new Error(\"Invalid Date pass to format\");\n      }\n\n      mask = globalMasks[mask] || mask;\n      var literals = []; // Make literals inactive by replacing them with @@@\n\n      mask = mask.replace(literal, function ($0, $1) {\n        literals.push($1);\n        return \"@@@\";\n      });\n      var combinedI18nSettings = assign(assign({}, globalI18n), i18n); // Apply formatting rules\n\n      mask = mask.replace(token, function ($0) {\n        return formatFlags[$0](dateObj, combinedI18nSettings);\n      }); // Inline literal values back into the formatted value\n\n      return mask.replace(/@@@/g, function () {\n        return literals.shift();\n      });\n    };\n    /**\n     * Parse a date string into a Javascript Date object /\n     * @method parse\n     * @param {string} dateStr Date string\n     * @param {string} format Date parse format\n     * @param {i18n} I18nSettingsOptional Full or subset of I18N settings\n     * @returns {Date|null} Returns Date object. Returns null what date string is invalid or doesn't match format\n     */\n\n\n    function parse(dateStr, format, i18n) {\n      if (i18n === void 0) {\n        i18n = {};\n      }\n\n      if (typeof format !== \"string\") {\n        throw new Error(\"Invalid format in fecha parse\");\n      } // Check to see if the format is actually a mask\n\n\n      format = globalMasks[format] || format; // Avoid regular expression denial of service, fail early for really long strings\n      // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n\n      if (dateStr.length > 1000) {\n        return null;\n      } // Default to the beginning of the year.\n\n\n      var today = new Date();\n      var dateInfo = {\n        year: today.getFullYear(),\n        month: 0,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        isPm: null,\n        timezoneOffset: null\n      };\n      var parseInfo = [];\n      var literals = []; // Replace all the literals with @@@. Hopefully a string that won't exist in the format\n\n      var newFormat = format.replace(literal, function ($0, $1) {\n        literals.push(regexEscape($1));\n        return \"@@@\";\n      });\n      var specifiedFields = {};\n      var requiredFields = {}; // Change every token that we find into the correct regex\n\n      newFormat = regexEscape(newFormat).replace(token, function ($0) {\n        var info = parseFlags[$0];\n        var field = info[0],\n            regex = info[1],\n            requiredField = info[3]; // Check if the person has specified the same field twice. This will lead to confusing results.\n\n        if (specifiedFields[field]) {\n          throw new Error(\"Invalid format. \" + field + \" specified twice in format\");\n        }\n\n        specifiedFields[field] = true; // Check if there are any required fields. For instance, 12 hour time requires AM/PM specified\n\n        if (requiredField) {\n          requiredFields[requiredField] = true;\n        }\n\n        parseInfo.push(info);\n        return \"(\" + regex + \")\";\n      }); // Check all the required fields are present\n\n      Object.keys(requiredFields).forEach(function (field) {\n        if (!specifiedFields[field]) {\n          throw new Error(\"Invalid format. \" + field + \" is required in specified format\");\n        }\n      }); // Add back all the literals after\n\n      newFormat = newFormat.replace(/@@@/g, function () {\n        return literals.shift();\n      }); // Check if the date string matches the format. If it doesn't return null\n\n      var matches = dateStr.match(new RegExp(newFormat, \"i\"));\n\n      if (!matches) {\n        return null;\n      }\n\n      var combinedI18nSettings = assign(assign({}, globalI18n), i18n); // For each match, call the parser function for that date part\n\n      for (var i = 1; i < matches.length; i++) {\n        var _a = parseInfo[i - 1],\n            field = _a[0],\n            parser = _a[2];\n        var value = parser ? parser(matches[i], combinedI18nSettings) : +matches[i]; // If the parser can't make sense of the value, return null\n\n        if (value == null) {\n          return null;\n        }\n\n        dateInfo[field] = value;\n      }\n\n      if (dateInfo.isPm === 1 && dateInfo.hour != null && +dateInfo.hour !== 12) {\n        dateInfo.hour = +dateInfo.hour + 12;\n      } else if (dateInfo.isPm === 0 && +dateInfo.hour === 12) {\n        dateInfo.hour = 0;\n      }\n\n      var dateWithoutTZ = new Date(dateInfo.year, dateInfo.month, dateInfo.day, dateInfo.hour, dateInfo.minute, dateInfo.second, dateInfo.millisecond);\n      var validateFields = [[\"month\", \"getMonth\"], [\"day\", \"getDate\"], [\"hour\", \"getHours\"], [\"minute\", \"getMinutes\"], [\"second\", \"getSeconds\"]];\n\n      for (var i = 0, len = validateFields.length; i < len; i++) {\n        // Check to make sure the date field is within the allowed range. Javascript dates allows values\n        // outside the allowed range. If the values don't match the value was invalid\n        if (specifiedFields[validateFields[i][0]] && dateInfo[validateFields[i][0]] !== dateWithoutTZ[validateFields[i][1]]()) {\n          return null;\n        }\n      }\n\n      if (dateInfo.timezoneOffset == null) {\n        return dateWithoutTZ;\n      }\n\n      return new Date(Date.UTC(dateInfo.year, dateInfo.month, dateInfo.day, dateInfo.hour, dateInfo.minute - dateInfo.timezoneOffset, dateInfo.second, dateInfo.millisecond));\n    }\n\n    var fecha = {\n      format: format,\n      parse: parse,\n      defaultI18n: defaultI18n,\n      setGlobalDateI18n: setGlobalDateI18n,\n      setGlobalDateMasks: setGlobalDateMasks\n    };\n\n    var fecha1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        'default': fecha,\n        assign: assign,\n        format: format,\n        parse: parse,\n        defaultI18n: defaultI18n,\n        setGlobalDateI18n: setGlobalDateI18n,\n        setGlobalDateMasks: setGlobalDateMasks\n    });\n\n    /**\n     * 二分右侧查找\n     * https://github.com/d3/d3-array/blob/master/src/bisector.js\n     */\n\n    function bisector (getter) {\n      /**\n       * x: 目标值\n       * lo: 起始位置\n       * hi: 结束位置\n       */\n      return function (a, x, _lo, _hi) {\n        var lo = isNil(_lo) ? 0 : _lo;\n        var hi = isNil(_hi) ? a.length : _hi;\n\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n\n          if (getter(a[mid]) > x) {\n            hi = mid;\n          } else {\n            lo = mid + 1;\n          }\n        }\n\n        return lo;\n      };\n    }\n\n    var FORMAT_METHOD = 'format';\n    function timeFormat(time, mask) {\n      var method = fecha1[FORMAT_METHOD] || fecha[FORMAT_METHOD];\n      return method(time, mask);\n    }\n    /**\n     * 转换成时间戳\n     * @param value 时间值\n     */\n\n    function toTimeStamp$1(value) {\n      if (isString(value)) {\n        if (value.indexOf('T') > 0) {\n          value = new Date(value).getTime();\n        } else {\n          // new Date('2010/01/10') 和 new Date('2010-01-10') 的差别在于:\n          // 如果仅有年月日时，前者是带有时区的: Fri Jan 10 2020 02:40:13 GMT+0800 (中国标准时间)\n          // 后者会格式化成 Sun Jan 10 2010 08:00:00 GMT+0800 (中国标准时间)\n          value = new Date(value.replace(/-/gi, '/')).getTime();\n        }\n      }\n\n      if (isDate(value)) {\n        value = value.getTime();\n      }\n\n      return value;\n    }\n    var SECOND = 1000;\n    var MINUTE = 60 * SECOND;\n    var HOUR = 60 * MINUTE;\n    var DAY = 24 * HOUR;\n    var MONTH = DAY * 31;\n    var YEAR = DAY * 365;\n    var intervals = [['HH:mm:ss', SECOND], ['HH:mm:ss', SECOND * 10], ['HH:mm:ss', SECOND * 30], ['HH:mm', MINUTE], ['HH:mm', MINUTE * 10], ['HH:mm', MINUTE * 30], ['HH', HOUR], ['HH', HOUR * 6], ['HH', HOUR * 12], ['YYYY-MM-DD', DAY], ['YYYY-MM-DD', DAY * 4], ['YYYY-WW', DAY * 7], ['YYYY-MM', MONTH], ['YYYY-MM', MONTH * 4], ['YYYY-MM', MONTH * 6], ['YYYY', DAY * 380]];\n    function getTickInterval(min, max, tickCount) {\n      var target = (max - min) / tickCount;\n      var idx = bisector(function (o) {\n        return o[1];\n      })(intervals, target) - 1;\n      var interval = intervals[idx];\n\n      if (idx < 0) {\n        interval = intervals[0];\n      } else if (idx >= intervals.length) {\n        interval = last(intervals);\n      }\n\n      return interval;\n    }\n\n    /**\n     * 时间分类度量\n     * @class\n     */\n\n    var TimeCat =\n    /** @class */\n    function (_super) {\n      __extends(TimeCat, _super);\n\n      function TimeCat() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'timeCat';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      TimeCat.prototype.translate = function (value) {\n        value = toTimeStamp$1(value);\n        var index = this.values.indexOf(value);\n\n        if (index === -1) {\n          if (isNumber(value) && value < this.values.length) {\n            index = value;\n          } else {\n            index = NaN;\n          }\n        }\n\n        return index;\n      };\n      /**\n       * 由于时间类型数据需要转换一下，所以复写 getText\n       * @override\n       */\n\n\n      TimeCat.prototype.getText = function (value, tickIndex) {\n        var index = this.translate(value);\n\n        if (index > -1) {\n          var result = this.values[index];\n          var formatter = this.formatter;\n          result = formatter ? formatter(result, tickIndex) : timeFormat(result, this.mask);\n          return result;\n        }\n\n        return value;\n      };\n\n      TimeCat.prototype.initCfg = function () {\n        this.tickMethod = 'time-cat';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7; // 一般时间数据会显示 7， 14， 30 天的数字\n      };\n\n      TimeCat.prototype.setDomain = function () {\n        var values = this.values; // 针对时间分类类型，会将时间统一转换为时间戳\n\n        each(values, function (v, i) {\n          values[i] = toTimeStamp$1(v);\n        });\n        values.sort(function (v1, v2) {\n          return v1 - v2;\n        });\n\n        _super.prototype.setDomain.call(this);\n      };\n\n      return TimeCat;\n    }(Category);\n\n    /**\n     * 连续度量的基类\n     * @class\n     */\n\n    var Continuous =\n    /** @class */\n    function (_super) {\n      __extends(Continuous, _super);\n\n      function Continuous() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.isContinuous = true;\n        return _this;\n      }\n\n      Continuous.prototype.scale = function (value) {\n        if (isNil(value)) {\n          return NaN;\n        }\n\n        var rangeMin = this.rangeMin();\n        var rangeMax = this.rangeMax();\n        var max = this.max;\n        var min = this.min;\n\n        if (max === min) {\n          return rangeMin;\n        }\n\n        var percent = this.getScalePercent(value);\n        return rangeMin + percent * (rangeMax - rangeMin);\n      };\n\n      Continuous.prototype.init = function () {\n        _super.prototype.init.call(this); // init 完成后保证 min, max 包含 ticks 的范围\n\n\n        var ticks = this.ticks;\n        var firstTick = head(ticks);\n        var lastTick = last(ticks);\n\n        if (firstTick < this.min) {\n          this.min = firstTick;\n        }\n\n        if (lastTick > this.max) {\n          this.max = lastTick;\n        } // strict-limit 方式\n\n\n        if (!isNil(this.minLimit)) {\n          this.min = firstTick;\n        }\n\n        if (!isNil(this.maxLimit)) {\n          this.max = lastTick;\n        }\n      };\n\n      Continuous.prototype.setDomain = function () {\n        var _a = getRange(this.values),\n            min = _a.min,\n            max = _a.max;\n\n        if (isNil(this.min)) {\n          this.min = min;\n        }\n\n        if (isNil(this.max)) {\n          this.max = max;\n        }\n\n        if (this.min > this.max) {\n          this.min = min;\n          this.max = max;\n        }\n      };\n\n      Continuous.prototype.calculateTicks = function () {\n        var _this = this;\n\n        var ticks = _super.prototype.calculateTicks.call(this);\n\n        if (!this.nice) {\n          ticks = filter(ticks, function (tick) {\n            return tick >= _this.min && tick <= _this.max;\n          });\n        }\n\n        return ticks;\n      }; // 计算原始值值占的百分比\n\n\n      Continuous.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        return (value - min) / (max - min);\n      };\n\n      Continuous.prototype.getInvertPercent = function (value) {\n        return (value - this.rangeMin()) / (this.rangeMax() - this.rangeMin());\n      };\n\n      return Continuous;\n    }(Scale);\n\n    /**\n     * 线性度量\n     * @class\n     */\n\n    var Linear =\n    /** @class */\n    function (_super) {\n      __extends(Linear, _super);\n\n      function Linear() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'linear';\n        _this.isLinear = true;\n        return _this;\n      }\n\n      Linear.prototype.invert = function (value) {\n        var percent = this.getInvertPercent(value);\n        return this.min + percent * (this.max - this.min);\n      };\n\n      Linear.prototype.initCfg = function () {\n        this.tickMethod = 'wilkinson-extended';\n        this.nice = false;\n      };\n\n      return Linear;\n    }(Continuous);\n\n    // 虽然数学上 b 不支持负数，但是这里需要支持 负数\n\n    function calBase(a, b) {\n      var e = Math.E;\n      var value;\n\n      if (b >= 0) {\n        value = Math.pow(e, Math.log(b) / a); // 使用换底公式求底\n      } else {\n        value = Math.pow(e, Math.log(-b) / a) * -1; // 使用换底公式求底\n      }\n\n      return value;\n    }\n    function log(a, b) {\n      if (a === 1) {\n        return 1;\n      }\n\n      return Math.log(b) / Math.log(a);\n    }\n    function getLogPositiveMin(values, base, max) {\n      if (isNil(max)) {\n        max = Math.max.apply(null, values);\n      }\n\n      var positiveMin = max;\n      each(values, function (value) {\n        if (value > 0 && value < positiveMin) {\n          positiveMin = value;\n        }\n      });\n\n      if (positiveMin === max) {\n        positiveMin = max / base;\n      }\n\n      if (positiveMin > 1) {\n        positiveMin = 1;\n      }\n\n      return positiveMin;\n    }\n\n    /**\n     * Log 度量，处理非均匀分布\n     */\n\n    var Log =\n    /** @class */\n    function (_super) {\n      __extends(Log, _super);\n\n      function Log() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'log';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      Log.prototype.invert = function (value) {\n        var base = this.base;\n        var max = log(base, this.max);\n        var rangeMin = this.rangeMin();\n        var range = this.rangeMax() - rangeMin;\n        var min;\n        var positiveMin = this.positiveMin;\n\n        if (positiveMin) {\n          if (value === 0) {\n            return 0;\n          }\n\n          min = log(base, positiveMin / base);\n          var appendPercent = 1 / (max - min) * range; // 0 到 positiveMin的占比\n\n          if (value < appendPercent) {\n            // 落到 0 - positiveMin 之间\n            return value / appendPercent * positiveMin;\n          }\n        } else {\n          min = log(base, this.min);\n        }\n\n        var percent = (value - rangeMin) / range;\n        var tmp = percent * (max - min) + min;\n        return Math.pow(base, tmp);\n      };\n\n      Log.prototype.initCfg = function () {\n        this.tickMethod = 'log';\n        this.base = 10;\n        this.tickCount = 6;\n        this.nice = true;\n      }; // 设置\n\n\n      Log.prototype.setDomain = function () {\n        _super.prototype.setDomain.call(this);\n\n        var min = this.min;\n\n        if (min < 0) {\n          throw new Error('When you use log scale, the minimum value must be greater than zero!');\n        }\n\n        if (min === 0) {\n          this.positiveMin = getLogPositiveMin(this.values, this.base, this.max);\n        }\n      }; // 根据当前值获取占比\n\n\n      Log.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n\n        if (max === min) {\n          return 0;\n        } // 如果值小于等于0，则按照0处理\n\n\n        if (value <= 0) {\n          return 0;\n        }\n\n        var base = this.base;\n        var positiveMin = this.positiveMin; // 如果min == 0, 则根据比0大的最小值，计算比例关系。这个最小值作为坐标轴上的第二个tick，第一个是0但是不显示\n\n        if (positiveMin) {\n          min = positiveMin * 1 / base;\n        }\n\n        var percent; // 如果数值小于次小值，那么就计算 value / 次小值 占整体的比例\n\n        if (value < positiveMin) {\n          percent = value / positiveMin / (log(base, max) - log(base, min));\n        } else {\n          percent = (log(base, value) - log(base, min)) / (log(base, max) - log(base, min));\n        }\n\n        return percent;\n      };\n\n      return Log;\n    }(Continuous);\n\n    /**\n     * Pow 度量，处理非均匀分布\n     */\n\n    var Pow =\n    /** @class */\n    function (_super) {\n      __extends(Pow, _super);\n\n      function Pow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'pow';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      Pow.prototype.invert = function (value) {\n        var percent = this.getInvertPercent(value);\n        var exponent = this.exponent;\n        var max = calBase(exponent, this.max);\n        var min = calBase(exponent, this.min);\n        var tmp = percent * (max - min) + min;\n        var factor = tmp >= 0 ? 1 : -1;\n        return Math.pow(tmp, exponent) * factor;\n      };\n\n      Pow.prototype.initCfg = function () {\n        this.tickMethod = 'pow';\n        this.exponent = 2;\n        this.tickCount = 5;\n        this.nice = true;\n      }; // 获取度量计算时，value占的定义域百分比\n\n\n      Pow.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n\n        if (max === min) {\n          return 0;\n        }\n\n        var exponent = this.exponent;\n        var percent = (calBase(exponent, value) - calBase(exponent, min)) / (calBase(exponent, max) - calBase(exponent, min));\n        return percent;\n      };\n\n      return Pow;\n    }(Continuous);\n\n    /**\n     * 时间度量\n     * @class\n     */\n\n    var Time =\n    /** @class */\n    function (_super) {\n      __extends(Time, _super);\n\n      function Time() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'time';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      Time.prototype.getText = function (value, index) {\n        var numberValue = this.translate(value);\n        var formatter = this.formatter;\n        return formatter ? formatter(numberValue, index) : timeFormat(numberValue, this.mask);\n      };\n      /**\n       * @override\n       */\n\n\n      Time.prototype.scale = function (value) {\n        var v = value;\n\n        if (isString(v) || isDate(v)) {\n          v = this.translate(v);\n        }\n\n        return _super.prototype.scale.call(this, v);\n      };\n      /**\n       * 将时间转换成数字\n       * @override\n       */\n\n\n      Time.prototype.translate = function (v) {\n        return toTimeStamp$1(v);\n      };\n\n      Time.prototype.initCfg = function () {\n        this.tickMethod = 'time-pretty';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7;\n        this.nice = false;\n      };\n\n      Time.prototype.setDomain = function () {\n        var values = this.values; // 是否设置了 min, max，而不是直接取 this.min, this.max\n\n        var minConfig = this.getConfig('min');\n        var maxConfig = this.getConfig('max'); // 如果设置了 min,max 则转换成时间戳\n\n        if (!isNil(minConfig) || !isNumber(minConfig)) {\n          this.min = this.translate(this.min);\n        }\n\n        if (!isNil(maxConfig) || !isNumber(maxConfig)) {\n          this.max = this.translate(this.max);\n        } // 没有设置 min, max 时\n\n\n        if (values && values.length) {\n          // 重新计算最大最小值\n          var timeStamps_1 = [];\n          var min_1 = Infinity; // 最小值\n\n          var secondMin_1 = min_1; // 次小值\n\n          var max_1 = 0; // 使用一个循环，计算min,max,secondMin\n\n          each(values, function (v) {\n            var timeStamp = toTimeStamp$1(v);\n\n            if (isNaN(timeStamp)) {\n              throw new TypeError(\"Invalid Time: \" + v + \" in time scale!\");\n            }\n\n            if (min_1 > timeStamp) {\n              secondMin_1 = min_1;\n              min_1 = timeStamp;\n            } else if (secondMin_1 > timeStamp) {\n              secondMin_1 = timeStamp;\n            }\n\n            if (max_1 < timeStamp) {\n              max_1 = timeStamp;\n            }\n\n            timeStamps_1.push(timeStamp);\n          }); // 存在多个值时，设置最小间距\n\n          if (values.length > 1) {\n            this.minTickInterval = secondMin_1 - min_1;\n          }\n\n          if (isNil(minConfig)) {\n            this.min = min_1;\n          }\n\n          if (isNil(maxConfig)) {\n            this.max = max_1;\n          }\n        }\n      };\n\n      return Time;\n    }(Linear);\n\n    /**\n     * 分段度量\n     */\n\n    var Quantize =\n    /** @class */\n    function (_super) {\n      __extends(Quantize, _super);\n\n      function Quantize() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'quantize';\n        return _this;\n      }\n\n      Quantize.prototype.invert = function (value) {\n        var ticks = this.ticks;\n        var length = ticks.length;\n        var percent = this.getInvertPercent(value);\n        var minIndex = Math.floor(percent * (length - 1)); // 最后一个\n\n        if (minIndex >= length - 1) {\n          return last(ticks);\n        } // 超出左边界， 则取第一个\n\n\n        if (minIndex < 0) {\n          return head(ticks);\n        }\n\n        var minTick = ticks[minIndex];\n        var nextTick = ticks[minIndex + 1]; // 比当前值小的 tick 在度量上的占比\n\n        var minIndexPercent = minIndex / (length - 1);\n        var maxIndexPercent = (minIndex + 1) / (length - 1);\n        return minTick + (percent - minIndexPercent) / (maxIndexPercent - minIndexPercent) * (nextTick - minTick);\n      };\n\n      Quantize.prototype.initCfg = function () {\n        this.tickMethod = 'r-pretty';\n        this.tickCount = 5;\n        this.nice = true;\n      };\n\n      Quantize.prototype.calculateTicks = function () {\n        var ticks = _super.prototype.calculateTicks.call(this);\n\n        if (!this.nice) {\n          // 如果 nice = false ,补充 min, max\n          if (last(ticks) !== this.max) {\n            ticks.push(this.max);\n          }\n\n          if (head(ticks) !== this.min) {\n            ticks.unshift(this.min);\n          }\n        }\n\n        return ticks;\n      }; // 计算当前值在刻度中的占比\n\n\n      Quantize.prototype.getScalePercent = function (value) {\n        var ticks = this.ticks; // 超出左边界\n\n        if (value < head(ticks)) {\n          return 0;\n        } // 超出右边界\n\n\n        if (value > last(ticks)) {\n          return 1;\n        }\n\n        var minIndex = 0;\n        each(ticks, function (tick, index) {\n          if (value >= tick) {\n            minIndex = index;\n          } else {\n            return false;\n          }\n        });\n        return minIndex / (ticks.length - 1);\n      };\n\n      return Quantize;\n    }(Continuous);\n\n    var Quantile =\n    /** @class */\n    function (_super) {\n      __extends(Quantile, _super);\n\n      function Quantile() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'quantile';\n        return _this;\n      }\n\n      Quantile.prototype.initCfg = function () {\n        this.tickMethod = 'quantile';\n        this.tickCount = 5;\n        this.nice = true;\n      };\n\n      return Quantile;\n    }(Quantize);\n\n    var map$1 = {};\n\n    function getClass(key) {\n      return map$1[key];\n    }\n\n    function registerClass(key, cls) {\n      if (getClass(key)) {\n        throw new Error(\"type '\" + key + \"' existed.\");\n      }\n\n      map$1[key] = cls;\n    }\n\n    /**\n     * identity scale原则上是定义域和值域一致，scale/invert方法也是一致的\n     * 参考R的实现：https://github.com/r-lib/scales/blob/master/R/pal-identity.r\n     * 参考d3的实现（做了下转型）：https://github.com/d3/d3-scale/blob/master/src/identity.js\n     */\n\n    var Identity =\n    /** @class */\n    function (_super) {\n      __extends(Identity, _super);\n\n      function Identity() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'identity';\n        _this.isIdentity = true;\n        return _this;\n      }\n\n      Identity.prototype.calculateTicks = function () {\n        return this.values;\n      };\n\n      Identity.prototype.scale = function (value) {\n        // 如果传入的值不等于 identity 的值，则直接返回，用于一维图时的 dodge\n        if (this.values[0] !== value && isNumber(value)) {\n          return value;\n        }\n\n        return this.range[0];\n      };\n\n      Identity.prototype.invert = function (value) {\n        var range = this.range;\n\n        if (value < range[0] || value > range[1]) {\n          return NaN;\n        }\n\n        return this.values[0];\n      };\n\n      return Identity;\n    }(Scale);\n\n    var DEFAULT_Q = [1, 5, 2, 2.5, 4, 3];\n    var eps = Number.EPSILON * 100; // https://stackoverflow.com/questions/4467539/javascript-modulo-gives-a-negative-result-for-negative-numbers\n\n    function mod(n, m) {\n      return (n % m + m) % m;\n    }\n\n    function simplicity(q, Q, j, lmin, lmax, lstep) {\n      var n = size(Q);\n      var i = indexOf(Q, q);\n      var v = 0;\n      var m = mod(lmin, lstep);\n\n      if ((m < eps || lstep - m < eps) && lmin <= 0 && lmax >= 0) {\n        v = 1;\n      }\n\n      return 1 - i / (n - 1) - j + v;\n    }\n\n    function simplicityMax(q, Q, j) {\n      var n = size(Q);\n      var i = indexOf(Q, q);\n      var v = 1;\n      return 1 - i / (n - 1) - j + v;\n    }\n\n    function density(k, m, dmin, dmax, lmin, lmax) {\n      var r = (k - 1) / (lmax - lmin);\n      var rt = (m - 1) / (Math.max(lmax, dmax) - Math.min(dmin, lmin));\n      return 2 - Math.max(r / rt, rt / r);\n    }\n\n    function densityMax(k, m) {\n      if (k >= m) {\n        return 2 - (k - 1) / (m - 1);\n      }\n\n      return 1;\n    }\n\n    function coverage(dmin, dmax, lmin, lmax) {\n      var range = dmax - dmin;\n      return 1 - 0.5 * (Math.pow(dmax - lmax, 2) + Math.pow(dmin - lmin, 2)) / Math.pow(0.1 * range, 2);\n    }\n\n    function coverageMax(dmin, dmax, span) {\n      var range = dmax - dmin;\n\n      if (span > range) {\n        var half = (span - range) / 2;\n        return 1 - Math.pow(half, 2) / Math.pow(0.1 * range, 2);\n      }\n\n      return 1;\n    }\n\n    function legibility() {\n      return 1;\n    }\n    /**\n     * An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes\n     * https://www.yuque.com/preview/yuque/0/2019/pdf/185317/1546999150858-45c3b9c2-4e86-4223-bf1a-8a732e8195ed.pdf\n     * @param dmin 最小值\n     * @param dmax 最大值\n     * @param m tick个数\n     * @param onlyLoose 是否允许扩展min、max，不绝对强制，例如[3, 97]\n     * @param Q nice numbers集合\n     * @param w 四个优化组件的权重\n     */\n\n\n    function extended(dmin, dmax, m, onlyLoose, Q, w) {\n      if (m === void 0) {\n        m = 5;\n      }\n\n      if (onlyLoose === void 0) {\n        onlyLoose = true;\n      }\n\n      if (Q === void 0) {\n        Q = DEFAULT_Q;\n      }\n\n      if (w === void 0) {\n        w = [0.25, 0.2, 0.5, 0.05];\n      } // 异常数据情况下，直接返回，防止 oom\n\n\n      if (typeof dmin !== 'number' || typeof dmax !== 'number') {\n        return {\n          min: 0,\n          max: 0,\n          ticks: []\n        };\n      }\n\n      if (dmin === dmax || m === 1) {\n        return {\n          min: dmin,\n          max: dmax,\n          ticks: [dmin]\n        };\n      }\n\n      var best = {\n        score: -2,\n        lmin: 0,\n        lmax: 0,\n        lstep: 0\n      };\n      var j = 1;\n\n      while (j < Infinity) {\n        for (var _i = 0, Q_1 = Q; _i < Q_1.length; _i++) {\n          var q = Q_1[_i];\n          var sm = simplicityMax(q, Q, j);\n\n          if (Number.isNaN(sm)) {\n            throw new Error('NaN');\n          }\n\n          if (w[0] * sm + w[1] + w[2] + w[3] < best.score) {\n            j = Infinity;\n            break;\n          }\n\n          var k = 2;\n\n          while (k < Infinity) {\n            var dm = densityMax(k, m);\n\n            if (w[0] * sm + w[1] + w[2] * dm + w[3] < best.score) {\n              break;\n            }\n\n            var delta = (dmax - dmin) / (k + 1) / j / q;\n            var z = Math.ceil(Math.log10(delta));\n\n            while (z < Infinity) {\n              var step = j * q * Math.pow(10, z);\n              var cm = coverageMax(dmin, dmax, step * (k - 1));\n\n              if (w[0] * sm + w[1] * cm + w[2] * dm + w[3] < best.score) {\n                break;\n              }\n\n              var minStart = Math.floor(dmax / step) * j - (k - 1) * j;\n              var maxStart = Math.ceil(dmin / step) * j;\n\n              if (minStart > maxStart) {\n                z = z + 1;\n                continue;\n              }\n\n              for (var start = minStart; start <= maxStart; start = start + 1) {\n                var lmin = start * (step / j);\n                var lmax = lmin + step * (k - 1);\n                var lstep = step;\n                var s = simplicity(q, Q, j, lmin, lmax, lstep);\n                var c = coverage(dmin, dmax, lmin, lmax);\n                var g = density(k, m, dmin, dmax, lmin, lmax);\n                var l = legibility();\n                var score = w[0] * s + w[1] * c + w[2] * g + w[3] * l;\n\n                if (score > best.score && (!onlyLoose || lmin <= dmin && lmax >= dmax)) {\n                  best.lmin = lmin;\n                  best.lmax = lmax;\n                  best.lstep = lstep;\n                  best.score = score;\n                }\n              }\n\n              z = z + 1;\n            }\n\n            k = k + 1;\n          }\n        }\n\n        j = j + 1;\n      } // 步长为浮点数时处理精度\n\n\n      var toFixed = Number.isInteger(best.lstep) ? 0 : Math.ceil(Math.abs(Math.log10(best.lstep)));\n      var range = [];\n\n      for (var tick = best.lmin; tick <= best.lmax; tick += best.lstep) {\n        range.push(tick);\n      }\n\n      var ticks = toFixed ? map(range, function (x) {\n        return Number.parseFloat(x.toFixed(toFixed));\n      }) : range;\n      return {\n        min: Math.min(dmin, head(ticks)),\n        max: Math.max(dmax, last(ticks)),\n        ticks: ticks\n      };\n    }\n\n    /**\n     * 计算分类 ticks\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculateCatTicks(cfg) {\n      var values = cfg.values,\n          tickInterval = cfg.tickInterval,\n          tickCount = cfg.tickCount;\n      var ticks = values;\n\n      if (isNumber(tickInterval)) {\n        return filter(ticks, function (__, i) {\n          return i % tickInterval === 0;\n        });\n      }\n\n      var min = cfg.min,\n          max = cfg.max;\n\n      if (isNil(min)) {\n        min = 0;\n      }\n\n      if (isNil(max)) {\n        max = values.length - 1;\n      }\n\n      if (isNumber(tickCount) && tickCount < max - min) {\n        // 简单过滤，部分情况下小数的倍数也可以是整数\n        // tslint:disable-next-line: no-shadowed-variable\n        var ticks_1 = extended(min, max, tickCount, false, [1, 2, 5, 3, 4, 7, 6, 8, 9]).ticks;\n        var valid = filter(ticks_1, function (tick) {\n          return tick >= min && tick <= max;\n        });\n        return valid.map(function (index) {\n          return values[index];\n        });\n      }\n\n      return values.slice(min, max + 1);\n    }\n\n    function d3Linear(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          nice = cfg.nice,\n          tickCount = cfg.tickCount;\n      var linear = new D3Linear();\n      linear.domain([min, max]);\n\n      if (nice) {\n        linear.nice(tickCount);\n      }\n\n      return linear.ticks(tickCount);\n    }\n    var DEFAULT_COUNT = 5;\n    var e10 = Math.sqrt(50);\n    var e5 = Math.sqrt(10);\n    var e2 = Math.sqrt(2); // https://github.com/d3/d3-scale\n\n    var D3Linear =\n    /** @class */\n    function () {\n      function D3Linear() {\n        this._domain = [0, 1];\n      }\n\n      D3Linear.prototype.domain = function (domain) {\n        if (domain) {\n          this._domain = Array.from(domain, Number);\n          return this;\n        }\n\n        return this._domain.slice();\n      };\n\n      D3Linear.prototype.nice = function (count) {\n        var _a, _b;\n\n        if (count === void 0) {\n          count = DEFAULT_COUNT;\n        }\n\n        var d = this._domain.slice();\n\n        var i0 = 0;\n        var i1 = this._domain.length - 1;\n        var start = this._domain[i0];\n        var stop = this._domain[i1];\n        var step;\n\n        if (stop < start) {\n          _a = [stop, start], start = _a[0], stop = _a[1];\n          _b = [i1, i0], i0 = _b[0], i1 = _b[1];\n        }\n\n        step = tickIncrement(start, stop, count);\n\n        if (step > 0) {\n          start = Math.floor(start / step) * step;\n          stop = Math.ceil(stop / step) * step;\n          step = tickIncrement(start, stop, count);\n        } else if (step < 0) {\n          start = Math.ceil(start * step) / step;\n          stop = Math.floor(stop * step) / step;\n          step = tickIncrement(start, stop, count);\n        }\n\n        if (step > 0) {\n          d[i0] = Math.floor(start / step) * step;\n          d[i1] = Math.ceil(stop / step) * step;\n          this.domain(d);\n        } else if (step < 0) {\n          d[i0] = Math.ceil(start * step) / step;\n          d[i1] = Math.floor(stop * step) / step;\n          this.domain(d);\n        }\n\n        return this;\n      };\n\n      D3Linear.prototype.ticks = function (count) {\n        if (count === void 0) {\n          count = DEFAULT_COUNT;\n        }\n\n        return d3ArrayTicks(this._domain[0], this._domain[this._domain.length - 1], count || DEFAULT_COUNT);\n      };\n\n      return D3Linear;\n    }();\n\n    function d3ArrayTicks(start, stop, count) {\n      var reverse;\n      var i = -1;\n      var n;\n      var ticks;\n      var step;\n      stop = +stop, start = +start, count = +count;\n\n      if (start === stop && count > 0) {\n        return [start];\n      } // tslint:disable-next-line\n\n\n      if (reverse = stop < start) {\n        n = start, start = stop, stop = n;\n      } // tslint:disable-next-line\n\n\n      if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) {\n        return [];\n      }\n\n      if (step > 0) {\n        start = Math.ceil(start / step);\n        stop = Math.floor(stop / step);\n        ticks = new Array(n = Math.ceil(stop - start + 1));\n\n        while (++i < n) {\n          ticks[i] = (start + i) * step;\n        }\n      } else {\n        start = Math.floor(start * step);\n        stop = Math.ceil(stop * step);\n        ticks = new Array(n = Math.ceil(start - stop + 1));\n\n        while (++i < n) {\n          ticks[i] = (start - i) / step;\n        }\n      }\n\n      if (reverse) {\n        ticks.reverse();\n      }\n\n      return ticks;\n    }\n\n    function tickIncrement(start, stop, count) {\n      var step = (stop - start) / Math.max(0, count);\n      var power = Math.floor(Math.log(step) / Math.LN10);\n      var error = step / Math.pow(10, power);\n      return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n    }\n\n    function snapMultiple(v, base, snapType) {\n      var div;\n\n      if (snapType === 'ceil') {\n        div = Math.ceil(v / base);\n      } else if (snapType === 'floor') {\n        div = Math.floor(v / base);\n      } else {\n        div = Math.round(v / base);\n      }\n\n      return div * base;\n    }\n\n    function intervalTicks(min, max, interval) {\n      // 变成 interval 的倍数\n      var minTick = snapMultiple(min, interval, 'floor');\n      var maxTick = snapMultiple(max, interval, 'ceil'); // 统一小数位数\n\n      minTick = fixedBase(minTick, interval);\n      maxTick = fixedBase(maxTick, interval);\n      var ticks = [];\n\n      for (var i = minTick; i <= maxTick; i = i + interval) {\n        var tickValue = fixedBase(i, interval); // 防止浮点数加法出现问题\n\n        ticks.push(tickValue);\n      }\n\n      return {\n        min: minTick,\n        max: maxTick,\n        ticks: ticks\n      };\n    }\n\n    /**\n     * 按照给定的 minLimit/maxLimit/tickCount 均匀计算出刻度 ticks\n     *\n     * @param cfg Scale 配置项\n     * @return ticks\n     */\n\n    function strictLimit(cfg, defaultMin, defaultMax) {\n      var _a;\n\n      var minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit,\n          min = cfg.min,\n          max = cfg.max,\n          _b = cfg.tickCount,\n          tickCount = _b === void 0 ? 5 : _b;\n      var tickMin = isNil(minLimit) ? isNil(defaultMin) ? min : defaultMin : minLimit;\n      var tickMax = isNil(maxLimit) ? isNil(defaultMax) ? max : defaultMax : maxLimit;\n\n      if (tickMin > tickMax) {\n        _a = [tickMin, tickMax], tickMax = _a[0], tickMin = _a[1];\n      }\n\n      if (tickCount <= 2) {\n        return [tickMin, tickMax];\n      }\n\n      var step = (tickMax - tickMin) / (tickCount - 1);\n      var ticks = [];\n\n      for (var i = 0; i < tickCount; i++) {\n        ticks.push(tickMin + step * i);\n      }\n\n      return ticks;\n    }\n\n    function d3LinearTickMethod(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          tickInterval = cfg.tickInterval,\n          minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit;\n      var ticks = d3Linear(cfg);\n\n      if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n      }\n\n      if (tickInterval) {\n        return intervalTicks(min, max, tickInterval).ticks;\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算线性的 ticks，使用 wilkinson extended 方法\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function linear(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          tickCount = cfg.tickCount,\n          nice = cfg.nice,\n          tickInterval = cfg.tickInterval,\n          minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit;\n      var ticks = extended(min, max, tickCount, nice).ticks;\n\n      if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n      }\n\n      if (tickInterval) {\n        return intervalTicks(min, max, tickInterval).ticks;\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算 log 的 ticks，考虑 min = 0 的场景\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculateLogTicks(cfg) {\n      var base = cfg.base,\n          tickCount = cfg.tickCount,\n          min = cfg.min,\n          max = cfg.max,\n          values = cfg.values;\n      var minTick;\n      var maxTick = log(base, max);\n\n      if (min > 0) {\n        minTick = Math.floor(log(base, min));\n      } else {\n        var positiveMin = getLogPositiveMin(values, base, max);\n        minTick = Math.floor(log(base, positiveMin));\n      }\n\n      var count = maxTick - minTick;\n      var avg = Math.ceil(count / tickCount);\n      var ticks = [];\n\n      for (var i = minTick; i < maxTick + avg; i = i + avg) {\n        ticks.push(Math.pow(base, i));\n      }\n\n      if (min <= 0) {\n        // 最小值 <= 0 时显示 0\n        ticks.unshift(0);\n      }\n\n      return ticks;\n    }\n\n    function pretty(min, max, n) {\n      if (n === void 0) {\n        n = 5;\n      }\n\n      var res = {\n        max: 0,\n        min: 0,\n        ticks: []\n      };\n\n      if (min === max) {\n        return {\n          max: max,\n          min: min,\n          ticks: [min]\n        };\n      }\n      /*\n        R pretty:\n        https://svn.r-project.org/R/trunk/src/appl/pretty.c\n        https://www.rdocumentation.org/packages/base/versions/3.5.2/topics/pretty\n        */\n\n\n      var h = 1.5; // high.u.bias\n\n      var h5 = 0.5 + 1.5 * h; // u5.bias\n      // 反正我也不会调参，跳过所有判断步骤\n\n      var d = max - min;\n      var c = d / n; // 当d非常小的时候触发，但似乎没什么用\n      // const min_n = Math.floor(n / 3);\n      // const shrink_sml = Math.pow(2, 5);\n      // if (Math.log10(d) < -2) {\n      //   c = (_.max([ Math.abs(max), Math.abs(min) ]) * shrink_sml) / min_n;\n      // }\n\n      var base = Math.pow(10, Math.floor(Math.log10(c)));\n      var toFixed = base < 1 ? Math.ceil(Math.abs(Math.log10(base))) : 0;\n      var unit = base;\n\n      if (2 * base - c < h * (c - unit)) {\n        unit = 2 * base;\n\n        if (5 * base - c < h5 * (c - unit)) {\n          unit = 5 * base;\n\n          if (10 * base - c < h * (c - unit)) {\n            unit = 10 * base;\n          }\n        }\n      }\n\n      var nu = Math.ceil(max / unit);\n      var ns = Math.floor(min / unit);\n      res.max = Math.max(nu * unit, max);\n      res.min = Math.min(ns * unit, min);\n      var x = Number.parseFloat((ns * unit).toFixed(toFixed));\n\n      while (x < max) {\n        res.ticks.push(x);\n        x += unit;\n\n        if (toFixed) {\n          x = Number.parseFloat(x.toFixed(toFixed));\n        }\n      }\n\n      res.ticks.push(x);\n      return res;\n    }\n\n    /**\n     * 计算 Pow 的 ticks\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculatePowTicks(cfg) {\n      var exponent = cfg.exponent,\n          tickCount = cfg.tickCount;\n      var max = Math.ceil(calBase(exponent, cfg.max));\n      var min = Math.floor(calBase(exponent, cfg.min));\n      var ticks = pretty(min, max, tickCount).ticks;\n      return ticks.map(function (tick) {\n        var factor = tick >= 0 ? 1 : -1;\n        return Math.pow(tick, exponent) * factor;\n      });\n    }\n\n    /**\n     * 计算几分位 https://github.com/simple-statistics/simple-statistics/blob/master/src/quantile_sorted.js\n     * @param x  数组\n     * @param p  百分比\n     */\n    function quantileSorted(x, p) {\n      var idx = x.length * p;\n      /*if (x.length === 0) { // 当前场景这些条件不可能命中\n        throw new Error('quantile requires at least one value.');\n      } else if (p < 0 || p > 1) {\n        throw new Error('quantiles must be between 0 and 1');\n      } else */\n\n      if (p === 1) {\n        // If p is 1, directly return the last element\n        return x[x.length - 1];\n      } else if (p === 0) {\n        // If p is 0, directly return the first element\n        return x[0];\n      } else if (idx % 1 !== 0) {\n        // If p is not integer, return the next element in array\n        return x[Math.ceil(idx) - 1];\n      } else if (x.length % 2 === 0) {\n        // If the list has even-length, we'll take the average of this number\n        // and the next value, if there is one\n        return (x[idx - 1] + x[idx]) / 2;\n      } else {\n        // Finally, in the simple case of an integer value\n        // with an odd-length list, return the x value at the index.\n        return x[idx];\n      }\n    }\n\n    function calculateTicks(cfg) {\n      var tickCount = cfg.tickCount,\n          values = cfg.values;\n\n      if (!values || !values.length) {\n        return [];\n      }\n\n      var sorted = values.slice().sort(function (a, b) {\n        return a - b;\n      });\n      var ticks = [];\n\n      for (var i = 0; i < tickCount; i++) {\n        var p = i / (tickCount - 1);\n        ticks.push(quantileSorted(sorted, p));\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算线性的 ticks，使用 R's pretty 方法\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function linearPretty(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          tickCount = cfg.tickCount,\n          tickInterval = cfg.tickInterval,\n          minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit;\n      var ticks = pretty(min, max, tickCount).ticks;\n\n      if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n      }\n\n      if (tickInterval) {\n        return intervalTicks(min, max, tickInterval).ticks;\n      }\n\n      return ticks;\n    }\n\n    function calculateTimeTicks(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          minTickInterval = cfg.minTickInterval;\n      var tickInterval = cfg.tickInterval;\n      var tickCount = cfg.tickCount; // 指定 tickInterval 后 tickCount 不生效，需要重新计算\n\n      if (tickInterval) {\n        tickCount = Math.ceil((max - min) / tickInterval);\n      } else {\n        tickInterval = getTickInterval(min, max, tickCount)[1];\n        var count = (max - min) / tickInterval;\n        var ratio = count / tickCount;\n\n        if (ratio > 1) {\n          tickInterval = tickInterval * Math.ceil(ratio);\n        } // 如果设置了最小间距，则使用最小间距\n\n\n        if (minTickInterval && tickInterval < minTickInterval) {\n          tickInterval = minTickInterval;\n        }\n      }\n\n      var ticks = [];\n\n      for (var i = min; i < max + tickInterval; i += tickInterval) {\n        ticks.push(i);\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算时间分类的 ticks, 保头，保尾\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculateTimeCatTicks(cfg) {\n      var ticks = calculateCatTicks(cfg);\n      var lastValue = last(cfg.values);\n\n      if (lastValue !== last(ticks)) {\n        ticks.push(lastValue);\n      }\n\n      return ticks;\n    }\n\n    function getYear(date) {\n      return new Date(date).getFullYear();\n    }\n\n    function createYear(year) {\n      return new Date(year, 0, 1).getTime();\n    }\n\n    function getMonth(date) {\n      return new Date(date).getMonth();\n    }\n\n    function diffMonth(min, max) {\n      var minYear = getYear(min);\n      var maxYear = getYear(max);\n      var minMonth = getMonth(min);\n      var maxMonth = getMonth(max);\n      return (maxYear - minYear) * 12 + (maxMonth - minMonth) % 12;\n    }\n\n    function creatMonth(year, month) {\n      return new Date(year, month, 1).getTime();\n    }\n\n    function diffDay(min, max) {\n      return Math.ceil((max - min) / DAY);\n    }\n\n    function diffHour(min, max) {\n      return Math.ceil((max - min) / HOUR);\n    }\n\n    function diffMinus(min, max) {\n      return Math.ceil((max - min) / (60 * 1000));\n    }\n    /**\n     * 计算 time 的 ticks，对 month, year 进行 pretty 处理\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n\n    function timePretty(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          minTickInterval = cfg.minTickInterval,\n          tickCount = cfg.tickCount;\n      var tickInterval = cfg.tickInterval;\n      var ticks = []; // 指定 tickInterval 后 tickCount 不生效，需要重新计算\n\n      if (!tickInterval) {\n        tickInterval = (max - min) / tickCount; // 如果设置了最小间距，则使用最小间距\n\n        if (minTickInterval && tickInterval < minTickInterval) {\n          tickInterval = minTickInterval;\n        }\n      }\n\n      var minYear = getYear(min); // 如果间距大于 1 年，则将开始日期从整年开始\n\n      if (tickInterval > YEAR) {\n        var maxYear = getYear(max);\n        var yearInterval = Math.ceil(tickInterval / YEAR);\n\n        for (var i = minYear; i <= maxYear + yearInterval; i = i + yearInterval) {\n          ticks.push(createYear(i));\n        }\n      } else if (tickInterval > MONTH) {\n        // 大于月时\n        var monthInterval = Math.ceil(tickInterval / MONTH);\n        var mmMoth = getMonth(min);\n        var dMonths = diffMonth(min, max);\n\n        for (var i = 0; i <= dMonths + monthInterval; i = i + monthInterval) {\n          ticks.push(creatMonth(minYear, i + mmMoth));\n        }\n      } else if (tickInterval > DAY) {\n        // 大于天\n        var date = new Date(min);\n        var year = date.getFullYear();\n        var month = date.getMonth();\n        var mday = date.getDate();\n        var day = Math.ceil(tickInterval / DAY);\n        var ddays = diffDay(min, max);\n\n        for (var i = 0; i < ddays + day; i = i + day) {\n          ticks.push(new Date(year, month, mday + i).getTime());\n        }\n      } else if (tickInterval > HOUR) {\n        // 大于小时\n        var date = new Date(min);\n        var year = date.getFullYear();\n        var month = date.getMonth();\n        var day = date.getDate();\n        var hour = date.getHours();\n        var hours = Math.ceil(tickInterval / HOUR);\n        var dHours = diffHour(min, max);\n\n        for (var i = 0; i <= dHours + hours; i = i + hours) {\n          ticks.push(new Date(year, month, day, hour + i).getTime());\n        }\n      } else if (tickInterval > MINUTE) {\n        // 大于分钟\n        var dMinus = diffMinus(min, max);\n        var minutes = Math.ceil(tickInterval / MINUTE);\n\n        for (var i = 0; i <= dMinus + minutes; i = i + minutes) {\n          ticks.push(min + i * MINUTE);\n        }\n      } else {\n        // 小于分钟\n        var interval = tickInterval;\n\n        if (interval < SECOND) {\n          interval = SECOND;\n        }\n\n        var minSecond = Math.floor(min / SECOND) * SECOND;\n        var dSeconds = Math.ceil((max - min) / SECOND);\n        var seconds = Math.ceil(interval / SECOND);\n\n        for (var i = 0; i < dSeconds + seconds; i = i + seconds) {\n          ticks.push(minSecond + i * SECOND);\n        }\n      } // 最好是能从算法能解决这个问题，但是如果指定了 tickInterval，计算 ticks，也只能这么算，所以\n      // 打印警告提示\n\n\n      if (ticks.length >= 512) {\n        console.warn(\"Notice: current ticks length(\" + ticks.length + \") >= 512, may cause performance issues, even out of memory. Because of the configure \\\"tickInterval\\\"(in milliseconds, current is \" + tickInterval + \") is too small, increase the value to solve the problem!\");\n      }\n\n      return ticks;\n    }\n\n    registerTickMethod('cat', calculateCatTicks);\n    registerTickMethod('time-cat', calculateTimeCatTicks);\n    registerTickMethod('wilkinson-extended', linear);\n    registerTickMethod('r-pretty', linearPretty);\n    registerTickMethod('time', calculateTimeTicks);\n    registerTickMethod('time-pretty', timePretty);\n    registerTickMethod('log', calculateLogTicks);\n    registerTickMethod('pow', calculatePowTicks);\n    registerTickMethod('quantile', calculateTicks);\n    registerTickMethod('d3-linear', d3LinearTickMethod);\n\n    registerClass('cat', Category);\n    registerClass('category', Category);\n    registerClass('identity', Identity);\n    registerClass('linear', Linear);\n    registerClass('log', Log);\n    registerClass('pow', Pow);\n    registerClass('time', Time);\n    registerClass('timeCat', TimeCat);\n    registerClass('quantize', Quantize);\n    registerClass('quantile', Quantile);\n\n    // cat平均算法，保头保尾\n    var CatTick = (function (cfg) {\n      var values = cfg.values,\n          tickCount = cfg.tickCount;\n\n      if (!tickCount) {\n        return values;\n      }\n\n      if (values.length <= 1) {\n        return values;\n      } // 获取间隔步长, 最小是1\n\n\n      var step = parseInt(values.length / (tickCount - 1)) || 1;\n      var ticks = []; // 按间隔数取对应节点\n\n      for (var index = 0; index < values.length; index = index + step) {\n        ticks.push(values[index]);\n      }\n\n      var last = values[values.length - 1]; // 如果最后一个tick不等于原数据的最后一个\n\n      if (ticks[ticks.length - 1] !== last) {\n        if (ticks.length >= tickCount) {\n          // 如果当前的tick个数满足要求\n          ticks[ticks.length - 1] = last;\n        } else {\n          // 不满足tickCount则直接加入最后一个\n          ticks.push(last);\n        }\n      }\n\n      return ticks;\n    });\n\n    // 认为是nice的刻度\n    var SNAP_COUNT_ARRAY = [1, 1.2, 1.5, 2, 2.2, 2.4, 2.5, 3, 4, 5, 6, 7.5, 8, 10];\n    var DEFAULT_COUNT$1 = 5; // 默认刻度值\n\n    var LinearTick = (function (cfg) {\n      var _ref = cfg || {},\n          tickCount = _ref.tickCount,\n          tickInterval = _ref.tickInterval;\n\n      var _ref2 = cfg || {},\n          min = _ref2.min,\n          max = _ref2.max;\n\n      min = isNaN(min) ? 0 : min;\n      max = isNaN(max) ? 0 : max;\n      var count = tickCount && tickCount >= 2 ? tickCount : DEFAULT_COUNT$1; // 计算interval， 优先取tickInterval\n\n      var interval = tickInterval || getBestInterval({\n        tickCount: count,\n        max: max,\n        min: min\n      }); // 通过interval计算最小tick\n\n      var minTick = Math.floor(min / interval) * interval; // 如果指定了tickInterval, count 需要根据指定的tickInterval来算计\n\n      if (tickInterval) {\n        var intervalCount = Math.abs(Math.ceil((max - minTick) / tickInterval)) + 1; // tickCount 作为最小 count 处理\n\n        count = Math.max(count, intervalCount);\n      }\n\n      var ticks = [];\n      var tickLength = 0;\n      var fixedLength = getFixedLength(interval);\n\n      while (tickLength < count) {\n        ticks.push(toFixed(minTick + tickLength * interval, fixedLength));\n        tickLength++;\n      }\n\n      return ticks;\n    });\n    var DECIMAL_LENGTH = 12;\n\n    function getFactor(number) {\n      // 取正数\n      number = Math.abs(number);\n      var factor = 1;\n\n      if (number === 0) {\n        return factor;\n      } // 小于1,逐渐放大\n\n\n      if (number < 1) {\n        var count = 0;\n\n        while (number < 1) {\n          factor = factor / 10;\n          number = number * 10;\n          count++;\n        } // 浮点数计算出现问题\n\n\n        if (factor.toString().length > DECIMAL_LENGTH) {\n          factor = parseFloat(factor.toFixed(count));\n        }\n\n        return factor;\n      } // 大于10逐渐缩小\n\n\n      while (number > 10) {\n        factor = factor * 10;\n        number = number / 10;\n      }\n\n      return factor;\n    } // 获取最佳匹配刻度\n\n\n    function getBestInterval(_ref3) {\n      var tickCount = _ref3.tickCount,\n          min = _ref3.min,\n          max = _ref3.max;\n\n      // 如果最大最小相等，则直接按1处理\n      if (min === max) {\n        return 1 * getFactor(max);\n      } // 1.计算平均刻度\b间隔\n\n\n      var avgInterval = (max - min) / (tickCount - 1); // 2.数据标准归一化 映射到[1-10]区间\n\n      var factor = getFactor(avgInterval);\n      var calInterval = avgInterval / factor;\n      var calMax = max / factor;\n      var calMin = min / factor; // 根据平均值推算最逼近刻度值\n\n      var similarityIndex = 0;\n\n      for (var index = 0; index < SNAP_COUNT_ARRAY.length; index++) {\n        var item = SNAP_COUNT_ARRAY[index];\n\n        if (calInterval <= item) {\n          similarityIndex = index;\n          break;\n        }\n      }\n\n      var similarityInterval = getInterval(similarityIndex, tickCount, calMin, calMax); // 小数点位数还原到数据的位数, 因为similarityIndex有可能是小数，所以需要保留similarityIndex自己的小数位数\n\n      var fixedLength = getFixedLength(similarityInterval) + getFixedLength(factor);\n      return toFixed(similarityInterval * factor, fixedLength);\n    }\n\n    function getInterval(startIndex, tickCount, min, max) {\n      var verify = false;\n      var interval = SNAP_COUNT_ARRAY[startIndex]; // 刻度值校验，如果不满足，循环下去\n\n      for (var i = startIndex; i < SNAP_COUNT_ARRAY.length; i++) {\n        if (intervalIsVerify({\n          interval: SNAP_COUNT_ARRAY[i],\n          tickCount: tickCount,\n          max: max,\n          min: min\n        })) {\n          // 有符合条件的interval\n          interval = SNAP_COUNT_ARRAY[i];\n          verify = true;\n          break;\n        }\n      } // 如果不满足, 依次缩小10倍，再计算\n\n\n      if (!verify) {\n        return 10 * getInterval(0, tickCount, min / 10, max / 10);\n      }\n\n      return interval;\n    } // 刻度是否满足展示需求\n\n\n    function intervalIsVerify(_ref4) {\n      var interval = _ref4.interval,\n          tickCount = _ref4.tickCount,\n          max = _ref4.max,\n          min = _ref4.min;\n      var minTick = Math.floor(min / interval) * interval;\n\n      if (minTick + (tickCount - 1) * interval >= max) {\n        return true;\n      }\n\n      return false;\n    } // 计算小数点应该保留的位数\n\n\n    function getFixedLength(num) {\n      var str = num.toString();\n      var index = str.indexOf('.');\n      var indexOfExp = str.indexOf('e-');\n      var length = indexOfExp >= 0 ? parseInt(str.substr(indexOfExp + 2), 10) : str.substr(index + 1).length;\n\n      if (length > 20) {\n        // 最多保留20位小数\n        length = 20;\n      }\n\n      return length;\n    } // @antv/util fixedbase不支持科学计数法的判断，需要提mr\n\n\n    function toFixed(v, length) {\n      return parseFloat(v.toFixed(length));\n    }\n\n    var Linear$1 = getClass('linear');\n    var Identity$1 = getClass('identity');\n    var Category$1 = getClass('category');\n    var TimeCat$1 = getClass('timeCat'); // 覆盖0.3.x的 cat 方法\n\n    registerTickMethod('cat', CatTick);\n    registerTickMethod('time-cat', CatTick); // 覆盖linear 度量的tick算法\n\n    registerTickMethod('wilkinson-extended', LinearTick);\n    Scale.Linear = Linear$1;\n    Scale.Identity = Identity$1;\n    Scale.Category = Category$1;\n    Scale.Cat = Category$1;\n    Scale.TimeCat = TimeCat$1;\n\n    function isFullCircle(coord) {\n      if (!coord.isPolar) {\n        return false;\n      }\n\n      var startAngle = coord.startAngle;\n      var endAngle = coord.endAngle;\n\n      if (!isNil(startAngle) && !isNil(endAngle) && endAngle - startAngle < Math.PI * 2) {\n        return false;\n      }\n\n      return true;\n    }\n\n    function clearObj(obj) {\n      Object.keys(obj).forEach(function (key) {\n        delete obj[key];\n      });\n    }\n\n    var ScaleController = /*#__PURE__*/function () {\n      function ScaleController(cfg) {\n        // defs 列定义\n        this.defs = {}; // 已经实例化的scale\n\n        this.scales = {};\n        mix(this, cfg);\n      }\n\n      var _proto = ScaleController.prototype;\n\n      _proto.setFieldDef = function setFieldDef(field, cfg) {\n        var defs = this.defs;\n\n        if (isObject(field)) {\n          mix(defs, field);\n        } else {\n          defs[field] = cfg;\n        } // 因为可能同时变更多个scale，所以要把所有已实例化的scale都更新下\n\n\n        this.updateScales();\n      };\n\n      _proto._getDef = function _getDef(field) {\n        var defs = this.defs;\n        var def = null;\n\n        if (Global.scales[field] || defs[field]) {\n          def = mix({}, Global.scales[field]);\n          each(defs[field], function (v, k) {\n            if (isNil(v)) {\n              delete def[k];\n            } else {\n              def[k] = v;\n            }\n          });\n        }\n\n        return def;\n      };\n\n      _proto._getDefaultType = function _getDefaultType(field, data, def) {\n        if (def && def.type) {\n          return def.type;\n        }\n\n        var type = 'linear';\n        var value = firstValue(data, field);\n\n        if (isArray(value)) {\n          value = value[0];\n        }\n\n        if (isString(value)) {\n          type = 'cat';\n        }\n\n        return type;\n      };\n\n      _proto._getScaleDef = function _getScaleDef(type, field, data, def) {\n        var values$1;\n\n        if (def && def.values) {\n          values$1 = def.values;\n        } else {\n          values$1 = values(data, field);\n        }\n\n        var cfg = {\n          field: field,\n          values: values$1\n        };\n\n        if (type !== 'cat' && type !== 'timeCat') {\n          if (!def || !(def.min && def.max)) {\n            var _Array$getRange = getRange$1(values$1),\n                min = _Array$getRange.min,\n                max = _Array$getRange.max;\n\n            cfg.min = min;\n            cfg.max = max;\n            cfg.nice = true;\n          }\n        } else {\n          cfg.isRounding = false; // used for tickCount calculation\n        }\n\n        return cfg;\n      } // 调整range，为了让图形居中\n      ;\n\n      _proto._adjustRange = function _adjustRange(type, cfg) {\n        var range = cfg.range,\n            values = cfg.values; // 如果是线性, 或者有自定义range都不处理\n\n        if (type === 'linear' || range || !values) {\n          return cfg;\n        }\n\n        var count = values.length; // 单只有一条数据时，在中间显示\n\n        if (count === 1) {\n          cfg.range = [0.5, 1];\n        } else {\n          var chart = this.chart;\n          var coord = chart.get('coord');\n          var widthRatio = Global.widthRatio.multiplePie;\n          var offset = 0;\n\n          if (isFullCircle(coord)) {\n            if (!coord.transposed) {\n              cfg.range = [0, 1 - 1 / count];\n            } else {\n              offset = 1 / count * widthRatio;\n              cfg.range = [offset / 2, 1 - offset / 2];\n            }\n          } else {\n            // 为了让图形居中，所以才设置range\n            offset = 1 / count * 0.5; // 这里可能用0.25会更合理\n\n            cfg.range = [offset, 1 - offset];\n          }\n        }\n\n        return cfg;\n      };\n\n      _proto._getScaleCfg = function _getScaleCfg(field, data) {\n        var self = this;\n\n        var def = self._getDef(field);\n\n        if (!data || !data.length) {\n          if (def && def.type) {\n            def.field = field;\n            return {\n              type: def.type,\n              cfg: def\n            };\n          }\n\n          return {\n            type: 'identity',\n            cfg: {\n              value: field,\n              field: field.toString(),\n              values: [field]\n            }\n          };\n        }\n\n        var firstObj = data[0];\n        var firstValue$1 = firstObj[field];\n\n        if (firstValue$1 === null) {\n          firstValue$1 = firstValue(data, field);\n        }\n\n        if (isNumber(field) || isNil(firstValue$1) && !def) {\n          return {\n            type: 'identity',\n            cfg: {\n              value: field,\n              field: field.toString(),\n              values: [field]\n            }\n          };\n        }\n\n        var type = self._getDefaultType(field, data, def);\n\n        var cfg = self._getScaleDef(type, field, data, def);\n\n        def && mix(cfg, def);\n        cfg = this._adjustRange(type, cfg);\n        return {\n          type: type,\n          cfg: cfg\n        };\n      };\n\n      _proto.createScale = function createScale(field, data) {\n        var scales = this.scales;\n\n        var _this$_getScaleCfg = this._getScaleCfg(field, data),\n            type = _this$_getScaleCfg.type,\n            cfg = _this$_getScaleCfg.cfg;\n\n        var scale = scales[field]; // 如果已经存在，且类型相等时直接返回\n\n        if (scale && scale.type === type) {\n          scale.change(cfg);\n          return scale;\n        }\n\n        var Scale = getClass(type);\n        var newScale = new Scale(cfg);\n        scales[field] = newScale;\n        return newScale;\n      };\n\n      _proto._updateScale = function _updateScale(scale) {\n        var field = scale.field; // 因为每个field的数据都会不同\n\n        var data = this.chart._getScaleData(field);\n\n        var _this$_getScaleCfg2 = this._getScaleCfg(field, data),\n            cfg = _this$_getScaleCfg2.cfg;\n\n        scale.change(cfg);\n      };\n\n      _proto.updateScales = function updateScales() {\n        var _this = this;\n\n        var scales = this.scales; // 修改完列定义后，需要更新已经实例化的scale\n        // 如果是还没有实例化的，在geom初始化的时候会被实例化，所以这里可以不用更新\n\n        each(scales, function (scale) {\n          _this._updateScale(scale);\n        });\n      } // 调整scale从0开始\n      ;\n\n      _proto.adjustStartZero = function adjustStartZero(scale) {\n        var defs = this.defs;\n        var field = scale.field,\n            min = scale.min,\n            max = scale.max; // 如果有定义，则不处理\n\n        if (defs[field] && defs[field].min) {\n          return;\n        }\n\n        if (min > 0) {\n          scale.change({\n            min: 0\n          });\n        } else if (max < 0) {\n          scale.change({\n            max: 0\n          });\n        }\n      };\n\n      _proto.clear = function clear() {\n        // this.defs = {};\n        // this.scales = {};\n        clearObj(this.defs);\n        clearObj(this.scales);\n        this.data = null;\n      };\n\n      return ScaleController;\n    }();\n\n    var Abastract = /*#__PURE__*/function () {\n      var _proto = Abastract.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        /**\n         * ticks\n         * @type {Array}\n         */\n        this.ticks = [];\n        /**\n         * the configuration for tickLine\n         * @type {Object}\n         */\n\n        this.tickLine = {};\n        /**\n         * the direction of ticks, 1 means clockwise\n         * @type {Number}\n         */\n\n        this.offsetFactor = 1;\n        /**\n         * the top container\n         * @type {container}\n         */\n\n        this.frontContainer = null;\n        /**\n         * the back container\n         * @type {[type]}\n         */\n\n        this.backContainer = null;\n        /**\n         * points for draw grid line\n         * @type {Array}\n         */\n\n        this.gridPoints = [];\n      };\n\n      function Abastract(cfg) {\n        this._initDefaultCfg();\n\n        mix(this, cfg);\n        this.draw();\n      }\n\n      _proto.draw = function draw() {\n        var line = this.line,\n            tickLine = this.tickLine,\n            label = this.label,\n            grid = this.grid;\n        grid && this.drawGrid(grid); // draw the grid lines\n\n        tickLine && this.drawTicks(tickLine); // draw the tickLine\n\n        line && this.drawLine(line); // draw axis line\n\n        label && this.drawLabels(); // draw ticks\n      };\n\n      _proto.drawTicks = function drawTicks(tickCfg) {\n        var self = this;\n        var ticks = self.ticks;\n        var length = tickCfg.length;\n        var container = self.getContainer(tickCfg.top);\n        each(ticks, function (tick) {\n          var start = self.getOffsetPoint(tick.value);\n          var end = self.getSidePoint(start, length);\n          var shape = container.addShape('line', {\n            className: 'axis-tick',\n            attrs: mix({\n              x1: start.x,\n              y1: start.y,\n              x2: end.x,\n              y2: end.y\n            }, tickCfg)\n          });\n          shape._id = self._id + '-ticks';\n        });\n      };\n\n      _proto.drawLabels = function drawLabels() {\n        var self = this;\n        var labelOffset = self.labelOffset;\n        var labels = self.labels;\n        each(labels, function (labelShape) {\n          var container = self.getContainer(labelShape.get('top'));\n          var start = self.getOffsetPoint(labelShape.get('value'));\n\n          var _self$getSidePoint = self.getSidePoint(start, labelOffset),\n              x = _self$getSidePoint.x,\n              y = _self$getSidePoint.y;\n\n          labelShape.attr(mix({\n            x: x,\n            y: y\n          }, self.getTextAlignInfo(start, labelOffset), labelShape.get('textStyle')));\n          labelShape._id = self._id + '-' + labelShape.attr('text');\n          container.add(labelShape);\n        });\n      };\n\n      _proto.drawLine = function drawLine() {};\n\n      _proto.drawGrid = function drawGrid(grid) {\n        var self = this;\n        var gridPoints = self.gridPoints,\n            ticks = self.ticks;\n        var gridCfg = grid;\n        var count = gridPoints.length;\n        each(gridPoints, function (subPoints, index) {\n          if (isFunction(grid)) {\n            var tick = ticks[index] || {};\n            var executedGrid = grid(tick.text, index, count);\n            gridCfg = executedGrid ? mix({}, Global._defaultAxis.grid, executedGrid) : null;\n          }\n\n          if (gridCfg) {\n            var type = gridCfg.type; // has two types: 'line' and 'arc'\n\n            var points = subPoints.points;\n            var container = self.getContainer(gridCfg.top);\n            var shape;\n\n            if (type === 'arc') {\n              var center = self.center,\n                  startAngle = self.startAngle,\n                  endAngle = self.endAngle;\n              var radius = Vector2.length([points[0].x - center.x, points[0].y - center.y]);\n              shape = container.addShape('Arc', {\n                className: 'axis-grid',\n                attrs: mix({\n                  x: center.x,\n                  y: center.y,\n                  startAngle: startAngle,\n                  endAngle: endAngle,\n                  r: radius\n                }, gridCfg)\n              });\n            } else {\n              shape = container.addShape('Polyline', {\n                className: 'axis-grid',\n                attrs: mix({\n                  points: points\n                }, gridCfg)\n              });\n            }\n\n            shape._id = subPoints._id;\n          }\n        });\n      };\n\n      _proto.getOffsetPoint = function getOffsetPoint() {};\n\n      _proto.getAxisVector = function getAxisVector() {};\n\n      _proto.getOffsetVector = function getOffsetVector(point, offset) {\n        var self = this;\n        var axisVector = self.getAxisVector(point);\n        var normal = Vector2.normalize([], axisVector);\n        var factor = self.offsetFactor;\n        var verticalVector = [normal[1] * -1 * factor, normal[0] * factor];\n        return Vector2.scale([], verticalVector, offset);\n      };\n\n      _proto.getSidePoint = function getSidePoint(point, offset) {\n        var self = this;\n        var offsetVector = self.getOffsetVector(point, offset);\n        return {\n          x: point.x + offsetVector[0],\n          y: point.y + offsetVector[1]\n        };\n      };\n\n      _proto.getTextAlignInfo = function getTextAlignInfo(point, offset) {\n        var self = this;\n        var offsetVector = self.getOffsetVector(point, offset);\n        var align;\n        var baseLine;\n\n        if (offsetVector[0] > 0) {\n          align = 'left';\n        } else if (offsetVector[0] < 0) {\n          align = 'right';\n        } else {\n          align = 'center';\n        }\n\n        if (offsetVector[1] > 0) {\n          baseLine = 'top';\n        } else if (offsetVector[1] < 0) {\n          baseLine = 'bottom';\n        } else {\n          baseLine = 'middle';\n        }\n\n        return {\n          textAlign: align,\n          textBaseline: baseLine\n        };\n      };\n\n      _proto.getContainer = function getContainer(isTop) {\n        var frontContainer = this.frontContainer,\n            backContainer = this.backContainer;\n        return isTop ? frontContainer : backContainer;\n      };\n\n      return Abastract;\n    }();\n\n    var Line = /*#__PURE__*/function (_Abstract) {\n      _inheritsLoose(Line, _Abstract);\n\n      function Line() {\n        return _Abstract.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        _Abstract.prototype._initDefaultCfg.call(this);\n\n        this.start = null;\n        this.end = null;\n      };\n\n      _proto.getOffsetPoint = function getOffsetPoint(value) {\n        var start = this.start,\n            end = this.end;\n        return {\n          x: start.x + (end.x - start.x) * value,\n          y: start.y + (end.y - start.y) * value\n        };\n      };\n\n      _proto.getAxisVector = function getAxisVector() {\n        var start = this.start,\n            end = this.end;\n        return [end.x - start.x, end.y - start.y];\n      };\n\n      _proto.drawLine = function drawLine(lineCfg) {\n        var container = this.getContainer(lineCfg.top);\n        var start = this.start,\n            end = this.end;\n        container.addShape('line', {\n          className: 'axis-line',\n          attrs: mix({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          }, lineCfg)\n        });\n      };\n\n      return Line;\n    }(Abastract);\n\n    Abastract.Line = Line;\n\n    function formatTicks(ticks) {\n      var tmp = ticks.slice(0);\n\n      if (tmp.length > 0) {\n        var first = tmp[0];\n        var last = tmp[tmp.length - 1];\n\n        if (first.value !== 0) {\n          tmp.unshift({\n            value: 0\n          });\n        }\n\n        if (last.value !== 1) {\n          tmp.push({\n            value: 1\n          });\n        }\n      }\n\n      return tmp;\n    }\n\n    var AxisController = /*#__PURE__*/function () {\n      function AxisController(cfg) {\n        this.axisCfg = {};\n        this.frontPlot = null;\n        this.backPlot = null;\n        this.axes = {}; // store the axes's options\n\n        mix(this, cfg);\n      }\n\n      var _proto = AxisController.prototype;\n\n      _proto._isHide = function _isHide(field) {\n        var axisCfg = this.axisCfg;\n        return !axisCfg || axisCfg[field] === false;\n      };\n\n      _proto._getLinePosition = function _getLinePosition(scale, dimType, index, transposed) {\n        var position = '';\n        var field = scale.field;\n        var axisCfg = this.axisCfg;\n\n        if (axisCfg[field] && axisCfg[field].position) {\n          position = axisCfg[field].position;\n        } else if (dimType === 'x') {\n          position = transposed ? 'left' : 'bottom';\n        } else if (dimType === 'y') {\n          position = index ? 'right' : 'left';\n\n          if (transposed) {\n            position = 'bottom';\n          }\n        }\n\n        return position;\n      };\n\n      _proto._getLineCfg = function _getLineCfg(coord, dimType, position) {\n        var start;\n        var end;\n        var factor = 1; // Mark clockwise or counterclockwise\n\n        if (dimType === 'x') {\n          start = {\n            x: 0,\n            y: 0\n          };\n          end = {\n            x: 1,\n            y: 0\n          };\n        } else {\n          if (position === 'right') {\n            // there will be several y axes\n            start = {\n              x: 1,\n              y: 0\n            };\n            end = {\n              x: 1,\n              y: 1\n            };\n          } else {\n            start = {\n              x: 0,\n              y: 0\n            };\n            end = {\n              x: 0,\n              y: 1\n            };\n            factor = -1;\n          }\n        }\n\n        if (coord.transposed) {\n          factor *= -1;\n        }\n\n        return {\n          offsetFactor: factor,\n          start: coord.convertPoint(start),\n          end: coord.convertPoint(end)\n        };\n      };\n\n      _proto._getCircleCfg = function _getCircleCfg(coord) {\n        return {\n          startAngle: coord.startAngle,\n          endAngle: coord.endAngle,\n          center: coord.center,\n          radius: coord.circleRadius\n        };\n      };\n\n      _proto._getRadiusCfg = function _getRadiusCfg(coord) {\n        var transposed = coord.transposed;\n        var start;\n        var end;\n\n        if (transposed) {\n          start = {\n            x: 0,\n            y: 0\n          };\n          end = {\n            x: 1,\n            y: 0\n          };\n        } else {\n          start = {\n            x: 0,\n            y: 0\n          };\n          end = {\n            x: 0,\n            y: 1\n          };\n        }\n\n        return {\n          offsetFactor: -1,\n          start: coord.convertPoint(start),\n          end: coord.convertPoint(end)\n        };\n      };\n\n      _proto._getAxisCfg = function _getAxisCfg(coord, scale, verticalScale, dimType, defaultCfg) {\n        var _this = this;\n\n        var self = this;\n        var axisCfg = this.axisCfg;\n        var ticks = scale.getTicks();\n        var cfg = deepMix({\n          ticks: ticks,\n          frontContainer: this.frontPlot,\n          backContainer: this.backPlot\n        }, defaultCfg, axisCfg[scale.field]);\n        var labels = [];\n        var label = cfg.label;\n        var count = ticks.length;\n        var maxWidth = 0;\n        var maxHeight = 0;\n        var labelCfg = label;\n        each(ticks, function (tick, index) {\n          if (isFunction(label)) {\n            var executedLabel = label(tick.text, index, count);\n            labelCfg = executedLabel ? mix({}, Global._defaultAxis.label, executedLabel) : null;\n          }\n\n          if (labelCfg) {\n            var textStyle = {};\n\n            if (labelCfg.textAlign) {\n              textStyle.textAlign = labelCfg.textAlign;\n            }\n\n            if (labelCfg.textBaseline) {\n              textStyle.textBaseline = labelCfg.textBaseline;\n            }\n\n            var container = labelCfg.top ? _this.frontPlot : _this.backPlot;\n            var axisLabel = container.addShape('text', {\n              className: 'axis-label',\n              aria: false,\n              attrs: mix({\n                x: 0,\n                y: 0,\n                text: tick.text,\n                fontFamily: self.chart.get('canvas').get('fontFamily')\n              }, labelCfg),\n              value: tick.value,\n              textStyle: textStyle,\n              top: labelCfg.top,\n              context: self.chart.get('canvas').get('context')\n            });\n            labels.push(axisLabel);\n\n            var _axisLabel$getBBox = axisLabel.getBBox(),\n                width = _axisLabel$getBBox.width,\n                height = _axisLabel$getBBox.height;\n\n            maxWidth = Math.max(maxWidth, width);\n            maxHeight = Math.max(maxHeight, height);\n          }\n        });\n        cfg.labels = labels;\n        cfg.maxWidth = maxWidth;\n        cfg.maxHeight = maxHeight;\n        return cfg;\n      };\n\n      _proto._createAxis = function _createAxis(coord, scale, verticalScale, dimType, index) {\n        if (index === void 0) {\n          index = '';\n        }\n\n        var self = this;\n        var coordType = coord.type;\n        var transposed = coord.transposed;\n        var type;\n        var key;\n        var defaultCfg;\n\n        if (coordType === 'cartesian' || coordType === 'rect') {\n          var position = self._getLinePosition(scale, dimType, index, transposed);\n\n          defaultCfg = Global.axis[position];\n          defaultCfg.position = position;\n          type = 'Line';\n          key = position;\n        } else {\n          if (dimType === 'x' && !transposed || dimType === 'y' && transposed) {\n            defaultCfg = Global.axis.circle;\n            type = 'Circle';\n            key = 'circle';\n          } else {\n            defaultCfg = Global.axis.radius;\n            type = 'Line';\n            key = 'radius';\n          }\n        }\n\n        var cfg = self._getAxisCfg(coord, scale, verticalScale, dimType, defaultCfg);\n\n        cfg.type = type;\n        cfg.dimType = dimType;\n        cfg.verticalScale = verticalScale;\n        cfg.index = index;\n        this.axes[key] = cfg;\n      };\n\n      _proto.createAxis = function createAxis(coord, xScale, yScales) {\n        var self = this;\n\n        if (xScale && !self._isHide(xScale.field)) {\n          self._createAxis(coord, xScale, yScales[0], 'x');\n        }\n\n        each(yScales, function (yScale, index) {\n          if (!self._isHide(yScale.field)) {\n            self._createAxis(coord, yScale, xScale, 'y', index);\n          }\n        });\n        var axes = this.axes;\n        var chart = self.chart;\n\n        if (chart._isAutoPadding()) {\n          var userPadding = parsePadding(chart.get('padding'));\n          var appendPadding = parsePadding(chart.get('appendPadding'));\n          var legendRange = chart.get('legendRange') || {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n          };\n          var padding = [userPadding[0] === 'auto' ? legendRange.top + appendPadding[0] * 2 : userPadding[0], userPadding[1] === 'auto' ? legendRange.right + appendPadding[1] : userPadding[1], userPadding[2] === 'auto' ? legendRange.bottom + appendPadding[2] : userPadding[2], userPadding[3] === 'auto' ? legendRange.left + appendPadding[3] : userPadding[3]];\n\n          if (coord.isPolar) {\n            var circleAxis = axes.circle;\n\n            if (circleAxis) {\n              var maxHeight = circleAxis.maxHeight,\n                  maxWidth = circleAxis.maxWidth,\n                  labelOffset = circleAxis.labelOffset;\n              padding[0] += maxHeight + labelOffset;\n              padding[1] += maxWidth + labelOffset;\n              padding[2] += maxHeight + labelOffset;\n              padding[3] += maxWidth + labelOffset;\n            }\n          } else {\n            if (axes.right && userPadding[1] === 'auto') {\n              var _axes$right = axes.right,\n                  _maxWidth = _axes$right.maxWidth,\n                  _labelOffset = _axes$right.labelOffset;\n              padding[1] += _maxWidth + _labelOffset;\n            }\n\n            if (axes.left && userPadding[3] === 'auto') {\n              var _axes$left = axes.left,\n                  _maxWidth2 = _axes$left.maxWidth,\n                  _labelOffset2 = _axes$left.labelOffset;\n              padding[3] += _maxWidth2 + _labelOffset2;\n            }\n\n            if (axes.bottom && userPadding[2] === 'auto') {\n              var _axes$bottom = axes.bottom,\n                  _maxHeight = _axes$bottom.maxHeight,\n                  _labelOffset3 = _axes$bottom.labelOffset;\n              padding[2] += _maxHeight + _labelOffset3;\n            }\n          }\n\n          chart.set('_padding', padding);\n\n          chart._updateLayout(padding);\n        }\n\n        each(axes, function (axis) {\n          var type = axis.type,\n              grid = axis.grid,\n              verticalScale = axis.verticalScale,\n              ticks = axis.ticks,\n              dimType = axis.dimType,\n              position = axis.position,\n              index = axis.index;\n          var appendCfg;\n\n          if (coord.isPolar) {\n            if (type === 'Line') {\n              appendCfg = self._getRadiusCfg(coord);\n            } else if (type === 'Circle') {\n              appendCfg = self._getCircleCfg(coord);\n            }\n          } else {\n            appendCfg = self._getLineCfg(coord, dimType, position);\n          }\n\n          if (grid && verticalScale) {\n            var gridPoints = [];\n            var verticalTicks = formatTicks(verticalScale.getTicks());\n            each(ticks, function (tick) {\n              var subPoints = [];\n              each(verticalTicks, function (verticalTick) {\n                var x = dimType === 'x' ? tick.value : verticalTick.value;\n                var y = dimType === 'x' ? verticalTick.value : tick.value;\n\n                if (x >= 0 && x <= 1 && y >= 0 && y <= 1) {\n                  var point = coord.convertPoint({\n                    x: x,\n                    y: y\n                  });\n                  subPoints.push(point);\n                }\n              });\n              gridPoints.push({\n                points: subPoints,\n                _id: 'axis-' + dimType + index + '-grid-' + tick.tickValue\n              });\n            });\n            axis.gridPoints = gridPoints;\n\n            if (coord.isPolar) {\n              axis.center = coord.center;\n              axis.startAngle = coord.startAngle;\n              axis.endAngle = coord.endAngle;\n            }\n          }\n\n          appendCfg._id = 'axis-' + dimType;\n\n          if (!isNil(index)) {\n            appendCfg._id = 'axis-' + dimType + index;\n          }\n\n          new Abastract[type](mix(axis, appendCfg));\n        });\n      };\n\n      _proto.clear = function clear() {\n        this.axes = {};\n        this.frontPlot.clear();\n        this.backPlot.clear();\n      };\n\n      return AxisController;\n    }();\n\n    var calcDirection = function calcDirection(start, end) {\n      var xDistance = end.x - start.x;\n      var yDistance = end.y - start.y; // x 的距离大于y 说明是横向，否则就是纵向\n\n      if (Math.abs(xDistance) > Math.abs(yDistance)) {\n        return xDistance > 0 ? 'right' : 'left';\n      }\n\n      return yDistance > 0 ? 'down' : 'up';\n    }; // 计算2点之间的距离\n\n\n    var calcDistance = function calcDistance(point1, point2) {\n      var xDistance = Math.abs(point2.x - point1.x);\n      var yDistance = Math.abs(point2.y - point1.y);\n      return Math.sqrt(xDistance * xDistance + yDistance * yDistance);\n    };\n\n    var getCenter = function getCenter(point1, point2) {\n      var x = point1.x + (point2.x - point1.x) / 2;\n      var y = point1.y + (point2.y - point1.y) / 2;\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var PRESS_DELAY = 250;\n\n    var EventController = /*#__PURE__*/function () {\n      function EventController(_ref) {\n        var _this = this;\n\n        var canvas = _ref.canvas,\n            el = _ref.el;\n\n        _defineProperty(this, \"_click\", function (ev) {\n          var points = convertPoints(ev, _this.canvas);\n          ev.points = points;\n\n          _this.emitEvent('click', ev);\n        });\n\n        _defineProperty(this, \"_start\", function (ev) {\n          var points = convertPoints(ev, _this.canvas);\n\n          if (!points) {\n            return;\n          }\n\n          ev.points = points;\n\n          _this.emitEvent('touchstart', ev); // 防止上次的内容没有清理掉，重新reset下\n\n\n          _this.reset(); // 记录touch start 的时间\n\n\n          _this.startTime = Date.now(); // 记录touch start 的点\n\n          _this.startPoints = points;\n\n          if (points.length > 1) {\n            _this.startDistance = calcDistance(points[0], points[1]);\n            _this.center = getCenter(points[0], points[1]);\n          } else {\n            // 如果touchstart后停顿250ms, 则也触发press事件\n            _this.pressTimeout = setTimeout(function () {\n              // 这里固定触发press事件\n              var eventType = 'press';\n              var direction = 'none';\n              ev.direction = direction;\n\n              _this.emitStart(eventType, ev);\n\n              _this.emitEvent(eventType, ev);\n\n              _this.eventType = eventType;\n              _this.direction = direction;\n            }, PRESS_DELAY);\n          }\n        });\n\n        _defineProperty(this, \"_move\", function (ev) {\n          var points = convertPoints(ev, _this.canvas);\n          if (!points) return;\n\n          _this.clearPressTimeout();\n\n          ev.points = points;\n\n          _this.emitEvent('touchmove', ev);\n\n          var startPoints = _this.startPoints;\n          if (!startPoints) return; // 多指触控\n\n          if (points.length > 1) {\n            // touchstart的距离\n            var startDistance = _this.startDistance;\n            var currentDistance = calcDistance(points[0], points[1]);\n            ev.zoom = currentDistance / startDistance;\n            ev.center = _this.center; // 触发缩放事件\n\n            _this.emitStart('pinch', ev);\n\n            _this.emitEvent('pinch', ev);\n          } else {\n            var deltaX = points[0].x - startPoints[0].x;\n            var deltaY = points[0].y - startPoints[0].y;\n            var direction = _this.direction || calcDirection(startPoints[0], points[0]);\n            _this.direction = direction; // 获取press或者pan的事件类型\n            // press 按住滑动, pan表示平移\n            // 如果start后立刻move，则触发pan, 如果有停顿，则触发press\n\n            var eventType = _this.getEventType(points);\n\n            ev.direction = direction;\n            ev.deltaX = deltaX;\n            ev.deltaY = deltaY;\n\n            _this.emitStart(eventType, ev);\n\n            _this.emitEvent(eventType, ev); // 记录最后2次move的时间和坐标，为了给swipe事件用\n\n\n            var prevMoveTime = _this.lastMoveTime;\n            var now = Date.now(); // 最后2次的时间间隔一定要大于0，否则swipe没发计算\n\n            if (now - prevMoveTime > 0) {\n              _this.prevMoveTime = prevMoveTime;\n              _this.prevMovePoints = _this.lastMovePoints;\n              _this.lastMoveTime = now;\n              _this.lastMovePoints = points;\n            }\n          }\n        });\n\n        _defineProperty(this, \"_end\", function (ev) {\n          _this.emitEnd(ev);\n\n          _this.emitEvent('touchend', ev); // swipe事件处理, 在touchend之后触发\n\n\n          var lastMoveTime = _this.lastMoveTime;\n          var now = Date.now(); // 做这个判断是为了最后一次touchmove后到end前，还有一个停顿的过程\n          // 100 是拍的一个值，理论这个值会很短，一般不卡顿的话在10ms以内\n\n          if (now - lastMoveTime < 100) {\n            var prevMoveTime = _this.prevMoveTime || _this.startTime;\n            var intervalTime = lastMoveTime - prevMoveTime; // 时间间隔一定要大于0, 否则计算没意义\n\n            if (intervalTime > 0) {\n              var prevMovePoints = _this.prevMovePoints || _this.startPoints;\n              var lastMovePoints = _this.lastMovePoints; // move速率\n\n              var velocity = calcDistance(prevMovePoints[0], lastMovePoints[0]) / intervalTime; // 0.3 是参考hammerjs的设置\n\n              if (velocity > 0.3) {\n                ev.velocity = velocity;\n                ev.direction = calcDirection(prevMovePoints[0], lastMovePoints[0]);\n\n                _this.emitEvent('swipe', ev);\n              }\n            }\n          }\n\n          _this.reset();\n\n          var touches = ev.touches; // 当多指只释放了1指时也会触发end, 这时重新触发一次start\n\n          if (touches && touches.length > 0) {\n            _this._start(ev);\n          }\n        });\n\n        _defineProperty(this, \"_cancel\", function (ev) {\n          _this.emitEvent('touchcancel', ev);\n\n          _this.reset();\n        });\n\n        // canvasEl\n        this.canvas = canvas;\n        this.delegateEvent(el); // 用来记录当前触发的事件\n\n        this.processEvent = {};\n      }\n\n      var _proto = EventController.prototype;\n\n      _proto.delegateEvent = function delegateEvent(canvasEl) {\n        // 代理这几个事件\n        canvasEl.addEventListener('click', this._click);\n        canvasEl.addEventListener('touchstart', this._start);\n        canvasEl.addEventListener('touchmove', this._move);\n        canvasEl.addEventListener('touchend', this._end);\n        canvasEl.addEventListener('touchcancel', this._cancel);\n      };\n\n      _proto.emitEvent = function emitEvent(type, ev) {\n        var canvas = this.canvas;\n        canvas.emit(type, ev);\n      };\n\n      _proto.getEventType = function getEventType(points) {\n        var eventType = this.eventType,\n            canvas = this.canvas,\n            startTime = this.startTime,\n            startPoints = this.startPoints;\n\n        if (eventType) {\n          return eventType;\n        }\n\n        var type;\n        var panEventListeners = canvas.__events.pan; // 如果没有pan事件的监听，默认都是press\n\n        if (!panEventListeners || !panEventListeners.length) {\n          type = 'press';\n        } else {\n          // 如果有pan事件的处理，press则需要停顿250ms, 且移动距离小于10\n          var now = Date.now();\n\n          if (now - startTime > PRESS_DELAY && calcDistance(startPoints[0], points[0]) < 10) {\n            type = 'press';\n          } else {\n            type = 'pan';\n          }\n        }\n\n        this.eventType = type;\n        return type;\n      };\n\n      _proto.enable = function enable(eventType) {\n        this.processEvent[eventType] = true;\n      } // 是否进行中的事件\n      ;\n\n      _proto.isProcess = function isProcess(eventType) {\n        return this.processEvent[eventType];\n      } // 触发start事件\n      ;\n\n      _proto.emitStart = function emitStart(type, ev) {\n        if (this.isProcess(type)) {\n          return;\n        }\n\n        this.enable(type);\n        this.emitEvent(type + \"start\", ev);\n      } // 触发end事件\n      ;\n\n      _proto.emitEnd = function emitEnd(ev) {\n        var _this2 = this;\n\n        var processEvent = this.processEvent;\n        Object.keys(processEvent).forEach(function (type) {\n          _this2.emitEvent(type + \"end\", ev);\n\n          delete processEvent[type];\n        });\n      };\n\n      _proto.clearPressTimeout = function clearPressTimeout() {\n        if (this.pressTimeout) {\n          clearTimeout(this.pressTimeout);\n          this.pressTimeout = 0;\n        }\n      };\n\n      _proto.reset = function reset() {\n        this.clearPressTimeout();\n        this.startTime = 0;\n        this.startPoints = null;\n        this.startDistance = 0;\n        this.direction = null;\n        this.eventType = null;\n        this.pinch = false;\n        this.prevMoveTime = 0;\n        this.prevMovePoints = null;\n        this.lastMoveTime = 0;\n        this.lastMovePoints = null;\n      };\n\n      return EventController;\n    }();\n\n    var CanvasElement = /*#__PURE__*/function (_EventEmit) {\n      _inheritsLoose(CanvasElement, _EventEmit);\n\n      function CanvasElement(ctx) {\n        var _this;\n\n        _this = _EventEmit.call(this) || this;\n        _this.context = ctx; // canvas实际的宽高 (width/height) * pixelRatio\n\n        _this.width = 0;\n        _this.height = 0;\n        _this.style = {};\n        _this.currentStyle = {};\n        _this.attrs = {}; // 用来标识是CanvasElement实例\n\n        _this.isCanvasElement = true;\n        return _this;\n      }\n\n      var _proto = CanvasElement.prototype;\n\n      _proto.getContext = function getContext()\n      /* type */\n      {\n        return this.context;\n      };\n\n      _proto.getBoundingClientRect = function getBoundingClientRect() {\n        var width = this.width;\n        var height = this.height; // 默认都处理成可视窗口的顶部位置\n\n        return {\n          top: 0,\n          right: width,\n          bottom: height,\n          left: 0\n        };\n      };\n\n      _proto.setAttribute = function setAttribute(key, value) {\n        this.attrs[key] = value;\n      };\n\n      _proto.addEventListener = function addEventListener(type, listener) {\n        this.on(type, listener);\n      };\n\n      _proto.removeEventListener = function removeEventListener(type, listener) {\n        this.off(type, listener);\n      };\n\n      _proto.dispatchEvent = function dispatchEvent(type, e) {\n        this.emit(type, e);\n      };\n\n      return CanvasElement;\n    }(EventEmit);\n\n    function supportEventListener(canvas) {\n      if (!canvas) {\n        return false;\n      } // 非 HTMLCanvasElement\n\n\n      if (canvas.nodeType !== 1 || !canvas.nodeName || canvas.nodeName.toLowerCase() !== 'canvas') {\n        return false;\n      } // 微信小程序canvas.getContext('2d')时也是CanvasRenderingContext2D\n      // 也会有ctx.canvas, 而且nodeType也是1，所以还要在看下是否支持addEventListener\n\n\n      var support = false;\n\n      try {\n        canvas.addEventListener('eventTest', function () {\n          support = true;\n        });\n        canvas.dispatchEvent(new Event('eventTest'));\n      } catch (error) {\n        support = false;\n      }\n\n      return support;\n    }\n\n    var CanvasElement$1 = {\n      create: function create(ctx) {\n        if (!ctx) {\n          return null;\n        }\n\n        if (supportEventListener(ctx.canvas)) {\n          return ctx.canvas;\n        }\n\n        return new CanvasElement(ctx);\n      }\n    };\n\n    function _mod(n, m) {\n      return (n % m + m) % m;\n    }\n\n    function _addStop(steps, gradient) {\n      each(steps, function (item) {\n        item = item.split(':');\n        gradient.addColorStop(Number(item[0]), item[1]);\n      });\n    } // the string format: 'l(0) 0:#ffffff 0.5:#7ec2f3 1:#1890ff'\n\n\n    function _parseLineGradient(color, shape, context) {\n      var arr = color.split(' ');\n      var angle = arr[0].slice(2, arr[0].length - 1);\n      angle = _mod(parseFloat(angle) * Math.PI / 180, Math.PI * 2);\n      var steps = arr.slice(1);\n\n      var _shape$getBBox = shape.getBBox(),\n          minX = _shape$getBBox.minX,\n          minY = _shape$getBBox.minY,\n          maxX = _shape$getBBox.maxX,\n          maxY = _shape$getBBox.maxY;\n\n      var start;\n      var end;\n\n      if (angle >= 0 && angle < 0.5 * Math.PI) {\n        start = {\n          x: minX,\n          y: minY\n        };\n        end = {\n          x: maxX,\n          y: maxY\n        };\n      } else if (0.5 * Math.PI <= angle && angle < Math.PI) {\n        start = {\n          x: maxX,\n          y: minY\n        };\n        end = {\n          x: minX,\n          y: maxY\n        };\n      } else if (Math.PI <= angle && angle < 1.5 * Math.PI) {\n        start = {\n          x: maxX,\n          y: maxY\n        };\n        end = {\n          x: minX,\n          y: minY\n        };\n      } else {\n        start = {\n          x: minX,\n          y: maxY\n        };\n        end = {\n          x: maxX,\n          y: minY\n        };\n      }\n\n      var tanTheta = Math.tan(angle);\n      var tanTheta2 = tanTheta * tanTheta;\n      var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n      var y = tanTheta * (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.y;\n      var gradient = context.createLinearGradient(start.x, start.y, x, y);\n\n      _addStop(steps, gradient);\n\n      return gradient;\n    } // the string format: 'r(0.5, 0.5, 0.1) 0:#ffffff 1:#1890ff'\n\n\n    function _parseRadialGradient(color, shape, context) {\n      var arr = color.split(' ');\n      var circleCfg = arr[0].slice(2, arr[0].length - 1);\n      circleCfg = circleCfg.split(',');\n      var fx = parseFloat(circleCfg[0]);\n      var fy = parseFloat(circleCfg[1]);\n      var fr = parseFloat(circleCfg[2]);\n      var steps = arr.slice(1); // if radius is 0, no gradient, stroke with the last color\n\n      if (fr === 0) {\n        var _color = steps[steps.length - 1];\n        return _color.split(':')[1];\n      }\n\n      var _shape$getBBox2 = shape.getBBox(),\n          width = _shape$getBBox2.width,\n          height = _shape$getBBox2.height,\n          minX = _shape$getBBox2.minX,\n          minY = _shape$getBBox2.minY;\n\n      var r = Math.sqrt(width * width + height * height) / 2;\n      var gradient = context.createRadialGradient(minX + width * fx, minY + height * fy, fr * r, minX + width / 2, minY + height / 2, r);\n\n      _addStop(steps, gradient);\n\n      return gradient;\n    }\n\n    function parseStyle(color, shape, context) {\n      if (color[1] === '(') {\n        try {\n          var firstCode = color[0];\n\n          if (firstCode === 'l') {\n            return _parseLineGradient(color, shape, context);\n          } else if (firstCode === 'r') {\n            return _parseRadialGradient(color, shape, context);\n          }\n        } catch (ev) {\n          console.error('error in parsing gradient string, please check if there are any extra whitespaces.');\n          console.error(ev);\n        }\n      }\n\n      return color;\n    }\n\n    var ALIAS_ATTRS_MAP = {\n      stroke: 'strokeStyle',\n      fill: 'fillStyle',\n      opacity: 'globalAlpha'\n    };\n    var SHAPE_ATTRS = ['fillStyle', 'font', 'globalAlpha', 'lineCap', 'lineWidth', 'lineJoin', 'miterLimit', 'shadowBlur', 'shadowColor', 'shadowOffsetX', 'shadowOffsetY', 'strokeStyle', 'textAlign', 'textBaseline', 'lineDash', 'shadow' // 兼容支付宝小程序\n    ];\n    var CLIP_SHAPES = ['circle', 'sector', 'polygon', 'rect', 'polyline'];\n\n    var Element = /*#__PURE__*/function () {\n      var _proto = Element.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        this._attrs = {\n          zIndex: 0,\n          visible: true,\n          destroyed: false\n        };\n      };\n\n      function Element(cfg) {\n        this._initProperties();\n\n        mix(this._attrs, cfg);\n        var attrs = this._attrs.attrs;\n\n        if (attrs) {\n          this.initAttrs(attrs);\n        }\n\n        this.initTransform();\n      }\n\n      _proto.get = function get(name) {\n        return this._attrs[name];\n      };\n\n      _proto.set = function set(name, value) {\n        this._attrs[name] = value;\n      };\n\n      _proto.isGroup = function isGroup() {\n        return this.get('isGroup');\n      };\n\n      _proto.isShape = function isShape() {\n        return this.get('isShape');\n      };\n\n      _proto.initAttrs = function initAttrs(attrs) {\n        this.attr(mix(this.getDefaultAttrs(), attrs));\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {};\n      };\n\n      _proto._setAttr = function _setAttr(name, value) {\n        var attrs = this._attrs.attrs;\n\n        if (name === 'clip') {\n          value = this._setAttrClip(value);\n        } else {\n          var alias = ALIAS_ATTRS_MAP[name];\n\n          if (alias) {\n            attrs[alias] = value;\n          }\n        }\n\n        attrs[name] = value;\n      };\n\n      _proto._getAttr = function _getAttr(name) {\n        return this._attrs.attrs[name];\n      } // _afterAttrsSet() {}\n      ;\n\n      _proto._setAttrClip = function _setAttrClip(clip) {\n        if (clip && CLIP_SHAPES.indexOf(clip._attrs.type) > -1) {\n          if (clip.get('canvas') === null) {\n            clip = Object.assign({}, clip);\n          }\n\n          clip.set('parent', this.get('parent'));\n          clip.set('context', this.get('context'));\n          return clip;\n        }\n\n        return null;\n      };\n\n      _proto.attr = function attr(name, value) {\n        var self = this;\n        if (self.get('destroyed')) return null;\n        var argumentsLen = arguments.length;\n\n        if (argumentsLen === 0) {\n          return self._attrs.attrs;\n        }\n\n        if (isObject(name)) {\n          this._attrs.bbox = null;\n\n          for (var k in name) {\n            self._setAttr(k, name[k]);\n          }\n\n          if (self._afterAttrsSet) {\n            self._afterAttrsSet();\n          }\n\n          return self;\n        }\n\n        if (argumentsLen === 2) {\n          this._attrs.bbox = null;\n\n          self._setAttr(name, value);\n\n          if (self._afterAttrsSet) {\n            self._afterAttrsSet();\n          }\n\n          return self;\n        }\n\n        return self._getAttr(name);\n      };\n\n      _proto.getParent = function getParent() {\n        return this.get('parent');\n      };\n\n      _proto.draw = function draw(context) {\n        if (this.get('destroyed')) {\n          return;\n        }\n\n        if (this.get('visible')) {\n          this.setContext(context);\n          this.drawInner(context);\n          this.restoreContext(context);\n        }\n      };\n\n      _proto.setContext = function setContext(context) {\n        var clip = this._attrs.attrs.clip;\n        context.save();\n\n        if (clip) {\n          clip.resetTransform(context);\n          clip.createPath(context);\n          context.clip();\n        }\n\n        this.resetContext(context);\n        this.resetTransform(context);\n      };\n\n      _proto.restoreContext = function restoreContext(context) {\n        context.restore();\n      };\n\n      _proto.resetContext = function resetContext(context) {\n        var elAttrs = this._attrs.attrs;\n\n        if (!this._attrs.isGroup) {\n          for (var k in elAttrs) {\n            if (SHAPE_ATTRS.indexOf(k) > -1) {\n              var v = elAttrs[k];\n\n              if (k === 'fillStyle' || k === 'strokeStyle') {\n                v = parseStyle(v, this, context);\n              }\n\n              if (k === 'lineDash' && context.setLineDash && isArray(v)) {\n                context.setLineDash(v);\n              } else {\n                context[k] = v;\n              }\n            }\n          }\n        }\n      };\n\n      _proto.hasFill = function hasFill() {\n        return this.get('canFill') && this._attrs.attrs.fillStyle;\n      };\n\n      _proto.hasStroke = function hasStroke() {\n        return this.get('canStroke') && this._attrs.attrs.strokeStyle;\n      };\n\n      _proto.drawInner = function drawInner()\n      /* context */\n      {};\n\n      _proto.show = function show() {\n        this.set('visible', true);\n        return this;\n      };\n\n      _proto.hide = function hide() {\n        this.set('visible', false);\n        return this;\n      };\n\n      _proto.isVisible = function isVisible() {\n        return this.get('visible');\n      };\n\n      _proto.getAriaLabel = function getAriaLabel() {\n        var _this$_attrs = this._attrs,\n            destroyed = _this$_attrs.destroyed,\n            visible = _this$_attrs.visible,\n            isShape = _this$_attrs.isShape,\n            aria = _this$_attrs.aria;\n\n        if (destroyed || !visible || isShape && !aria) {\n          return;\n        }\n\n        return this._getAriaLabel();\n      };\n\n      _proto._getAriaLabel = function _getAriaLabel() {\n        return this._attrs.ariaLabel;\n      };\n\n      _proto._removeFromParent = function _removeFromParent() {\n        var parent = this.get('parent');\n\n        if (parent) {\n          var children = parent.get('children');\n          remove(children, this);\n        }\n\n        return this;\n      };\n\n      _proto.remove = function remove(destroy) {\n        if (destroy) {\n          this.destroy();\n        } else {\n          this._removeFromParent();\n        }\n      };\n\n      _proto.destroy = function destroy() {\n        var destroyed = this.get('destroyed');\n\n        if (destroyed) {\n          return null;\n        }\n\n        this._removeFromParent();\n\n        this._attrs = {};\n        this.set('destroyed', true);\n      };\n\n      _proto.getBBox = function getBBox() {\n        return {\n          minX: 0,\n          maxX: 0,\n          minY: 0,\n          maxY: 0,\n          width: 0,\n          height: 0\n        };\n      };\n\n      _proto.initTransform = function initTransform() {\n        var attrs = this._attrs.attrs || {};\n\n        if (!attrs.matrix) {\n          attrs.matrix = [1, 0, 0, 1, 0, 0];\n        }\n\n        this._attrs.attrs = attrs;\n      };\n\n      _proto.getMatrix = function getMatrix() {\n        return this._attrs.attrs.matrix;\n      };\n\n      _proto.setMatrix = function setMatrix(m) {\n        this._attrs.attrs.matrix = [m[0], m[1], m[2], m[3], m[4], m[5]];\n      };\n\n      _proto.transform = function transform(actions) {\n        var matrix = this._attrs.attrs.matrix;\n        this._attrs.attrs.matrix = Matrix.transform(matrix, actions);\n        return this;\n      };\n\n      _proto.setTransform = function setTransform(actions) {\n        this._attrs.attrs.matrix = [1, 0, 0, 1, 0, 0];\n        return this.transform(actions);\n      };\n\n      _proto.translate = function translate(x, y) {\n        var matrix = this._attrs.attrs.matrix;\n        Matrix.translate(matrix, matrix, [x, y]);\n      };\n\n      _proto.rotate = function rotate(rad) {\n        var matrix = this._attrs.attrs.matrix;\n        Matrix.rotate(matrix, matrix, rad);\n      };\n\n      _proto.scale = function scale(sx, sy) {\n        var matrix = this._attrs.attrs.matrix;\n        Matrix.scale(matrix, matrix, [sx, sy]);\n      };\n\n      _proto.moveTo = function moveTo(x, y) {\n        var cx = this._attrs.x || 0;\n        var cy = this._attrs.y || 0;\n        this.translate(x - cx, y - cy);\n        this.set('x', x);\n        this.set('y', y);\n      };\n\n      _proto.apply = function apply(v) {\n        var m = this._attrs.attrs.matrix;\n        Vector2.transformMat2d(v, v, m);\n        return this;\n      };\n\n      _proto.resetTransform = function resetTransform(context) {\n        var mo = this._attrs.attrs.matrix;\n\n        if (Matrix.isChanged(mo)) {\n          context.transform(mo[0], mo[1], mo[2], mo[3], mo[4], mo[5]);\n        }\n      };\n\n      _proto.isDestroyed = function isDestroyed() {\n        return this.get('destroyed');\n      };\n\n      return Element;\n    }();\n\n    var Shape$2 = /*#__PURE__*/function (_Element) {\n      _inheritsLoose(Shape, _Element);\n\n      function Shape() {\n        return _Element.apply(this, arguments) || this;\n      }\n\n      var _proto = Shape.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        this._attrs = {\n          zIndex: 0,\n          visible: true,\n          destroyed: false,\n          isShape: true,\n          attrs: {}\n        };\n      };\n\n      _proto.getType = function getType() {\n        return this._attrs.type;\n      };\n\n      _proto.drawInner = function drawInner(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        self.createPath(context);\n        var originOpacity = context.globalAlpha;\n\n        if (self.hasFill()) {\n          var fillOpacity = attrs.fillOpacity;\n\n          if (!isNil(fillOpacity) && fillOpacity !== 1) {\n            context.globalAlpha = fillOpacity;\n            context.fill();\n            context.globalAlpha = originOpacity;\n          } else {\n            context.fill();\n          }\n        }\n\n        if (self.hasStroke()) {\n          var lineWidth = attrs.lineWidth;\n\n          if (lineWidth > 0) {\n            var strokeOpacity = attrs.strokeOpacity;\n\n            if (!isNil(strokeOpacity) && strokeOpacity !== 1) {\n              context.globalAlpha = strokeOpacity;\n            }\n\n            context.stroke();\n          }\n        }\n      };\n\n      _proto.getBBox = function getBBox() {\n        var bbox = this._attrs.bbox;\n\n        if (!bbox) {\n          bbox = this.calculateBox();\n\n          if (bbox) {\n            bbox.x = bbox.minX;\n            bbox.y = bbox.minY;\n            bbox.width = bbox.maxX - bbox.minX;\n            bbox.height = bbox.maxY - bbox.minY;\n          }\n\n          this._attrs.bbox = bbox;\n        }\n\n        return bbox;\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        return null;\n      };\n\n      _proto.createPath = function createPath() {};\n\n      return Shape;\n    }(Element);\n\n    function parseRadius(radius, width, height) {\n      radius = parsePadding(radius); // 都为0\n\n      if (!radius[0] && !radius[1] && !radius[2] && !radius[3]) {\n        return radius;\n      }\n\n      var minWidth = Math.max(radius[0] + radius[1], radius[2] + radius[3]);\n      var minHeight = Math.max(radius[0] + radius[3], radius[1] + radius[2]);\n      var scale = Math.min(width / minWidth, height / minHeight);\n\n      if (scale < 1) {\n        return radius.map(function (r) {\n          return r * scale;\n        });\n      }\n\n      return radius;\n    }\n\n    var Rect = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Rect, _Shape);\n\n      function Rect() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Rect.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'rect';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n          radius: 0,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height,\n            radius = attrs.radius;\n        context.beginPath();\n\n        if (!radius || !(width * height)) {\n          context.rect(x, y, width, height);\n        } else {\n          radius = parseRadius(radius, width, height);\n          context.moveTo(x + radius[0], y);\n          context.lineTo(x + width - radius[1], y);\n          context.arc(x + width - radius[1], y + radius[1], radius[1], -Math.PI / 2, 0, false);\n          context.lineTo(x + width, y + height - radius[2]);\n          context.arc(x + width - radius[2], y + height - radius[2], radius[2], 0, Math.PI / 2, false);\n          context.lineTo(x + radius[3], y + height);\n          context.arc(x + radius[3], y + height - radius[3], radius[3], Math.PI / 2, Math.PI, false);\n          context.lineTo(x, y + radius[0]);\n          context.arc(x + radius[0], y + radius[0], radius[0], Math.PI, Math.PI * 3 / 2, false);\n          context.closePath();\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height;\n        return {\n          minX: x,\n          minY: y,\n          maxX: x + width,\n          maxY: y + height\n        };\n      };\n\n      return Rect;\n    }(Shape$2);\n\n    var ImageShape = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(ImageShape, _Shape);\n\n      function ImageShape() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = ImageShape.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = false;\n        this._attrs.canStroke = false;\n        this._attrs.loading = false;\n        this._attrs.image = null;\n        this._attrs.type = 'image';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var _this = this;\n\n        var attrs = this.get('attrs');\n        var src = attrs.src;\n\n        if (this.get('loading')) {\n          return;\n        }\n\n        var image = this.get('image');\n\n        if (image) {\n          this.drawImage(context, image);\n        } else {\n          if (src && Image) {\n            this.set('loading', true);\n\n            var _image = new Image();\n\n            _image.src = src; // 设置跨域\n\n            _image.crossOrigin = 'Anonymous';\n\n            _image.onload = function () {\n              _this.set('loading', false);\n\n              _this.set('image', _image);\n\n              _this.drawImage(context, _image);\n            };\n          }\n        }\n      };\n\n      _proto.drawImage = function drawImage(context, image) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height,\n            sx = attrs.sx,\n            sy = attrs.sy,\n            swidth = attrs.swidth,\n            sheight = attrs.sheight;\n\n        if (!isNil(sx) && !isNil(sy) && !isNil(swidth) && !isNil(sheight)) {\n          context.drawImage(image, sx, sy, swidth, sheight, x, y, width, height);\n        } else {\n          context.drawImage(image, x, y, width, height);\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height; // 和rect一样\n\n        return {\n          minX: x,\n          minY: y,\n          maxX: x + width,\n          maxY: y + height\n        };\n      };\n\n      return ImageShape;\n    }(Shape$2);\n\n    var Circle = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Circle, _Shape);\n\n      function Circle() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Circle.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'circle';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          r: 0,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r;\n        context.beginPath();\n        context.arc(x, y, r, 0, Math.PI * 2, false);\n        context.closePath();\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r;\n        return {\n          minX: x - r,\n          maxX: x + r,\n          minY: y - r,\n          maxY: y + r\n        };\n      };\n\n      return Circle;\n    }(Shape$2);\n\n    var start = Vector2.create();\n    var end = Vector2.create();\n    var extremity = Vector2.create();\n\n    function getCubicBezierXYatT(startPt, controlPt1, controlPt2, endPt, T) {\n      var x = CubicN(T, startPt.x, controlPt1.x, controlPt2.x, endPt.x);\n      var y = CubicN(T, startPt.y, controlPt1.y, controlPt2.y, endPt.y);\n      return {\n        x: x,\n        y: y\n      };\n    } // cubic helper formula at T distance\n\n\n    function CubicN(T, a, b, c, d) {\n      var t2 = T * T;\n      var t3 = t2 * T;\n      return a + (-a * 3 + T * (3 * a - a * T)) * T + (3 * b + T * (-6 * b + b * 3 * T)) * T + (c * 3 - c * 3 * T) * t2 + d * t3;\n    }\n\n    function cubicBezierBounds(c) {\n      var minX = Infinity;\n      var maxX = -Infinity;\n      var minY = Infinity;\n      var maxY = -Infinity;\n      var s = {\n        x: c[0],\n        y: c[1]\n      };\n      var c1 = {\n        x: c[2],\n        y: c[3]\n      };\n      var c2 = {\n        x: c[4],\n        y: c[5]\n      };\n      var e = {\n        x: c[6],\n        y: c[7]\n      };\n\n      for (var t = 0; t < 100; t++) {\n        var pt = getCubicBezierXYatT(s, c1, c2, e, t / 100);\n\n        if (pt.x < minX) {\n          minX = pt.x;\n        }\n\n        if (pt.x > maxX) {\n          maxX = pt.x;\n        }\n\n        if (pt.y < minY) {\n          minY = pt.y;\n        }\n\n        if (pt.y > maxY) {\n          maxY = pt.y;\n        }\n      }\n\n      return {\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY\n      };\n    }\n\n    function getBBoxFromPoints(points, lineWidth) {\n      if (points.length === 0) {\n        return;\n      }\n\n      var p = points[0];\n      var left = p.x;\n      var right = p.x;\n      var top = p.y;\n      var bottom = p.y;\n      var len = points.length;\n\n      for (var i = 1; i < len; i++) {\n        p = points[i];\n        left = Math.min(left, p.x);\n        right = Math.max(right, p.x);\n        top = Math.min(top, p.y);\n        bottom = Math.max(bottom, p.y);\n      }\n\n      lineWidth = lineWidth / 2 || 0;\n      return {\n        minX: left - lineWidth,\n        minY: top - lineWidth,\n        maxX: right + lineWidth,\n        maxY: bottom + lineWidth\n      };\n    }\n\n    function getBBoxFromLine(x0, y0, x1, y1, lineWidth) {\n      lineWidth = lineWidth / 2 || 0;\n      return {\n        minX: Math.min(x0, x1) - lineWidth,\n        minY: Math.min(y0, y1) - lineWidth,\n        maxX: Math.max(x0, x1) + lineWidth,\n        maxY: Math.max(y0, y1) + lineWidth\n      };\n    }\n\n    function getBBoxFromArc(x, y, r, startAngle, endAngle, anticlockwise) {\n      var diff = Math.abs(startAngle - endAngle);\n\n      if (diff % (Math.PI * 2) < 1e-4 && diff > 1e-4) {\n        // Is a circle\n        return {\n          minX: x - r,\n          minY: y - r,\n          maxX: x + r,\n          maxY: y + r\n        };\n      }\n\n      start[0] = Math.cos(startAngle) * r + x;\n      start[1] = Math.sin(startAngle) * r + y;\n      end[0] = Math.cos(endAngle) * r + x;\n      end[1] = Math.sin(endAngle) * r + y;\n      var min = [0, 0];\n      var max = [0, 0];\n      Vector2.min(min, start, end);\n      Vector2.max(max, start, end); // Thresh to [0, Math.PI * 2]\n\n      startAngle = startAngle % (Math.PI * 2);\n\n      if (startAngle < 0) {\n        startAngle = startAngle + Math.PI * 2;\n      }\n\n      endAngle = endAngle % (Math.PI * 2);\n\n      if (endAngle < 0) {\n        endAngle = endAngle + Math.PI * 2;\n      }\n\n      if (startAngle > endAngle && !anticlockwise) {\n        endAngle += Math.PI * 2;\n      } else if (startAngle < endAngle && anticlockwise) {\n        startAngle += Math.PI * 2;\n      }\n\n      if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n      }\n\n      for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n          extremity[0] = Math.cos(angle) * r + x;\n          extremity[1] = Math.sin(angle) * r + y;\n          Vector2.min(min, extremity, min);\n          Vector2.max(max, extremity, max);\n        }\n      }\n\n      return {\n        minX: min[0],\n        minY: min[1],\n        maxX: max[0],\n        maxY: max[1]\n      };\n    }\n\n    function getBBoxFromBezierGroup(points, lineWidth) {\n      var minX = Infinity;\n      var maxX = -Infinity;\n      var minY = Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var bbox = cubicBezierBounds(points[i]);\n\n        if (bbox.minX < minX) {\n          minX = bbox.minX;\n        }\n\n        if (bbox.maxX > maxX) {\n          maxX = bbox.maxX;\n        }\n\n        if (bbox.minY < minY) {\n          minY = bbox.minY;\n        }\n\n        if (bbox.maxY > maxY) {\n          maxY = bbox.maxY;\n        }\n      }\n\n      lineWidth = lineWidth / 2 || 0;\n      return {\n        minX: minX - lineWidth,\n        minY: minY - lineWidth,\n        maxX: maxX + lineWidth,\n        maxY: maxY + lineWidth\n      };\n    }\n\n    var Line$1 = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Line, _Shape);\n\n      function Line() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canStroke = true;\n        this._attrs.type = 'line';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x1: 0,\n          y1: 0,\n          x2: 0,\n          y2: 0,\n          lineWidth: 1\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x1 = attrs.x1,\n            y1 = attrs.y1,\n            x2 = attrs.x2,\n            y2 = attrs.y2;\n        context.beginPath();\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x1 = attrs.x1,\n            y1 = attrs.y1,\n            x2 = attrs.x2,\n            y2 = attrs.y2,\n            lineWidth = attrs.lineWidth;\n        return getBBoxFromLine(x1, y1, x2, y2, lineWidth);\n      };\n\n      return Line;\n    }(Shape$2);\n\n    var Polygon = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Polygon, _Shape);\n\n      function Polygon() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Polygon.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'polygon';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          points: null,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var points = attrs.points;\n        context.beginPath();\n\n        for (var i = 0, len = points.length; i < len; i++) {\n          var point = points[i];\n\n          if (i === 0) {\n            context.moveTo(point.x, point.y);\n          } else {\n            context.lineTo(point.x, point.y);\n          }\n        }\n\n        context.closePath();\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var points = attrs.points;\n        return getBBoxFromPoints(points);\n      };\n\n      return Polygon;\n    }(Shape$2);\n\n    /**\n     * @fileOverview convert the line to curve\n     * @author dxq613@gmail.com\n     */\n\n    function getPoint(v) {\n      return [v.x, v.y];\n    }\n\n    function smoothBezier(points, smooth, isLoop, constraint) {\n      var cps = [];\n      var prevPoint;\n      var nextPoint;\n      var hasConstraint = !!constraint;\n      var min;\n      var max;\n      var point;\n      var len;\n      var l;\n      var i;\n\n      if (hasConstraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n\n        for (i = 0, l = points.length; i < l; i++) {\n          point = getPoint(points[i]);\n          Vector2.min(min, min, point);\n          Vector2.max(max, max, point);\n        }\n\n        Vector2.min(min, min, constraint[0]);\n        Vector2.max(max, max, constraint[1]);\n      }\n\n      for (i = 0, len = points.length; i < len; i++) {\n        point = getPoint(points[i]);\n\n        if (isLoop) {\n          prevPoint = getPoint(points[i ? i - 1 : len - 1]);\n          nextPoint = getPoint(points[(i + 1) % len]);\n        } else {\n          if (i === 0 || i === len - 1) {\n            cps.push([point[0], point[1]]);\n            continue;\n          } else {\n            prevPoint = getPoint(points[i - 1]);\n            nextPoint = getPoint(points[i + 1]);\n          }\n        }\n\n        var v = Vector2.sub([], nextPoint, prevPoint);\n        Vector2.scale(v, v, smooth);\n        var d0 = Vector2.distance(point, prevPoint);\n        var d1 = Vector2.distance(point, nextPoint);\n        var sum = d0 + d1;\n\n        if (sum !== 0) {\n          d0 /= sum;\n          d1 /= sum;\n        }\n\n        var v1 = Vector2.scale([], v, -d0);\n        var v2 = Vector2.scale([], v, d1);\n        var cp0 = Vector2.add([], point, v1);\n        var cp1 = Vector2.add([], point, v2);\n\n        if (hasConstraint) {\n          Vector2.max(cp0, cp0, min);\n          Vector2.min(cp0, cp0, max);\n          Vector2.max(cp1, cp1, min);\n          Vector2.min(cp1, cp1, max);\n        }\n\n        cps.push([cp0[0], cp0[1]]);\n        cps.push([cp1[0], cp1[1]]);\n      }\n\n      if (isLoop) {\n        cps.push(cps.shift());\n      }\n\n      return cps;\n    }\n\n    function catmullRom2bezier(pointList, z, constraint) {\n      var isLoop = !!z;\n      var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n      var len = pointList.length;\n      var d1 = [];\n      var cp1;\n      var cp2;\n      var p;\n\n      for (var i = 0; i < len - 1; i++) {\n        cp1 = controlPointList[i * 2];\n        cp2 = controlPointList[i * 2 + 1];\n        p = pointList[i + 1];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p.x, p.y]);\n      }\n\n      if (isLoop) {\n        cp1 = controlPointList[len];\n        cp2 = controlPointList[len + 1];\n        p = pointList[0];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p.x, p.y]);\n      }\n\n      return d1;\n    }\n\n    function _filterPoints(points) {\n      var filteredPoints = [];\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n\n        if (!isNaN(point.x) && !isNaN(point.y)) {\n          filteredPoints.push(point);\n        }\n      }\n\n      return filteredPoints;\n    }\n\n    var Polyline = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Polyline, _Shape);\n\n      function Polyline() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Polyline.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'polyline';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          points: null,\n          lineWidth: 1,\n          smooth: false\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var points = attrs.points,\n            smooth = attrs.smooth;\n\n        var filteredPoints = _filterPoints(points);\n\n        context.beginPath();\n\n        if (filteredPoints.length) {\n          context.moveTo(filteredPoints[0].x, filteredPoints[0].y);\n\n          if (smooth) {\n            var constaint = [[0, 0], [1, 1]];\n            var sps = catmullRom2bezier(filteredPoints, false, constaint);\n\n            for (var i = 0, n = sps.length; i < n; i++) {\n              var sp = sps[i];\n              context.bezierCurveTo(sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]);\n            }\n          } else {\n            var _i;\n\n            var l;\n\n            for (_i = 1, l = filteredPoints.length - 1; _i < l; _i++) {\n              context.lineTo(filteredPoints[_i].x, filteredPoints[_i].y);\n            }\n\n            context.lineTo(filteredPoints[l].x, filteredPoints[l].y);\n          }\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var points = attrs.points,\n            smooth = attrs.smooth,\n            lineWidth = attrs.lineWidth;\n\n        var filteredPoints = _filterPoints(points);\n\n        if (smooth) {\n          var newPoints = [];\n          var constaint = [[0, 0], [1, 1]];\n          var sps = catmullRom2bezier(filteredPoints, false, constaint);\n\n          for (var i = 0, n = sps.length; i < n; i++) {\n            var sp = sps[i];\n\n            if (i === 0) {\n              newPoints.push([filteredPoints[0].x, filteredPoints[0].y, sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]]);\n            } else {\n              var lastPoint = sps[i - 1];\n              newPoints.push([lastPoint[5], lastPoint[6], sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]]);\n            }\n          }\n\n          return getBBoxFromBezierGroup(newPoints, lineWidth);\n        }\n\n        return getBBoxFromPoints(filteredPoints, lineWidth);\n      };\n\n      return Polyline;\n    }(Shape$2);\n\n    var Arc = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Arc, _Shape);\n\n      function Arc() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Arc.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canStroke = true;\n        this._attrs.canFill = true;\n        this._attrs.type = 'arc';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          r: 0,\n          startAngle: 0,\n          endAngle: Math.PI * 2,\n          anticlockwise: false,\n          lineWidth: 1\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            anticlockwise = attrs.anticlockwise;\n        context.beginPath();\n\n        if (startAngle !== endAngle) {\n          context.arc(x, y, r, startAngle, endAngle, anticlockwise);\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            anticlockwise = attrs.anticlockwise;\n        return getBBoxFromArc(x, y, r, startAngle, endAngle, anticlockwise);\n      };\n\n      return Arc;\n    }(Shape$2);\n\n    var Sector = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Sector, _Shape);\n\n      function Sector() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Sector.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'sector';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          lineWidth: 0,\n          r: 0,\n          r0: 0,\n          startAngle: 0,\n          endAngle: Math.PI * 2,\n          anticlockwise: false\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            r = attrs.r,\n            r0 = attrs.r0,\n            anticlockwise = attrs.anticlockwise;\n        context.beginPath();\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        context.moveTo(unitX * r0 + x, unitY * r0 + y);\n        context.lineTo(unitX * r + x, unitY * r + y); // 当扇形的角度非常小的时候，就不进行弧线的绘制；或者整个只有1个扇形时，会出现end<0的情况不绘制\n\n        if (Math.abs(endAngle - startAngle) > 0.0001 || startAngle === 0 && endAngle < 0) {\n          context.arc(x, y, r, startAngle, endAngle, anticlockwise);\n          context.lineTo(Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y);\n\n          if (r0 !== 0) {\n            context.arc(x, y, r0, endAngle, startAngle, !anticlockwise);\n          }\n        }\n\n        context.closePath();\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r,\n            r0 = attrs.r0,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            anticlockwise = attrs.anticlockwise;\n        var outerBBox = getBBoxFromArc(x, y, r, startAngle, endAngle, anticlockwise);\n        var innerBBox = getBBoxFromArc(x, y, r0, startAngle, endAngle, anticlockwise);\n        return {\n          minX: Math.min(outerBBox.minX, innerBBox.minX),\n          minY: Math.min(outerBBox.minY, innerBBox.minY),\n          maxX: Math.max(outerBBox.maxX, innerBBox.maxX),\n          maxY: Math.max(outerBBox.maxY, innerBBox.maxY)\n        };\n      };\n\n      return Sector;\n    }(Shape$2);\n\n    var Rect$1 = {\n      calcRotatedBox: function calcRotatedBox(_ref) {\n        var width = _ref.width,\n            height = _ref.height,\n            rotate = _ref.rotate;\n        var absRotate = Math.abs(rotate);\n        return {\n          width: Math.abs(width * Math.cos(absRotate) + height * Math.sin(absRotate)),\n          height: Math.abs(height * Math.cos(absRotate) + width * Math.sin(absRotate))\n        };\n      }\n    };\n\n    var textWidthCacheCounter = 0;\n    var textWidthCache = {};\n    var TEXT_CACHE_MAX = 5000;\n\n    var Text = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Text, _Shape);\n\n      function Text() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Text.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'text';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          lineWidth: 0,\n          lineCount: 1,\n          fontSize: 12,\n          fontFamily: 'sans-serif',\n          fontStyle: 'normal',\n          fontWeight: 'normal',\n          fontVariant: 'normal',\n          textAlign: 'start',\n          textBaseline: 'bottom',\n          lineHeight: null,\n          textArr: null\n        };\n      };\n\n      _proto._getFontStyle = function _getFontStyle() {\n        var attrs = this._attrs.attrs;\n        var fontSize = attrs.fontSize,\n            fontFamily = attrs.fontFamily,\n            fontWeight = attrs.fontWeight,\n            fontStyle = attrs.fontStyle,\n            fontVariant = attrs.fontVariant;\n        return fontStyle + \" \" + fontVariant + \" \" + fontWeight + \" \" + fontSize + \"px \" + fontFamily;\n      };\n\n      _proto._afterAttrsSet = function _afterAttrsSet() {\n        var attrs = this._attrs.attrs;\n        attrs.font = this._getFontStyle();\n\n        if (attrs.text) {\n          var text = attrs.text;\n          var textArr = null;\n          var lineCount = 1;\n\n          if (isString(text) && text.indexOf('\\n') !== -1) {\n            textArr = text.split('\\n');\n            lineCount = textArr.length;\n          }\n\n          attrs.lineCount = lineCount;\n          attrs.textArr = textArr;\n        }\n\n        this.set('attrs', attrs);\n      };\n\n      _proto._getTextHeight = function _getTextHeight() {\n        var attrs = this._attrs.attrs;\n\n        if (attrs.height) {\n          return attrs.height;\n        }\n\n        var lineCount = attrs.lineCount;\n        var fontSize = attrs.fontSize * 1;\n\n        if (lineCount > 1) {\n          var spaceingY = this._getSpaceingY();\n\n          return fontSize * lineCount + spaceingY * (lineCount - 1);\n        }\n\n        return fontSize;\n      };\n\n      _proto._getSpaceingY = function _getSpaceingY() {\n        var attrs = this._attrs.attrs;\n        var lineHeight = attrs.lineHeight;\n        var fontSize = attrs.fontSize * 1;\n        return lineHeight ? lineHeight - fontSize : fontSize * 0.14;\n      };\n\n      _proto.drawInner = function drawInner(context) {\n        var self = this;\n        var attrs = self._attrs.attrs;\n        var text = attrs.text;\n        var x = attrs.x;\n        var y = attrs.y;\n\n        if (isNil(text) || isNaN(x) || isNaN(y)) {\n          // text will be 0\n          return;\n        }\n\n        var textArr = attrs.textArr;\n        var fontSize = attrs.fontSize * 1;\n\n        var spaceingY = self._getSpaceingY();\n\n        if (attrs.rotate) {\n          // do rotation\n          context.translate(x, y);\n          context.rotate(attrs.rotate);\n          x = 0;\n          y = 0;\n        }\n\n        var textBaseline = attrs.textBaseline;\n        var height;\n\n        if (textArr) {\n          height = self._getTextHeight();\n        }\n\n        var subY; // context.beginPath();\n\n        if (self.hasFill()) {\n          var fillOpacity = attrs.fillOpacity;\n\n          if (!isNil(fillOpacity) && fillOpacity !== 1) {\n            context.globalAlpha = fillOpacity;\n          }\n\n          if (textArr) {\n            for (var i = 0, len = textArr.length; i < len; i++) {\n              var subText = textArr[i];\n              subY = y + i * (spaceingY + fontSize) - height + fontSize; // bottom;\n\n              if (textBaseline === 'middle') {\n                subY += height - fontSize - (height - fontSize) / 2;\n              }\n\n              if (textBaseline === 'top') {\n                subY += height - fontSize;\n              }\n\n              context.fillText(subText, x, subY);\n            }\n          } else {\n            context.fillText(text, x, y);\n          }\n        }\n\n        if (self.hasStroke()) {\n          if (textArr) {\n            for (var _i = 0, _len = textArr.length; _i < _len; _i++) {\n              var _subText = textArr[_i];\n              subY = y + _i * (spaceingY + fontSize) - height + fontSize; // bottom;\n\n              if (textBaseline === 'middle') {\n                subY += height - fontSize - (height - fontSize) / 2;\n              }\n\n              if (textBaseline === 'top') {\n                subY += height - fontSize;\n              }\n\n              context.strokeText(_subText, x, subY);\n            }\n          } else {\n            context.strokeText(text, x, y);\n          }\n        }\n      };\n\n      _proto._getAriaLabel = function _getAriaLabel() {\n        return this._attrs.attrs.text;\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var self = this;\n        var attrs = self._attrs.attrs;\n        var x = attrs.x,\n            y = attrs.y,\n            textAlign = attrs.textAlign,\n            textBaseline = attrs.textBaseline;\n\n        var width = self._getTextWidth(); // attrs.width\n\n\n        if (!width) {\n          return {\n            minX: x,\n            minY: y,\n            maxX: x,\n            maxY: y\n          };\n        }\n\n        var height = self._getTextHeight(); // attrs.height\n\n\n        if (attrs.rotate) {\n          var rotatedBox = Rect$1.calcRotatedBox({\n            width: width,\n            height: height,\n            rotate: attrs.rotate\n          });\n          width = rotatedBox.width;\n          height = rotatedBox.height;\n        }\n\n        var point = {\n          x: x,\n          y: y - height\n        }; // default textAlign: start, textBaseline: bottom\n\n        if (textAlign) {\n          if (textAlign === 'end' || textAlign === 'right') {\n            point.x -= width;\n          } else if (textAlign === 'center') {\n            point.x -= width / 2;\n          }\n        }\n\n        if (textBaseline) {\n          if (textBaseline === 'top') {\n            point.y += height;\n          } else if (textBaseline === 'middle') {\n            point.y += height / 2;\n          }\n        }\n\n        return {\n          minX: point.x,\n          minY: point.y,\n          maxX: point.x + width,\n          maxY: point.y + height\n        };\n      };\n\n      _proto._getTextWidth = function _getTextWidth() {\n        var attrs = this._attrs.attrs;\n\n        if (attrs.width) {\n          return attrs.width;\n        }\n\n        var text = attrs.text;\n        var context = this.get('context');\n        if (isNil(text)) return undefined;\n        var font = attrs.font;\n        var textArr = attrs.textArr;\n        var key = text + '' + font;\n\n        if (textWidthCache[key]) {\n          return textWidthCache[key];\n        }\n\n        var width = 0;\n\n        if (textArr) {\n          for (var i = 0, length = textArr.length; i < length; i++) {\n            var subText = textArr[i];\n            width = Math.max(width, measureText(subText, font, context).width);\n          }\n        } else {\n          width = measureText(text, font, context).width;\n        }\n\n        if (textWidthCacheCounter > TEXT_CACHE_MAX) {\n          textWidthCacheCounter = 0;\n          textWidthCache = {};\n        }\n\n        textWidthCacheCounter++;\n        textWidthCache[key] = width;\n        return width;\n      };\n\n      return Text;\n    }(Shape$2);\n\n    var Custom = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Custom, _Shape);\n\n      function Custom() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Custom.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.createPath = null;\n        this._attrs.type = 'custom';\n      };\n\n      _proto.createPath = function createPath(context) {\n        var createPath = this.get('createPath');\n        createPath && createPath.call(this, context);\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var calculateBox = this.get('calculateBox');\n        return calculateBox && calculateBox.call(this);\n      };\n\n      return Custom;\n    }(Shape$2);\n\n    var SYMBOLS = {\n      circle: function circle(x, y, r, ctx) {\n        ctx.arc(x, y, r, 0, Math.PI * 2, false);\n      },\n      square: function square(x, y, r, ctx) {\n        ctx.moveTo(x - r, y - r);\n        ctx.lineTo(x + r, y - r);\n        ctx.lineTo(x + r, y + r);\n        ctx.lineTo(x - r, y + r);\n        ctx.closePath();\n      }\n    };\n\n    var Marker = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Marker, _Shape);\n\n      function Marker() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Marker.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'marker';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            radius = attrs.radius;\n        var symbol = attrs.symbol || 'circle';\n        var method;\n\n        if (isFunction(symbol)) {\n          method = symbol;\n        } else {\n          method = SYMBOLS[symbol];\n        }\n\n        context.beginPath();\n        method(x, y, radius, context, this);\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            radius = attrs.radius;\n        return {\n          minX: x - radius,\n          minY: y - radius,\n          maxX: x + radius,\n          maxY: y + radius\n        };\n      };\n\n      return Marker;\n    }(Shape$2);\n\n    Shape$2.Rect = Rect;\n    Shape$2.Image = ImageShape;\n    Shape$2.Circle = Circle;\n    Shape$2.Line = Line$1;\n    Shape$2.Polygon = Polygon;\n    Shape$2.Polyline = Polyline;\n    Shape$2.Arc = Arc;\n    Shape$2.Sector = Sector;\n    Shape$2.Text = Text;\n    Shape$2.Custom = Custom;\n    Shape$2.Marker = Marker;\n\n    var SHAPE_MAP = {};\n    var INDEX = '_INDEX';\n\n    function getComparer(compare) {\n      return function (left, right) {\n        var result = compare(left, right);\n        return result === 0 ? left[INDEX] - right[INDEX] : result;\n      };\n    }\n\n    var Container = {\n      getGroupClass: function getGroupClass() {},\n      getChildren: function getChildren() {\n        return this.get('children');\n      },\n      addShape: function addShape(type, cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var shapeType = SHAPE_MAP[type];\n\n        if (!shapeType) {\n          shapeType = upperFirst(type);\n          SHAPE_MAP[type] = shapeType;\n        }\n\n        var shape = new Shape$2[shapeType](cfg);\n        this.add(shape);\n        return shape;\n      },\n      addGroup: function addGroup(cfg) {\n        var groupClass = this.getGroupClass();\n        var rst = new groupClass(cfg);\n        this.add(rst);\n        return rst;\n      },\n      contain: function contain(item) {\n        var children = this.get('children');\n        return children.indexOf(item) > -1;\n      },\n      sort: function sort() {\n        var children = this.get('children');\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          var child = children[i];\n          child[INDEX] = i;\n        }\n\n        children.sort(getComparer(function (obj1, obj2) {\n          return obj1.get('zIndex') - obj2.get('zIndex');\n        }));\n        return this;\n      },\n      drawInner: function drawInner(context) {\n        var children = this.get('children');\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          var child = children[i];\n          child.draw(context);\n        }\n\n        return this;\n      },\n      clear: function clear() {\n        var children = this.get('children');\n\n        while (children.length !== 0) {\n          children[children.length - 1].remove(true);\n        }\n\n        return this;\n      },\n      add: function add(items) {\n        var self = this;\n        var children = self.get('children');\n\n        if (!isArray(items)) {\n          items = [items];\n        }\n\n        for (var i = 0, len = items.length; i < len; i++) {\n          var item = items[i];\n          var parent = item.get('parent');\n\n          if (parent) {\n            var descendants = parent.get('children');\n            remove(descendants, item);\n          }\n\n          self._setEvn(item);\n\n          children.push(item);\n        }\n\n        return self;\n      },\n      _setEvn: function _setEvn(item) {\n        var self = this;\n        var _self$_attrs = self._attrs,\n            context = _self$_attrs.context,\n            canvas = _self$_attrs.canvas,\n            aria = _self$_attrs.aria;\n        var _item$_attrs = item._attrs,\n            isGroup = _item$_attrs.isGroup,\n            type = _item$_attrs.type;\n        item._attrs.parent = self;\n        item._attrs.context = context;\n        item._attrs.canvas = canvas; // 是否需要无障碍处理\n\n        if (aria && item._attrs.aria !== false) {\n          item._attrs.aria = aria;\n        }\n\n        if (type === 'text' && canvas && canvas.get('fontFamily')) {\n          item._attrs.attrs.fontFamily = item._attrs.attrs.fontFamily || canvas.get('fontFamily');\n        }\n\n        var clip = item._attrs.attrs.clip;\n\n        if (clip) {\n          clip._attrs.parent = self;\n          clip._attrs.context = context;\n          clip._attrs.canvas = canvas;\n        }\n\n        if (isGroup) {\n          var children = item._attrs.children;\n\n          for (var i = 0, len = children.length; i < len; i++) {\n            item._setEvn(children[i]);\n          }\n        }\n      },\n      _getAriaLabel: function _getAriaLabel() {\n        var _this$_attrs = this._attrs,\n            aria = _this$_attrs.aria,\n            ariaLabel = _this$_attrs.ariaLabel,\n            children = _this$_attrs.children; // 主动关闭\n\n        if (!aria) return;\n        var childAriaLabels = [];\n\n        if (children && children.length) {\n          for (var i = 0, len = children.length; i < len; i++) {\n            var _childAriaLabel = children[i].getAriaLabel();\n\n            if (_childAriaLabel) {\n              childAriaLabels.push(_childAriaLabel);\n            }\n          }\n        }\n\n        var childAriaLabel = childAriaLabels.join(' '); // 2个都有时拼接成完整句子\n\n        if (ariaLabel && childAriaLabel) {\n          return ariaLabel + \" \" + childAriaLabel + \" \";\n        } // 只有1个，或者都没有\n\n\n        return ariaLabel || childAriaLabel;\n      }\n    };\n\n    var Group = /*#__PURE__*/function (_Element) {\n      _inheritsLoose(Group, _Element);\n\n      function Group() {\n        return _Element.apply(this, arguments) || this;\n      }\n\n      var _proto = Group.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        this._attrs = {\n          zIndex: 0,\n          visible: true,\n          destroyed: false,\n          isGroup: true,\n          children: []\n        };\n      };\n\n      _proto.getBBox = function getBBox() {\n        var self = this;\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var children = self.get('children');\n\n        for (var i = 0, length = children.length; i < length; i++) {\n          var child = children[i];\n\n          if (child.get('visible')) {\n            var box = child.getBBox();\n\n            if (!box) {\n              continue;\n            }\n\n            var leftTop = [box.minX, box.minY];\n            var leftBottom = [box.minX, box.maxY];\n            var rightTop = [box.maxX, box.minY];\n            var rightBottom = [box.maxX, box.maxY];\n            var matrix = child.attr('matrix');\n            Vector2.transformMat2d(leftTop, leftTop, matrix);\n            Vector2.transformMat2d(leftBottom, leftBottom, matrix);\n            Vector2.transformMat2d(rightTop, rightTop, matrix);\n            Vector2.transformMat2d(rightBottom, rightBottom, matrix);\n            minX = Math.min(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0], minX);\n            maxX = Math.max(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0], maxX);\n            minY = Math.min(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1], minY);\n            maxY = Math.max(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1], maxY);\n          }\n        }\n\n        return {\n          minX: minX,\n          minY: minY,\n          maxX: maxX,\n          maxY: maxY,\n          x: minX,\n          y: minY,\n          width: maxX - minX,\n          height: maxY - minY\n        };\n      };\n\n      _proto.destroy = function destroy() {\n        if (this.get('destroyed')) {\n          return;\n        }\n\n        this.clear();\n\n        _Element.prototype.destroy.call(this);\n      };\n\n      return Group;\n    }(Element);\n\n    mix(Group.prototype, Container, {\n      getGroupClass: function getGroupClass() {\n        return Group;\n      }\n    });\n\n    var requestAnimationFrame = typeof window === 'object' && window.requestAnimationFrame ? window.requestAnimationFrame : function (fn) {\n      return setTimeout(fn, 16);\n    };\n\n    var Canvas = /*#__PURE__*/function (_EventEmit) {\n      _inheritsLoose(Canvas, _EventEmit);\n\n      var _proto = Canvas.prototype;\n\n      _proto.get = function get(name) {\n        return this._attrs[name];\n      };\n\n      _proto.set = function set(name, value) {\n        this._attrs[name] = value;\n      };\n\n      function Canvas(cfg) {\n        var _this;\n\n        _this = _EventEmit.call(this) || this;\n        var title = cfg.title;\n        var ariaLabel = title ? substitute(lang.general.withTitle, {\n          title: title\n        }) : lang.general.title;\n        _this._attrs = mix({\n          type: 'canvas',\n          children: [],\n          ariaLabel: ariaLabel\n        }, cfg);\n\n        _this._initPixelRatio();\n\n        _this._initCanvas();\n\n        return _this;\n      }\n\n      _proto._initPixelRatio = function _initPixelRatio() {\n        var pixelRatio = this.get('pixelRatio');\n\n        if (!pixelRatio) {\n          this.set('pixelRatio', getPixelRatio());\n        }\n      };\n\n      _proto.beforeDraw = function beforeDraw() {\n        var context = this._attrs.context;\n        var el = this._attrs.el;\n        context && context.clearRect && context.clearRect(0, 0, el.width, el.height);\n      };\n\n      _proto._initCanvas = function _initCanvas() {\n        var self = this;\n        var el = self.get('el');\n        var context = self.get('context');\n\n        if (!el && !context) {\n          throw new Error('Please specify the id, el or context of the chart!');\n        }\n\n        var canvas;\n\n        if (el) {\n          // DOMElement or String\n          canvas = isString(el) ? getDomById(el) : el;\n        } else {\n          // 说明没有指定el\n          canvas = CanvasElement$1.create(context);\n        }\n\n        if (context && canvas && !canvas.getContext) {\n          canvas.getContext = function () {\n            return context;\n          };\n        }\n\n        var width = self.get('width');\n\n        if (!width) {\n          width = getWidth(canvas);\n        }\n\n        var height = self.get('height');\n\n        if (!height) {\n          height = getHeight(canvas);\n        }\n\n        self.set('canvas', this);\n        self.set('el', canvas);\n        self.set('context', context || canvas.getContext('2d'));\n        self.changeSize(width, height); // 初始化事件控制器\n\n        var eventController = new EventController({\n          canvas: this,\n          el: canvas\n        });\n        self.set('eventController', eventController);\n      };\n\n      _proto.changeSize = function changeSize(width, height) {\n        var pixelRatio = this.get('pixelRatio');\n        var canvasDOM = this.get('el'); // HTMLCanvasElement or canvasElement\n        // 浏览器环境设置style样式\n\n        if (canvasDOM.style) {\n          canvasDOM.style.width = width + 'px';\n          canvasDOM.style.height = height + 'px';\n        }\n\n        if (isCanvasElement(canvasDOM)) {\n          canvasDOM.width = width * pixelRatio;\n          canvasDOM.height = height * pixelRatio;\n\n          if (pixelRatio !== 1) {\n            var ctx = this.get('context');\n            ctx.scale(pixelRatio, pixelRatio);\n          }\n        }\n\n        this.set('width', width);\n        this.set('height', height);\n      };\n\n      _proto.getWidth = function getWidth() {\n        var pixelRatio = this.get('pixelRatio');\n        var width = this.get('width');\n        return width * pixelRatio;\n      };\n\n      _proto.getHeight = function getHeight() {\n        var pixelRatio = this.get('pixelRatio');\n        var height = this.get('height');\n        return height * pixelRatio;\n      };\n\n      _proto.getPointByClient = function getPointByClient(clientX, clientY) {\n        var el = this.get('el');\n        var bbox = el.getBoundingClientRect();\n        var width = bbox.right - bbox.left;\n        var height = bbox.bottom - bbox.top;\n        return {\n          x: (clientX - bbox.left) * (el.width / width),\n          y: (clientY - bbox.top) * (el.height / height)\n        };\n      };\n\n      _proto._beginDraw = function _beginDraw() {\n        this._attrs.toDraw = true;\n      };\n\n      _proto._endDraw = function _endDraw() {\n        this._attrs.toDraw = false;\n      };\n\n      _proto.draw = function draw() {\n        var self = this;\n\n        function drawInner() {\n          self.set('animateHandler', requestAnimationFrame(function () {\n            self.set('animateHandler', undefined);\n\n            if (self.get('toDraw')) {\n              drawInner();\n            }\n          }));\n          self.beforeDraw();\n\n          try {\n            var context = self._attrs.context;\n            self.drawInner(context); // 支付宝，微信小程序，需要调context.draw才能完成绘制， 所以这里直接判断是否有.draw方法\n\n            if (context.draw) {\n              context.draw();\n            } // 设置无障碍文本\n\n\n            self.setAriaLabel();\n          } catch (ev) {\n            console.warn('error in draw canvas, detail as:');\n            console.warn(ev);\n\n            self._endDraw();\n          }\n\n          self._endDraw();\n        }\n\n        if (self.get('destroyed')) {\n          return;\n        }\n\n        if (self.get('animateHandler')) {\n          this._beginDraw();\n        } else {\n          drawInner();\n        }\n      } // 设置无障碍文本\n      ;\n\n      _proto.setAriaLabel = function setAriaLabel() {\n        var el = this._attrs.el;\n\n        var ariaLabel = this._getAriaLabel();\n\n        if (ariaLabel && el.setAttribute) {\n          el.setAttribute('aria-label', ariaLabel);\n        }\n      };\n\n      _proto.destroy = function destroy() {\n        if (this.get('destroyed')) {\n          return;\n        } // 需要清理 canvas 画布内容，否则会导致 spa 应用 ios 下 canvas 白屏\n        // https://stackoverflow.com/questions/52532614/total-canvas-memory-use-exceeds-the-maximum-limit-safari-12\n        // https://github.com/antvis/F2/issues/630\n\n\n        var el = this.get('el');\n        el.width = 0;\n        el.height = 0;\n        this.clear();\n        this._attrs = {};\n        this.set('destroyed', true);\n      };\n\n      _proto.isDestroyed = function isDestroyed() {\n        return this.get('destroyed');\n      };\n\n      return Canvas;\n    }(EventEmit);\n\n    mix(Canvas.prototype, Container, {\n      getGroupClass: function getGroupClass() {\n        return Group;\n      }\n    });\n\n    var engines = {};\n\n    function registerEngine(name, engine) {\n      engines[name] = engine;\n    }\n\n    function getEngine(name) {\n      var G = engines[name];\n\n      if (G) {\n        return G;\n      }\n\n      return {\n        Canvas: Canvas,\n        Group: Group,\n        Shape: Shape$2\n      };\n    }\n\n    function createCanvas(cfg) {\n      var renderer = cfg.renderer;\n      var G = getEngine(renderer);\n      return new G.Canvas(cfg);\n    }\n\n    var G = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        registerEngine: registerEngine,\n        getEngine: getEngine,\n        createCanvas: createCanvas,\n        Canvas: Canvas,\n        Group: Group,\n        Shape: Shape$2,\n        Matrix: Matrix,\n        Vector2: Vector2\n    });\n\n    function getClip(coord) {\n      var start = coord.start;\n      var end = coord.end;\n      var width = end.x - start.x;\n      var height = Math.abs(end.y - start.y);\n      var margin = 10;\n      var clip;\n\n      if (coord.isPolar) {\n        var circleRadius = coord.circleRadius,\n            center = coord.center,\n            startAngle = coord.startAngle,\n            endAngle = coord.endAngle;\n        clip = new Shape$2.Sector({\n          attrs: {\n            x: center.x,\n            y: center.y,\n            r: circleRadius,\n            r0: 0,\n            startAngle: startAngle,\n            endAngle: endAngle\n          }\n        });\n      } else {\n        clip = new Shape$2.Rect({\n          attrs: {\n            x: start.x,\n            y: end.y - margin,\n            width: width,\n            height: height + 2 * margin\n          }\n        });\n      }\n\n      clip.isClip = true;\n      return clip;\n    }\n\n    function isPointInPlot(point, plot) {\n      var x = point.x,\n          y = point.y;\n      var tl = plot.tl,\n          tr = plot.tr,\n          br = plot.br;\n      return x >= tl.x && x <= tr.x && y >= tl.y && y <= br.y;\n    }\n\n    var Helper = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getClip: getClip,\n        isPointInPlot: isPointInPlot\n    });\n\n    function compare(a, b) {\n      return a - b;\n    }\n\n    function _isScaleExist(scales, compareScale) {\n      var flag = false;\n      each(scales, function (scale) {\n        var scaleValues = [].concat(scale.values);\n        var compareScaleValues = [].concat(compareScale.values);\n\n        if (scale.type === compareScale.type && scale.field === compareScale.field && scaleValues.sort(compare).toString() === compareScaleValues.sort(compare).toString()) {\n          flag = true;\n          return;\n        }\n      });\n      return flag;\n    }\n\n    var Chart = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Chart, _Base);\n\n      Chart.initPlugins = function initPlugins() {\n        return {\n          _plugins: [],\n          _cacheId: 0,\n          register: function register(plugins) {\n            var p = this._plugins;\n            [].concat(plugins).forEach(function (plugin) {\n              if (p.indexOf(plugin) === -1) {\n                p.push(plugin);\n              }\n            });\n            this._cacheId++;\n          },\n          unregister: function unregister(plugins) {\n            var p = this._plugins;\n            [].concat(plugins).forEach(function (plugin) {\n              var idx = p.indexOf(plugin);\n\n              if (idx !== -1) {\n                p.splice(idx, 1);\n              }\n            });\n            this._cacheId++;\n          },\n          clear: function clear() {\n            this._plugins = [];\n            this._cacheId++;\n          },\n          count: function count() {\n            return this._plugins.length;\n          },\n          getAll: function getAll() {\n            return this._plugins;\n          },\n          notify: function notify(chart, hook, args) {\n            var descriptors = this.descriptors(chart);\n            var ilen = descriptors.length;\n            var i;\n            var descriptor;\n            var plugin;\n            var params;\n            var method;\n\n            for (i = 0; i < ilen; ++i) {\n              descriptor = descriptors[i];\n              plugin = descriptor.plugin;\n              method = plugin[hook];\n\n              if (typeof method === 'function') {\n                params = [chart].concat(args || []);\n\n                if (method.apply(plugin, params) === false) {\n                  return false;\n                }\n              }\n            }\n\n            return true;\n          },\n          descriptors: function descriptors(chart) {\n            var cache = chart._plugins || (chart._plugins = {});\n\n            if (cache.id === this._cacheId) {\n              return cache.descriptors;\n            }\n\n            var plugins = [];\n            var descriptors = [];\n\n            this._plugins.concat(chart && chart.get('plugins') || []).forEach(function (plugin) {\n              var idx = plugins.indexOf(plugin);\n\n              if (idx !== -1) {\n                return;\n              }\n\n              plugins.push(plugin);\n              descriptors.push({\n                plugin: plugin\n              });\n            });\n\n            cache.descriptors = descriptors;\n            cache.id = this._cacheId;\n            return descriptors;\n          }\n        };\n      };\n\n      var _proto = Chart.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          /**\n           * the id of canvas\n           * @type {String}\n           */\n          id: null,\n\n          /** 图表渲染引擎 */\n          renderer: 'canvas',\n          rendered: false,\n\n          /**\n           * padding\n           * @type {Array|Number}\n           */\n          padding: Global.padding,\n\n          /**\n           * data\n           * @type {Array}\n           */\n          data: null,\n\n          /**\n           * scales of chart\n           * @type {Object}\n           */\n          scales: {},\n\n          /**\n           * @private\n           * geometry instances\n           * @type {Array}\n           */\n          geoms: [],\n\n          /**\n           * scale configuration\n           * @type {Object}\n           */\n          colDefs: null,\n          pixelRatio: Global.pixelRatio,\n\n          /**\n           * filter options\n           * @type {Object}\n           */\n          filters: null,\n          appendPadding: Global.appendPadding\n        };\n      };\n\n      _proto._syncYScales = function _syncYScales() {\n        var syncY = this.get('syncY');\n\n        if (!syncY) {\n          return;\n        }\n\n        var geoms = this.get('geoms');\n        var syncScales = [];\n        var min = [];\n        var max = [];\n        each(geoms, function (geom) {\n          var yScale = geom.getYScale();\n\n          if (yScale.isLinear) {\n            syncScales.push(yScale);\n            min.push(yScale.min);\n            max.push(yScale.max);\n          }\n        });\n        min = Math.min.apply(null, min);\n        max = Math.max.apply(null, max);\n        each(syncScales, function (scale) {\n          scale.change({\n            min: min\n          });\n          scale.change({\n            max: max\n          });\n        });\n      };\n\n      _proto._getFieldsForLegend = function _getFieldsForLegend() {\n        var fields = [];\n        var geoms = this.get('geoms');\n        each(geoms, function (geom) {\n          var attrOptions = geom.get('attrOptions');\n          var attrCfg = attrOptions.color;\n\n          if (attrCfg && attrCfg.field && isString(attrCfg.field)) {\n            var arr = attrCfg.field.split('*');\n            each(arr, function (item) {\n              if (fields.indexOf(item) === -1) {\n                fields.push(item);\n              }\n            });\n          }\n        });\n        return fields;\n      };\n\n      _proto._getScaleData = function _getScaleData(field) {\n        var data = this.get('data');\n        var filteredData = this.get('filteredData');\n\n        if (filteredData.length) {\n          var legendFields = this._getFieldsForLegend();\n\n          if (legendFields.indexOf(field) === -1) {\n            data = filteredData;\n          }\n        }\n\n        return data;\n      } // _updateScales() {\n      //   const scaleController = this.get('scaleController');\n      //   scaleController.updateScales();\n      //   this._adjustScale();\n      // }\n      ;\n\n      _proto._adjustScale = function _adjustScale() {\n        var self = this;\n        var scaleController = self.get('scaleController'); // 看起来是为了让柱状图最小或最大都默认从0开始\n\n        var geoms = this.get('geoms');\n\n        for (var i = 0; i < geoms.length; i++) {\n          var geom = geoms[i];\n\n          if (geom.get('type') === 'interval') {\n            var yScale = geom.getYScale();\n            scaleController.adjustStartZero(yScale);\n          }\n        }\n      };\n\n      _proto._removeGeoms = function _removeGeoms() {\n        var geoms = this.get('geoms');\n\n        while (geoms.length > 0) {\n          var geom = geoms.shift();\n          geom.destroy();\n        }\n      };\n\n      _proto._clearGeoms = function _clearGeoms() {\n        var geoms = this.get('geoms');\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          var geom = geoms[i];\n          geom.clear();\n        }\n      };\n\n      _proto._clearInner = function _clearInner() {\n        this._clearGeoms();\n\n        Chart.plugins.notify(this, 'clearInner');\n        this.emit(EVENT_CLEAR_INNER);\n        this.get('axisController') && this.get('axisController').clear();\n      };\n\n      _proto._initFilteredData = function _initFilteredData() {\n        var filters = this.get('filters');\n        var data = this.get('data') || [];\n\n        if (filters) {\n          data = data.filter(function (obj) {\n            var rst = true;\n            each(filters, function (fn, k) {\n              if (fn) {\n                rst = fn(obj[k], obj);\n\n                if (!rst) {\n                  return false;\n                }\n              }\n            });\n            return rst;\n          });\n        }\n\n        this.set('filteredData', data);\n      };\n\n      _proto._changeGeomsData = function _changeGeomsData() {\n        var geoms = this.get('geoms');\n        var data = this.get('filteredData');\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          var geom = geoms[i];\n          geom.changeData(data);\n        }\n      };\n\n      _proto._initGeom = function _initGeom(geom) {\n        if (geom.get('isInit')) {\n          return;\n        }\n\n        var coord = this.get('coord');\n        var data = this.get('filteredData');\n        var colDefs = this.get('colDefs');\n        var middlePlot = this.get('middlePlot');\n        geom.set('chart', this);\n        geom.set('container', middlePlot.addGroup());\n        geom.set('data', data);\n        geom.set('coord', coord);\n        geom.set('colDefs', colDefs);\n        geom.init();\n        this.emit(EVENT_AFTER_GEOM_INIT, geom);\n      };\n\n      _proto._initGeoms = function _initGeoms() {\n        var geoms = this.get('geoms');\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          this._initGeom(geoms[i]);\n        }\n      };\n\n      _proto._initCoord = function _initCoord() {\n        var plot = this.get('plotRange');\n        var coordCfg = mix({\n          type: 'cartesian'\n        }, this.get('coordCfg'), {\n          plot: plot\n        });\n        var type = coordCfg.type;\n        var C = Base$1[upperFirst(type)];\n        var coord = new C(coordCfg);\n        this.set('coord', coord);\n      };\n\n      _proto._initLayout = function _initLayout() {\n        var padding = this.get('_padding');\n\n        if (!padding) {\n          padding = this.get('margin') || this.get('padding');\n          padding = parsePadding(padding);\n        }\n\n        var top = padding[0] === 'auto' ? 0 : padding[0];\n        var right = padding[1] === 'auto' ? 0 : padding[1];\n        var bottom = padding[2] === 'auto' ? 0 : padding[2];\n        var left = padding[3] === 'auto' ? 0 : padding[3];\n        var width = this.get('width');\n        var height = this.get('height');\n        var start = {\n          x: left,\n          y: top\n        };\n        var end = {\n          x: width - right,\n          y: height - bottom\n        };\n        var plot = this.get('plot');\n\n        if (plot) {\n          plot.reset(start, end);\n          return;\n        }\n\n        var newPlot = new Plot({\n          start: start,\n          end: end\n        });\n        this.set('plotRange', newPlot);\n        this.set('plot', newPlot);\n      };\n\n      _proto._initCanvas = function _initCanvas() {\n        var self = this;\n\n        try {\n          var canvas = createCanvas({\n            renderer: self.get('renderer'),\n            el: self.get('el') || self.get('id'),\n            context: self.get('context'),\n            pixelRatio: self.get('pixelRatio'),\n            width: self.get('width'),\n            height: self.get('height'),\n            fontFamily: Global.fontFamily,\n            aria: self.get('aria'),\n            title: self.get('title'),\n            landscape: self.get('landscape')\n          });\n          self.set('canvas', canvas);\n          self.set('el', canvas.get('el'));\n          self.set('width', canvas.get('width'));\n          self.set('height', canvas.get('height'));\n        } catch (error) {\n          throw error;\n        }\n\n        Chart.plugins.notify(self, 'afterCanvasInit');\n      };\n\n      _proto._initLayers = function _initLayers() {\n        var canvas = this.get('canvas');\n        this.set('backPlot', canvas.addGroup());\n        this.set('middlePlot', canvas.addGroup({\n          zIndex: 10\n        }));\n        this.set('frontPlot', canvas.addGroup({\n          zIndex: 20\n        }));\n      };\n\n      _proto._initEvents = function _initEvents() {\n        var _this2 = this;\n\n        // 数据更新后的一些更新\n        this.on(EVENT_AFTER_DATA_CHANGE, function () {\n          // 数据更新后，重新设置filterdata\n          _this2._initFilteredData(); // 更新geoms里的数据\n\n\n          _this2._changeGeomsData();\n        }); // 大小变化后的一些更新\n\n        this.on(EVENT_AFTER_SIZE_CHANGE, function () {\n          _this2._initLayout(); // layout变化后，坐标轴也需要做相应的变化\n\n\n          var coord = _this2.get('coord');\n\n          if (coord) {\n            coord.reset(_this2.get('plot'));\n          }\n        });\n      };\n\n      _proto._initScaleController = function _initScaleController() {\n        var scaleController = new ScaleController({\n          chart: this\n        }); // 让colDefs 和 scaleController.defs 用同一个对象，这样就不用考虑同步的问题\n\n        this.set('colDefs', scaleController.defs); // 已经实例化的scales 也保持统一个对象\n\n        this.set('scales', scaleController.scales);\n        this.set('scaleController', scaleController);\n      };\n\n      _proto._clearScaleController = function _clearScaleController() {\n        var scaleController = this.get('scaleController');\n        scaleController.clear();\n      };\n\n      _proto._init = function _init() {\n        var self = this;\n\n        self._initCanvas();\n\n        self._initLayout();\n\n        self._initLayers();\n\n        self._initEvents();\n\n        self._initScaleController();\n\n        self.set('axisController', new AxisController({\n          frontPlot: self.get('frontPlot').addGroup({\n            className: 'axisContainer'\n          }),\n          backPlot: self.get('backPlot').addGroup({\n            className: 'axisContainer'\n          }),\n          chart: self\n        }));\n        Chart.plugins.notify(self, 'init');\n      };\n\n      function Chart(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n\n        var self = _assertThisInitialized(_this);\n\n        each(Geom, function (geomConstructor, className) {\n          var methodName = lowerFirst(className);\n\n          self[methodName] = function (cfg) {\n            var geom = new geomConstructor(cfg);\n            self.addGeom(geom);\n            return geom;\n          };\n        });\n\n        self._init();\n\n        return _this;\n      }\n\n      _proto.init = function init() {\n        // 初始filterData\n        this._initFilteredData(); // initialization coordinate instance\n\n\n        this._initCoord();\n\n        Chart.plugins.notify(this, 'beforeGeomInit'); // init all geometry instances\n\n        this._initGeoms(); // 多 Y 轴的情况时，统一 Y 轴的数值范围。\n\n\n        this._syncYScales(); // do some adjust for data\n\n\n        this._adjustScale();\n\n        this.emit(EVENT_AFTER_INIT);\n      }\n      /**\n       * set data and some scale configuration\n       * @chainable\n       * @param  {Array} data the dataset to visualize\n       * @param  {Object} colDefs the configuration for scales\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.source = function source(data, colDefs) {\n        this.set('data', data);\n\n        if (colDefs) {\n          this.scale(colDefs);\n        }\n\n        return this;\n      };\n\n      _proto.scale = function scale(field, cfg) {\n        var scaleController = this.get('scaleController');\n        scaleController.setFieldDef(field, cfg);\n        return this;\n      }\n      /**\n       * configure the axis\n       * @chainable\n       * @param  {String|Boolean} field the field name of data\n       * @param  {Object} cfg configuration for axis\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.axis = function axis(field, cfg) {\n        var axisController = this.get('axisController');\n\n        if (!field) {\n          axisController.axisCfg = null;\n        } else {\n          axisController.axisCfg = axisController.axisCfg || {};\n          axisController.axisCfg[field] = cfg;\n        }\n\n        return this;\n      }\n      /**\n       * configure the coordinate\n       * @chainable\n       * @param  {String} type set the type of coodinate\n       * @param  {Object} cfg configuration for coordinate\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.coord = function coord(type, cfg) {\n        var coordCfg;\n\n        if (isObject(type)) {\n          coordCfg = type;\n        } else {\n          coordCfg = cfg || {};\n          coordCfg.type = type || 'cartesian';\n        }\n\n        this.set('coordCfg', coordCfg);\n        return this;\n      };\n\n      _proto.filter = function filter(field, condition) {\n        var filters = this.get('filters') || {};\n        filters[field] = condition;\n        this.set('filters', filters); // 如果已经render过，则再重新触发一次change\n\n        if (this.get('rendered')) {\n          this.emit(EVENT_AFTER_DATA_CHANGE, this.get('data'));\n        }\n      }\n      /**\n       * render the chart\n       * @chainable\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.render = function render() {\n        var rendered = this.get('rendered');\n        var canvas = this.get('canvas');\n        var geoms = this.get('geoms'); // 已经渲染过\n\n        if (rendered) {\n          this._initGeoms();\n\n          this._adjustScale();\n        } else {\n          this.init();\n          this.set('rendered', true);\n        }\n\n        this.emit(EVENT_BEFORE_RENDER);\n        Chart.plugins.notify(this, 'beforeGeomDraw');\n\n        this._renderAxis();\n\n        var middlePlot = this.get('middlePlot');\n\n        if (this.get('limitInPlot') && !middlePlot.attr('clip')) {\n          var coord = this.get('coord');\n          var clip = getClip(coord);\n          clip.set('canvas', middlePlot.get('canvas'));\n          middlePlot.attr('clip', clip);\n        }\n\n        this.emit(EVENT_BEFORE_GEOM_DRAW);\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          var geom = geoms[i];\n          geom.paint();\n        }\n\n        this.emit(EVENT_AFTER_GEOM_DRAW);\n        Chart.plugins.notify(this, 'afterGeomDraw');\n        canvas.sort();\n        this.get('frontPlot').sort();\n        Chart.plugins.notify(this, 'beforeCanvasDraw');\n        canvas.draw();\n        this.emit(EVENT_AFTER_RENDER);\n        return this;\n      }\n      /**\n       * clear the chart, include geometris and all the shapes\n       * @chainable\n       * @return {Chart} return the chart\n       */\n      ;\n\n      _proto.clear = function clear() {\n        Chart.plugins.notify(this, 'clear');\n        this.emit(EVENT_CLEAR);\n\n        this._clearInner();\n\n        this._removeGeoms();\n\n        this._clearScaleController();\n\n        this.set('legendItems', null);\n        this.set('filters', null);\n        this.set('isUpdate', false);\n        this.set('_padding', null);\n        this.set('rendered', false);\n        var canvas = this.get('canvas');\n        canvas.draw();\n        return this;\n      };\n\n      _proto.repaint = function repaint() {\n        // 如果在没有render之前就repaint的，就直接return退出\n        var rendered = this.get('rendered');\n\n        if (!rendered) {\n          return;\n        }\n\n        this.set('isUpdate', true);\n        this.set('legendItems', null);\n        Chart.plugins.notify(this, 'repaint');\n\n        this._clearInner();\n\n        this.emit(EVENT_REPAINT);\n        this.render();\n      };\n\n      _proto.changeData = function changeData(data) {\n        this.emit(EVENT_BEFORE_DATA_CHANGE, data);\n        this.set('data', data);\n        Chart.plugins.notify(this, 'changeData');\n        this.emit(EVENT_AFTER_DATA_CHANGE, data);\n        this.set('_padding', null);\n        this.repaint();\n      };\n\n      _proto.changeSize = function changeSize(width, height) {\n        if (width) {\n          this.set('width', width);\n        } else {\n          width = this.get('width');\n        }\n\n        if (height) {\n          this.set('height', height);\n        } else {\n          height = this.get('height');\n        }\n\n        var canvas = this.get('canvas');\n        canvas.changeSize(width, height);\n        this.emit(EVENT_AFTER_SIZE_CHANGE, {\n          width: width,\n          height: height\n        });\n        this.repaint();\n        return this;\n      };\n\n      _proto.destroy = function destroy() {\n        this.clear();\n        var canvas = this.get('canvas');\n        canvas.destroy();\n        Chart.plugins.notify(this, 'afterCanvasDestroyed');\n\n        if (this._interactions) {\n          each(this._interactions, function (interaction) {\n            interaction.destroy();\n          });\n        }\n\n        _Base.prototype.destroy.call(this);\n      }\n      /**\n       * calculate dataset's position on canvas\n       * @param  {Object} record the dataset\n       * @return {Object} return the position\n       */\n      ;\n\n      _proto.getPosition = function getPosition(record) {\n        var self = this;\n        var coord = self.get('coord');\n        var xScale = self.getXScale();\n        var xField = xScale.field;\n        var yScales = self.getYScales(); // default first\n\n        var yScale = yScales[0];\n        var yField = yScale.field;\n\n        for (var i = 0, len = yScales.length; i < len; i++) {\n          var scale = yScales[i];\n          var field = scale.field;\n\n          if (record[field]) {\n            yScale = scale;\n            yField = field;\n            break;\n          }\n        }\n\n        var x = xScale.scale(record[xField]);\n        var y = yScale.scale(record[yField]);\n        return coord.convertPoint({\n          x: x,\n          y: y\n        });\n      }\n      /**\n       * get the data item of the point\n       * @param  {Object} point canvas position\n       * @return {Object} return the data item\n       */\n      ;\n\n      _proto.getRecord = function getRecord(point) {\n        var self = this;\n        var coord = self.get('coord');\n        var xScale = self.getXScale();\n        var yScale = self.getYScales()[0];\n        var invertPoint = coord.invertPoint(point);\n        var record = {};\n        record[xScale.field] = xScale.invert(invertPoint.x);\n        record[yScale.field] = yScale.invert(invertPoint.y);\n        return record;\n      }\n      /**\n       * get the dataset of the point\n       * @param  {Object} point canvas position\n       * @return {Array} return the dataset\n      **/\n      ;\n\n      _proto.getSnapRecords = function getSnapRecords(point) {\n        var geom = this.get('geoms')[0];\n        var data = [];\n\n        if (geom) {\n          // need to judge\n          data = geom.getSnapRecords(point);\n        }\n\n        return data;\n      }\n      /**\n       * creat scale instances\n       * @param  {String} field field name of data\n       * @return {Scale} return the scale\n       */\n      ;\n\n      _proto.createScale = function createScale(field) {\n        var data = this._getScaleData(field);\n\n        var scaleController = this.get('scaleController');\n        return scaleController.createScale(field, data);\n      }\n      /**\n       * @protected\n       * add geometry instance to geoms\n       * @param {Geom} geom geometry instance\n       */\n      ;\n\n      _proto.addGeom = function addGeom(geom) {\n        var geoms = this.get('geoms');\n        geoms.push(geom);\n      }\n      /**\n       * get the scale of x axis\n       * @return {Scale} return the scale\n       */\n      ;\n\n      _proto.getXScale = function getXScale() {\n        var self = this;\n        var geoms = self.get('geoms');\n        var xScale = geoms[0].getXScale();\n        return xScale;\n      }\n      /**\n       * get the scale of y axis\n       * @return {Array} return the scale\n       */\n      ;\n\n      _proto.getYScales = function getYScales() {\n        var geoms = this.get('geoms');\n        var rst = [];\n        each(geoms, function (geom) {\n          var yScale = geom.getYScale();\n\n          if (rst.indexOf(yScale) === -1) {\n            rst.push(yScale);\n          }\n        });\n        return rst;\n      };\n\n      _proto.getLegendItems = function getLegendItems() {\n        if (this.get('legendItems')) {\n          return this.get('legendItems');\n        }\n\n        var legendItems = {};\n        var scales = [];\n        var geoms = this.get('geoms');\n        each(geoms, function (geom) {\n          var colorAttr = geom.getAttr('color');\n\n          if (colorAttr) {\n            var scale = colorAttr.getScale('color'); // 只支持分类图例\n\n            if (scale.isCategory && !_isScaleExist(scales, scale)) {\n              scales.push(scale);\n              var field = scale.field;\n              var ticks = scale.getTicks();\n              var items = [];\n              each(ticks, function (tick) {\n                var text = tick.text;\n                var name = text;\n                var scaleValue = tick.value;\n                var value = scale.invert(scaleValue);\n                var color = colorAttr.mapping(value).join('') || Global.defaultColor;\n                var marker = {\n                  fill: color,\n                  radius: 3,\n                  symbol: 'circle',\n                  stroke: '#fff'\n                };\n                items.push({\n                  name: name,\n                  // for display\n                  dataValue: value,\n                  // the origin value\n                  checked: true,\n                  marker: marker\n                });\n              });\n              legendItems[field] = items;\n            }\n          }\n        });\n        this.set('legendItems', legendItems);\n        return legendItems;\n      } // register the plugins\n      ;\n\n      _proto.registerPlugins = function registerPlugins(plugins) {\n        var self = this;\n        var chartPlugins = self.get('plugins') || [];\n\n        if (!isArray(chartPlugins)) {\n          chartPlugins = [chartPlugins];\n        }\n\n        [].concat(plugins).forEach(function (plugin) {\n          if (chartPlugins.indexOf(plugin) === -1) {\n            plugin.init && plugin.init(self); // init\n\n            chartPlugins.push(plugin);\n          }\n        });\n        Chart.plugins._cacheId++;\n        self.set('plugins', chartPlugins);\n      };\n\n      _proto._renderAxis = function _renderAxis() {\n        var axisController = this.get('axisController');\n        var xScale = this.getXScale();\n        var yScales = this.getYScales();\n        var coord = this.get('coord');\n        Chart.plugins.notify(this, 'beforeRenderAxis');\n        axisController.createAxis(coord, xScale, yScales);\n      };\n\n      _proto._isAutoPadding = function _isAutoPadding() {\n        if (this.get('_padding')) {\n          return false;\n        }\n\n        var padding = this.get('padding');\n\n        if (isArray(padding)) {\n          return padding.indexOf('auto') !== -1;\n        }\n\n        return padding === 'auto';\n      };\n\n      _proto._updateLayout = function _updateLayout(padding) {\n        var width = this.get('width');\n        var height = this.get('height');\n        var start = {\n          x: padding[3],\n          y: padding[0]\n        };\n        var end = {\n          x: width - padding[1],\n          y: height - padding[2]\n        };\n        var plot = this.get('plot');\n        var coord = this.get('coord');\n        plot.reset(start, end);\n        coord.reset(plot);\n      }\n      /**\n       * 是否为横屏展示\n       *\n       * @param {Boolean} landscape 是否为横屏\n       */\n      ;\n\n      _proto.landscape = function landscape(_landscape) {\n        var canvas = this.get('canvas');\n        canvas.set('landscape', _landscape);\n      };\n\n      return Chart;\n    }(Base);\n\n    Chart.plugins = Chart.initPlugins();\n\n    var track = function track() {\n      return null;\n    };\n\n    /**\n     * @fileOverview shape util\n     * @author dxq613@gmail.com\n     */\n\n    function splitPoints(obj) {\n      var points = [];\n      var x = obj.x;\n      var y = obj.y;\n      y = isArray(y) ? y : [y];\n      y.forEach(function (yItem, index) {\n        var point = {\n          x: isArray(x) ? x[index] : x,\n          y: yItem\n        };\n        points.push(point);\n      });\n      return points;\n    }\n\n    function splitArray(data, yField, connectNulls) {\n      if (!data.length) return [];\n      var arr = [];\n      var tmp = [];\n      var yValue;\n      each(data, function (obj) {\n        yValue = obj._origin ? obj._origin[yField] : obj[yField];\n\n        if (connectNulls) {\n          if (!isNil(yValue)) {\n            tmp.push(obj);\n          }\n        } else {\n          if (isArray(yValue) && isNil(yValue[0]) || isNil(yValue)) {\n            if (tmp.length) {\n              arr.push(tmp);\n              tmp = [];\n            }\n          } else {\n            tmp.push(obj);\n          }\n        }\n      });\n\n      if (tmp.length) {\n        arr.push(tmp);\n      }\n\n      return arr;\n    }\n\n    var SHAPES = ['circle', 'hollowCircle', 'rect'];\n    var Point = Shape$1.registerFactory('point', {\n      defaultShapeType: 'circle',\n      getDefaultPoints: function getDefaultPoints(pointInfo) {\n        return splitPoints(pointInfo);\n      }\n    });\n\n    function getPointsCfg(cfg) {\n      var style = {\n        lineWidth: 0,\n        stroke: cfg.color,\n        fill: cfg.color\n      };\n\n      if (cfg.size) {\n        style.size = cfg.size;\n      }\n\n      mix(style, cfg.style);\n      return mix({}, Global.shape.point, style);\n    }\n\n    function drawShape(cfg, container, shape) {\n      if (cfg.size === 0) return;\n      var pointCfg = getPointsCfg(cfg);\n      var size = pointCfg.r || pointCfg.size;\n      var x = cfg.x;\n      var y = !isArray(cfg.y) ? [cfg.y] : cfg.y;\n\n      if (shape === 'hollowCircle') {\n        pointCfg.lineWidth = 1;\n        pointCfg.fill = null;\n      }\n\n      for (var i = 0, len = y.length; i < len; i++) {\n        if (shape === 'rect') {\n          return container.addShape('Rect', {\n            className: 'point',\n            attrs: mix({\n              x: x - size,\n              y: y[i] - size,\n              width: size * 2,\n              height: size * 2\n            }, pointCfg)\n          });\n        }\n\n        return container.addShape('Circle', {\n          className: 'point',\n          attrs: mix({\n            x: x,\n            y: y[i],\n            r: size\n          }, pointCfg)\n        });\n      }\n    }\n\n    each(SHAPES, function (shapeType) {\n      Shape$1.registerShape('point', shapeType, {\n        draw: function draw(cfg, container) {\n          return drawShape(cfg, container, shapeType);\n        }\n      });\n    });\n\n    var Point$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Point, _Geom);\n\n      function Point() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Point.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'point';\n        cfg.shapeType = 'point';\n        cfg.generatePoints = false;\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        each(data, function (obj) {\n          var shape = obj.shape;\n          var cfg = self.getDrawCfg(obj);\n\n          if (isArray(obj.y)) {\n            var hasStack = self.hasAdjust('stack');\n            each(obj.y, function (y, idx) {\n              cfg.y = y;\n\n              if (!hasStack || idx !== 0) {\n                self.drawShape(shape, obj, cfg, container, shapeFactory);\n              }\n            });\n          } else if (!isNil(obj.y)) {\n            self.drawShape(shape, obj, cfg, container, shapeFactory);\n          }\n        });\n      };\n\n      return Point;\n    }(Geom);\n\n    Geom.Point = Point$1;\n\n    var Line$2 = Shape$1.registerFactory('line', {\n      defaultShapeType: 'line'\n    });\n\n    function getStyle$1(cfg) {\n      var style = {\n        strokeStyle: cfg.color\n      };\n\n      if (cfg.size >= 0) {\n        style.lineWidth = cfg.size;\n      }\n\n      mix(style, cfg.style);\n      return mix({}, Global.shape.line, style);\n    }\n\n    function drawLines(cfg, container, style, smooth) {\n      var points = cfg.points;\n\n      if (points.length && isArray(points[0].y)) {\n        var topPoints = [];\n        var bottomPoints = [];\n\n        for (var i = 0, len = points.length; i < len; i++) {\n          var point = points[i];\n          var tmp = splitPoints(point);\n          bottomPoints.push(tmp[0]);\n          topPoints.push(tmp[1]);\n        }\n\n        if (cfg.isInCircle) {\n          topPoints.push(topPoints[0]);\n          bottomPoints.push(bottomPoints[0]);\n        }\n\n        if (cfg.isStack) {\n          return container.addShape('Polyline', {\n            className: 'line',\n            attrs: mix({\n              points: topPoints,\n              smooth: smooth\n            }, style)\n          });\n        }\n\n        var topShape = container.addShape('Polyline', {\n          className: 'line',\n          attrs: mix({\n            points: topPoints,\n            smooth: smooth\n          }, style)\n        });\n        var bottomShape = container.addShape('Polyline', {\n          className: 'line',\n          attrs: mix({\n            points: bottomPoints,\n            smooth: smooth\n          }, style)\n        });\n        return [topShape, bottomShape];\n      }\n\n      if (cfg.isInCircle) {\n        points.push(points[0]);\n      }\n\n      return container.addShape('Polyline', {\n        className: 'line',\n        attrs: mix({\n          points: points,\n          smooth: smooth\n        }, style)\n      });\n    }\n\n    var SHAPES$1 = ['line', 'smooth', 'dash'];\n    each(SHAPES$1, function (shapeType) {\n      Shape$1.registerShape('line', shapeType, {\n        draw: function draw(cfg, container) {\n          var smooth = shapeType === 'smooth';\n          var style = getStyle$1(cfg);\n\n          if (shapeType === 'dash') {\n            style.lineDash = Global.lineDash;\n          }\n\n          return drawLines(cfg, container, style, smooth);\n        }\n      });\n    });\n\n    var Path = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Path, _Geom);\n\n      function Path() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Path.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'path';\n        cfg.shapeType = 'line';\n        return cfg;\n      };\n\n      _proto.getDrawCfg = function getDrawCfg(obj) {\n        var cfg = _Geom.prototype.getDrawCfg.call(this, obj);\n\n        cfg.isStack = this.hasAdjust('stack');\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        var yScale = self.getYScale();\n        var connectNulls = self.get('connectNulls');\n        var splitArrayObj = splitArray(data, yScale.field, connectNulls);\n        var cfg = this.getDrawCfg(data[0]);\n        cfg.origin = data;\n        each(splitArrayObj, function (subData, splitedIndex) {\n          cfg.splitedIndex = splitedIndex;\n          cfg.points = subData;\n          self.drawShape(cfg.shape, data[0], cfg, container, shapeFactory);\n        });\n      };\n\n      return Path;\n    }(Geom);\n\n    Geom.Path = Path;\n\n    var Line$3 = /*#__PURE__*/function (_Path) {\n      _inheritsLoose(Line, _Path);\n\n      function Line() {\n        return _Path.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Path.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'line';\n        cfg.sortable = true;\n        return cfg;\n      };\n\n      return Line;\n    }(Path);\n\n    Geom.Line = Line$3;\n\n    function equals(v1, v2) {\n      return Math.abs(v1 - v2) < 0.00001;\n    }\n\n    function notEmpty(value) {\n      return !isNaN(value) && !isNil(value);\n    }\n\n    function filterPoints(points) {\n      var filteredPoints = []; // filter the point which x or y is NaN\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n\n        if (notEmpty(point.x) && notEmpty(point.y)) {\n          filteredPoints.push(point);\n        }\n      }\n\n      return filteredPoints;\n    }\n\n    function equalsCenter(points, center) {\n      var eqls = true;\n      each(points, function (point) {\n        if (!equals(point.x, center.x) || !equals(point.y, center.y)) {\n          eqls = false;\n          return false;\n        }\n      });\n      return eqls;\n    }\n\n    function drawRectShape(topPoints, bottomPoints, container, style, isSmooth) {\n      var shape;\n      var points = topPoints.concat(bottomPoints);\n\n      if (isSmooth) {\n        shape = container.addShape('Custom', {\n          className: 'area',\n          attrs: mix({\n            points: points\n          }, style),\n          createPath: function createPath(context) {\n            var constaint = [[0, 0], [1, 1]];\n            var points = filterPoints(this._attrs.attrs.points);\n            var pointsLen = points.length;\n            var topPoints = points.slice(0, pointsLen / 2);\n            var bottomPoints = points.slice(pointsLen / 2, pointsLen);\n            var topSps = catmullRom2bezier(topPoints, false, constaint);\n            context.beginPath();\n            context.moveTo(topPoints[0].x, topPoints[0].y);\n\n            for (var i = 0, n = topSps.length; i < n; i++) {\n              var sp = topSps[i];\n              context.bezierCurveTo(sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]);\n            }\n\n            if (bottomPoints.length) {\n              var bottomSps = catmullRom2bezier(bottomPoints, false, constaint);\n              context.lineTo(bottomPoints[0].x, bottomPoints[0].y);\n\n              for (var _i = 0, _n = bottomSps.length; _i < _n; _i++) {\n                var _sp = bottomSps[_i];\n                context.bezierCurveTo(_sp[1], _sp[2], _sp[3], _sp[4], _sp[5], _sp[6]);\n              }\n            }\n\n            context.closePath();\n          },\n          calculateBox: function calculateBox() {\n            var points = filterPoints(this._attrs.attrs.points);\n            return getBBoxFromPoints(points);\n          }\n        });\n      } else {\n        shape = container.addShape('Polyline', {\n          className: 'area',\n          attrs: mix({\n            points: points\n          }, style)\n        });\n      }\n\n      return shape;\n    }\n\n    function drawShape$1(cfg, container, isSmooth) {\n      var self = this;\n      var points = cfg.points;\n      var topPoints = [];\n      var bottomPoints = [];\n      each(points, function (point) {\n        bottomPoints.push(point[0]);\n        topPoints.push(point[1]);\n      });\n      var style = mix({\n        fillStyle: cfg.color\n      }, Global.shape.area, cfg.style);\n      bottomPoints.reverse();\n      topPoints = self.parsePoints(topPoints);\n      bottomPoints = self.parsePoints(bottomPoints);\n\n      if (cfg.isInCircle) {\n        topPoints.push(topPoints[0]);\n        bottomPoints.unshift(bottomPoints[bottomPoints.length - 1]);\n\n        if (equalsCenter(bottomPoints, cfg.center)) {\n          bottomPoints = [];\n        }\n      }\n\n      return drawRectShape(topPoints, bottomPoints, container, style, isSmooth);\n    }\n\n    var Area = Shape$1.registerFactory('area', {\n      defaultShapeType: 'area',\n      getDefaultPoints: function getDefaultPoints(obj) {\n        var x = obj.x;\n        var y = obj.y;\n        var y0 = obj.y0;\n        y = isArray(y) ? y : [y0, y];\n        var points = [];\n        points.push({\n          x: x,\n          y: y[0]\n        }, {\n          x: x,\n          y: y[1]\n        });\n        return points;\n      }\n    });\n    var SHAPES$2 = ['area', 'smooth'];\n    each(SHAPES$2, function (shapeType) {\n      Shape$1.registerShape('area', shapeType, {\n        draw: function draw(cfg, container) {\n          var smooth = shapeType === 'smooth';\n          return drawShape$1.call(this, cfg, container, smooth);\n        }\n      });\n    });\n\n    var Area$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Area, _Geom);\n\n      function Area() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Area.prototype;\n\n      /**\n       * get the default configuration\n       * @protected\n       * @return {Object} return the result\n       */\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'area';\n        cfg.shapeType = 'area';\n        cfg.generatePoints = true;\n        cfg.sortable = true;\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        var cfg = this.getDrawCfg(data[0]);\n        var yScale = self.getYScale();\n        var connectNulls = self.get('connectNulls');\n        var splitArrayfn = splitArray(data, yScale.field, connectNulls);\n        cfg.origin = data;\n        each(splitArrayfn, function (subData, splitedIndex) {\n          cfg.splitedIndex = splitedIndex;\n          var points = subData.map(function (obj) {\n            return obj.points;\n          });\n          cfg.points = points;\n          self.drawShape(cfg.shape, data[0], cfg, container, shapeFactory);\n        });\n      };\n\n      return Area;\n    }(Geom);\n\n    Geom.Area = Area$1;\n\n    /**\n     * @fileOverview Utility for calculate the with ratui in x axis\n     * @author sima.zhang1990@gmail.com\n     * @author dxq613@gmail.com\n     */\n    var SizeMixin = {\n      initEvent: function initEvent() {\n        var _this = this;\n\n        var chart = this.get('chart');\n\n        if (!chart) {\n          return;\n        }\n\n        chart.on(EVENT_AFTER_SIZE_CHANGE, function () {\n          _this.set('_width', null);\n        });\n      },\n      getDefaultSize: function getDefaultSize() {\n        var defaultSize = this.get('defaultSize');\n\n        if (!defaultSize) {\n          var coord = this.get('coord');\n          var xScale = this.getXScale();\n          var dataArray = this.get('dataArray');\n          var values = uniq(xScale.values);\n          var count = values.length;\n          var range = xScale.range;\n          var normalizeSize = 1 / count;\n          var widthRatio = 1;\n\n          if (coord && coord.isPolar) {\n            if (coord.transposed && count > 1) {\n              widthRatio = Global.widthRatio.multiplePie;\n            } else {\n              widthRatio = Global.widthRatio.rose;\n            }\n          } else {\n            if (xScale.isLinear) {\n              normalizeSize *= range[1] - range[0];\n            }\n\n            widthRatio = Global.widthRatio.column;\n          }\n\n          normalizeSize *= widthRatio;\n\n          if (this.hasAdjust('dodge')) {\n            normalizeSize = normalizeSize / dataArray.length;\n          }\n\n          defaultSize = normalizeSize;\n          this.set('defaultSize', defaultSize);\n        }\n\n        return defaultSize;\n      },\n      getDimWidth: function getDimWidth(dimName) {\n        var coord = this.get('coord');\n        var start = coord.convertPoint({\n          x: 0,\n          y: 0\n        });\n        var end = coord.convertPoint({\n          x: dimName === 'x' ? 1 : 0,\n          y: dimName === 'x' ? 0 : 1\n        });\n        var width = 0;\n\n        if (start && end) {\n          width = Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2));\n        }\n\n        return width;\n      },\n      _getWidth: function _getWidth() {\n        var width = this.get('_width');\n\n        if (!width) {\n          var coord = this.get('coord');\n\n          if (coord && coord.isPolar && !coord.transposed) {\n            width = (coord.endAngle - coord.startAngle) * coord.circleRadius;\n          } else {\n            width = this.getDimWidth('x');\n          }\n\n          this.set('_width', width);\n        }\n\n        return width;\n      },\n      _toNormalizedSize: function _toNormalizedSize(size) {\n        var width = this._getWidth();\n\n        return size / width;\n      },\n      _toCoordSize: function _toCoordSize(normalizeSize) {\n        var width = this._getWidth();\n\n        return width * normalizeSize;\n      },\n      getNormalizedSize: function getNormalizedSize(obj) {\n        var size = this.getAttrValue('size', obj);\n\n        if (isNil(size)) {\n          size = this.getDefaultSize();\n        } else {\n          size = this._toNormalizedSize(size);\n        }\n\n        return size;\n      },\n      getSize: function getSize(obj) {\n        var size = this.getAttrValue('size', obj);\n\n        if (isNil(size)) {\n          var normalizeSize = this.getDefaultSize();\n          size = this._toCoordSize(normalizeSize);\n        }\n\n        return size;\n      }\n    };\n\n    function getRectPoints(cfg) {\n      var x = cfg.x,\n          y = cfg.y,\n          y0 = cfg.y0,\n          size = cfg.size;\n      var ymin = y0;\n      var ymax = y;\n\n      if (isArray(y)) {\n        ymax = y[1];\n        ymin = y[0];\n      }\n\n      var xmin;\n      var xmax;\n\n      if (isArray(x)) {\n        xmin = x[0];\n        xmax = x[1];\n      } else {\n        xmin = x - size / 2;\n        xmax = x + size / 2;\n      }\n\n      return [{\n        x: xmin,\n        y: ymin\n      }, {\n        x: xmin,\n        y: ymax\n      }, {\n        x: xmax,\n        y: ymax\n      }, {\n        x: xmax,\n        y: ymin\n      }];\n    }\n\n    function getRectRange(points) {\n      var xValues = [];\n      var yValues = [];\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        xValues.push(point.x);\n        yValues.push(point.y);\n      }\n\n      var xMin = Math.min.apply(null, xValues);\n      var yMin = Math.min.apply(null, yValues);\n      var xMax = Math.max.apply(null, xValues);\n      var yMax = Math.max.apply(null, yValues);\n      return {\n        x: xMin,\n        y: yMin,\n        width: xMax - xMin,\n        height: yMax - yMin\n      };\n    }\n\n    function getMiddlePoint(a, b) {\n      var x = (a.x - b.x) / 2 + b.x;\n      var y = (a.y - b.y) / 2 + b.y;\n      return {\n        x: x,\n        y: y\n      };\n    }\n\n    var Interval = Shape$1.registerFactory('interval', {\n      defaultShapeType: 'rect',\n      getDefaultPoints: function getDefaultPoints(cfg) {\n        return getRectPoints(cfg);\n      }\n    });\n    Shape$1.registerShape('interval', 'rect', {\n      draw: function draw(cfg, container) {\n        var points = this.parsePoints(cfg.points);\n        var style = mix({\n          fill: cfg.color\n        }, Global.shape.interval, cfg.style);\n\n        if (cfg.isInCircle) {\n          var newPoints = points.slice(0);\n\n          if (this._coord.transposed) {\n            newPoints = [points[0], points[3], points[2], points[1]];\n          }\n\n          var _cfg$center = cfg.center,\n              x = _cfg$center.x,\n              y = _cfg$center.y;\n          var v = [1, 0];\n          var v0 = [newPoints[0].x - x, newPoints[0].y - y];\n          var v1 = [newPoints[1].x - x, newPoints[1].y - y];\n          var v2 = [newPoints[2].x - x, newPoints[2].y - y];\n          var startAngle = Vector2.angleTo(v, v1);\n          var endAngle = Vector2.angleTo(v, v2);\n          var r0 = Vector2.length(v0);\n          var r = Vector2.length(v1);\n\n          if (startAngle >= 1.5 * Math.PI) {\n            startAngle = startAngle - 2 * Math.PI;\n          }\n\n          if (endAngle >= 1.5 * Math.PI) {\n            endAngle = endAngle - 2 * Math.PI;\n          }\n\n          return container.addShape('Sector', {\n            className: 'interval',\n            attrs: mix({\n              x: x,\n              y: y,\n              r: r,\n              r0: r0,\n              startAngle: startAngle,\n              endAngle: endAngle\n            }, style)\n          });\n        }\n\n        var rectCfg = getRectRange(points);\n        return container.addShape('rect', {\n          className: 'interval',\n          attrs: mix(rectCfg, style)\n        });\n      }\n    }); // 金字塔 和 漏斗图\n\n    ['pyramid', 'funnel'].forEach(function (shapeType) {\n      Shape$1.registerShape('interval', shapeType, {\n        getPoints: function getPoints(cfg) {\n          cfg.size = cfg.size * 2; // 漏斗图的 size 是柱状图的两倍\n\n          return getRectPoints(cfg);\n        },\n        draw: function draw(cfg, container) {\n          var points = this.parsePoints(cfg.points);\n          var nextPoints = this.parsePoints(cfg.nextPoints);\n          var polygonPoints = null;\n\n          if (nextPoints) {\n            polygonPoints = [points[0], points[1], nextPoints[1], nextPoints[0]];\n          } else {\n            polygonPoints = [points[0], points[1]]; // pyramid 顶部是三角形，所以取中心点就好了，funnel顶部是长方形\n\n            if (shapeType === 'pyramid') {\n              polygonPoints.push(getMiddlePoint(points[2], points[3]));\n            } else {\n              polygonPoints.push(points[2], points[3]);\n            }\n          }\n\n          var attrs = mix({\n            fill: cfg.color,\n            points: polygonPoints\n          }, Global.shape.interval, cfg.style);\n          return container.addShape('polygon', {\n            className: 'interval',\n            attrs: attrs\n          });\n        }\n      });\n    });\n\n    var Interval$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Interval, _Geom);\n\n      var _proto = Interval.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'interval';\n        cfg.shapeType = 'interval';\n        cfg.generatePoints = true;\n        return cfg;\n      };\n\n      function Interval(cfg) {\n        var _this;\n\n        _this = _Geom.call(this, cfg) || this;\n        mix(_assertThisInitialized(_this), SizeMixin);\n        return _this;\n      }\n\n      _proto.init = function init() {\n        _Geom.prototype.init.call(this); // 绑定事件\n\n\n        this.initEvent();\n      };\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var cfg = _Geom.prototype.createShapePointsCfg.call(this, obj);\n\n        cfg.size = this.getNormalizedSize(obj);\n        return cfg;\n      };\n\n      _proto.clearInner = function clearInner() {\n        _Geom.prototype.clearInner.call(this);\n\n        this.set('defaultSize', null);\n      };\n\n      return Interval;\n    }(Geom);\n\n    Geom.Interval = Interval$1;\n\n    var Polygon$1 = Shape$1.registerFactory('polygon', {\n      defaultShapeType: 'polygon',\n      getDefaultPoints: function getDefaultPoints(pointInfo) {\n        var points = [];\n        var x = pointInfo.x,\n            y = pointInfo.y;\n\n        for (var i = 0, len = x.length; i < len; i++) {\n          points.push({\n            x: x[i],\n            y: y[i]\n          });\n        }\n\n        return points;\n      }\n    });\n    Shape$1.registerShape('polygon', 'polygon', {\n      draw: function draw(cfg, container) {\n        var points = this.parsePoints(cfg.points);\n        var style = mix({\n          fill: cfg.color,\n          points: points\n        }, cfg.style);\n        return container.addShape('Polygon', {\n          className: 'polygon',\n          attrs: style\n        });\n      }\n    });\n\n    var Polygon$2 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Polygon, _Geom);\n\n      function Polygon() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Polygon.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'polygon';\n        cfg.shapeType = 'polygon';\n        cfg.generatePoints = true;\n        return cfg;\n      };\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var cfg = _Geom.prototype.createShapePointsCfg.call(this, obj);\n\n        var self = this;\n        var x = cfg.x;\n        var y = cfg.y;\n        var temp;\n\n        if (!(isArray(x) && isArray(y))) {\n          var xScale = self.getXScale();\n          var yScale = self.getYScale();\n          var xCount = xScale.values ? xScale.values.length : xScale.ticks.length;\n          var yCount = yScale.values ? yScale.values.length : yScale.ticks.length;\n          var xOffset = 0.5 * 1 / xCount;\n          var yOffset = 0.5 * 1 / yCount;\n\n          if (xScale.isCategory && yScale.isCategory) {\n            x = [x - xOffset, x - xOffset, x + xOffset, x + xOffset];\n            y = [y - yOffset, y + yOffset, y + yOffset, y - yOffset];\n          } else if (isArray(x)) {\n            temp = x;\n            x = [temp[0], temp[0], temp[1], temp[1]];\n            y = [y - yOffset / 2, y + yOffset / 2, y + yOffset / 2, y - yOffset / 2];\n          } else if (isArray(y)) {\n            temp = y;\n            y = [temp[0], temp[1], temp[1], temp[0]];\n            x = [x - xOffset / 2, x - xOffset / 2, x + xOffset / 2, x + xOffset / 2];\n          }\n\n          cfg.x = x;\n          cfg.y = y;\n        }\n\n        return cfg;\n      };\n\n      return Polygon;\n    }(Geom);\n\n    Geom.Polygon = Polygon$2;\n\n    function _sortValue(value) {\n      var sorted = value.sort(function (a, b) {\n        return a < b ? 1 : -1;\n      });\n      var length = sorted.length;\n\n      if (length < 4) {\n        var min = sorted[length - 1];\n\n        for (var i = 0; i < 4 - length; i++) {\n          sorted.push(min);\n        }\n      }\n\n      return sorted;\n    } // from left bottom corner, and clockwise\n\n\n    function getCandlePoints(x, y, width) {\n      var yValues = _sortValue(y);\n\n      var points = [{\n        x: x,\n        y: yValues[0]\n      }, {\n        x: x,\n        y: yValues[1]\n      }, {\n        x: x - width / 2,\n        y: yValues[2]\n      }, {\n        x: x - width / 2,\n        y: yValues[1]\n      }, {\n        x: x + width / 2,\n        y: yValues[1]\n      }, {\n        x: x + width / 2,\n        y: yValues[2]\n      }, {\n        x: x,\n        y: yValues[2]\n      }, {\n        x: x,\n        y: yValues[3]\n      }];\n      return points;\n    }\n\n    var Schema = Shape$1.registerFactory('schema', {});\n    Shape$1.registerShape('schema', 'candle', {\n      getPoints: function getPoints(cfg) {\n        return getCandlePoints(cfg.x, cfg.y, cfg.size);\n      },\n      draw: function draw(cfg, container) {\n        var points = this.parsePoints(cfg.points);\n        var style = mix({\n          stroke: cfg.color,\n          fill: cfg.color,\n          lineWidth: 1\n        }, cfg.style);\n        return container.addShape('Custom', {\n          className: 'schema',\n          attrs: style,\n          createPath: function createPath(ctx) {\n            ctx.beginPath();\n            ctx.moveTo(points[0].x, points[0].y);\n            ctx.lineTo(points[1].x, points[1].y);\n            ctx.moveTo(points[2].x, points[2].y);\n\n            for (var i = 3; i < 6; i++) {\n              ctx.lineTo(points[i].x, points[i].y);\n            }\n\n            ctx.closePath();\n            ctx.moveTo(points[6].x, points[6].y);\n            ctx.lineTo(points[7].x, points[7].y);\n          }\n        });\n      }\n    });\n\n    var Schema$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Schema, _Geom);\n\n      var _proto = Schema.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'schema';\n        cfg.shapeType = 'schema';\n        cfg.generatePoints = true;\n        return cfg;\n      };\n\n      function Schema(cfg) {\n        var _this;\n\n        _this = _Geom.call(this, cfg) || this;\n        mix(_assertThisInitialized(_this), SizeMixin);\n        return _this;\n      }\n\n      _proto.init = function init() {\n        _Geom.prototype.init.call(this); // 绑定事件\n\n\n        this.initEvent();\n      };\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var cfg = _Geom.prototype.createShapePointsCfg.call(this, obj);\n\n        cfg.size = this.getNormalizedSize(obj);\n        return cfg;\n      };\n\n      _proto.clearInner = function clearInner() {\n        _Geom.prototype.clearInner.call(this);\n\n        this.set('defaultSize', null);\n      };\n\n      return Schema;\n    }(Geom);\n\n    Geom.Schema = Schema$1;\n\n    var toString$3 = {}.toString;\n\n    var isType$1 = function isType(value, type) {\n      return toString$3.call(value) === '[object ' + type + ']';\n    };\n\n    var isType_1 = isType$1;\n\n    var isArray$1 = Array.isArray ? Array.isArray : function (value) {\n      return isType_1(value, 'Array');\n    };\n    var isArray_1 = isArray$1;\n\n    // isFinite,\n    var isNil$1 = function isNil(value) {\n      /**\n       * isNil(null) => true\n       * isNil() => true\n       */\n      return value === null || value === undefined;\n    };\n\n    var isNil_1 = isNil$1;\n\n    function _inheritsLoose$1(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    var Stack = /*#__PURE__*/function (_Adjust) {\n      _inheritsLoose$1(Stack, _Adjust);\n\n      function Stack() {\n        return _Adjust.apply(this, arguments) || this;\n      }\n\n      var _proto = Stack.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.xField = null; // 调整对应的 x 方向对应的字段名称\n\n        this.yField = null; // 调整对应的 y 方向对应的字段名称\n      };\n\n      _proto.processAdjust = function processAdjust(dataArray) {\n        this.processStack(dataArray);\n      };\n\n      _proto.processStack = function processStack(dataArray) {\n        var self = this;\n        var xField = self.xField;\n        var yField = self.yField;\n        var count = dataArray.length;\n        var stackCache = {\n          positive: {},\n          negative: {}\n        }; // 层叠顺序翻转\n\n        if (self.reverseOrder) {\n          dataArray = dataArray.slice(0).reverse();\n        }\n\n        for (var i = 0; i < count; i++) {\n          var data = dataArray[i];\n\n          for (var j = 0, len = data.length; j < len; j++) {\n            var item = data[j];\n            var x = item[xField] || 0;\n            var y = item[yField];\n            var xkey = x.toString();\n            y = isArray_1(y) ? y[1] : y;\n\n            if (!isNil_1(y)) {\n              var direction = y >= 0 ? 'positive' : 'negative';\n\n              if (!stackCache[direction][xkey]) {\n                stackCache[direction][xkey] = 0;\n              }\n\n              item[yField] = [stackCache[direction][xkey], y + stackCache[direction][xkey]];\n              stackCache[direction][xkey] += y;\n            }\n          }\n        }\n      };\n\n      return Stack;\n    }(base);\n\n    base.Stack = Stack;\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    var isObject$1 = function isObject(value) {\n      /**\n       * isObject({}) => true\n       * isObject([1, 2, 3]) => true\n       * isObject(Function) => true\n       * isObject(null) => false\n       */\n      var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n      return value !== null && type === 'object' || type === 'function';\n    };\n\n    var isObject_1 = isObject$1;\n\n    var each$1 = function each(elements, func) {\n      if (!elements) {\n        return;\n      }\n\n      var rst = void 0;\n\n      if (isArray_1(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n          rst = func(elements[i], i);\n\n          if (rst === false) {\n            break;\n          }\n        }\n      } else if (isObject_1(elements)) {\n        for (var k in elements) {\n          if (elements.hasOwnProperty(k)) {\n            rst = func(elements[k], k);\n\n            if (rst === false) {\n              break;\n            }\n          }\n        }\n      }\n    };\n\n    var each_1 = each$1;\n\n    function _inheritsLoose$2(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    var MARGIN_RATIO = 1 / 2;\n    var DODGE_RATIO = 1 / 2;\n\n    var Dodge = /*#__PURE__*/function (_Adjust) {\n      _inheritsLoose$2(Dodge, _Adjust);\n\n      function Dodge() {\n        return _Adjust.apply(this, arguments) || this;\n      }\n\n      var _proto = Dodge.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        /**\n         * 调整过程中,2个数据的间距\n         * @type {Number}\n         */\n        this.marginRatio = MARGIN_RATIO;\n        /**\n         * 调整占单位宽度的比例,例如：占2个分类间距的 1/2\n         * @type {Number}\n         */\n\n        this.dodgeRatio = DODGE_RATIO;\n        this.adjustNames = ['x', 'y']; // 调整的维度，默认,x,y都做调整\n      };\n\n      _proto.getDodgeOffset = function getDodgeOffset(range, index, count) {\n        var self = this;\n        var pre = range.pre;\n        var next = range.next;\n        var tickLength = next - pre;\n        var width = tickLength * self.dodgeRatio / count;\n        var margin = self.marginRatio * width;\n        var offset = 1 / 2 * (tickLength - count * width - (count - 1) * margin) + ((index + 1) * width + index * margin) - 1 / 2 * width - 1 / 2 * tickLength;\n        return (pre + next) / 2 + offset;\n      };\n\n      _proto.processAdjust = function processAdjust(dataArray) {\n        var self = this;\n        var count = dataArray.length;\n        var xField = self.xField;\n        each_1(dataArray, function (data, index) {\n          for (var i = 0, len = data.length; i < len; i++) {\n            var obj = data[i];\n            var value = obj[xField];\n            var range = {\n              pre: len === 1 ? value - 1 : value - 0.5,\n              next: len === 1 ? value + 1 : value + 0.5\n            };\n            var dodgeValue = self.getDodgeOffset(range, index, count);\n            obj[xField] = dodgeValue;\n          }\n        });\n      };\n\n      return Dodge;\n    }(base);\n\n    base.Dodge = Dodge;\n\n    /**\n     * 是否为函数\n     * @param  {*} fn 对象\n     * @return {Boolean}  是否函数\n     */\n\n    var isFunction$1 = function isFunction(value) {\n      return isType_1(value, 'Function');\n    };\n\n    var isFunction_1 = isFunction$1;\n\n    /**\n     * @param {Array} arr The array to iterate over.\n     * @param {Function} [fn] The iteratee invoked per element.\n     * @return {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n\n    var maxBy = function maxBy(arr, fn) {\n      if (!isArray_1(arr)) {\n        return undefined;\n      }\n\n      var max = arr[0];\n      var maxData = void 0;\n\n      if (isFunction_1(fn)) {\n        maxData = fn(arr[0]);\n      } else {\n        maxData = arr[0][fn];\n      }\n\n      var data = void 0;\n      each_1(arr, function (val) {\n        if (isFunction_1(fn)) {\n          data = fn(val);\n        } else {\n          data = val[fn];\n        }\n\n        if (data > maxData) {\n          max = val;\n          maxData = data;\n        }\n      });\n      return max;\n    };\n\n    var maxBy_1 = maxBy;\n\n    var merge$1 = function merge(dataArray) {\n      var rst = [];\n\n      for (var i = 0; i < dataArray.length; i++) {\n        rst = rst.concat(dataArray[i]);\n      }\n\n      return rst;\n    };\n\n    var merge_1 = merge$1;\n\n    function _inheritsLoose$3(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    var ArrayUtil = {\n      merge: merge_1\n    };\n\n    var Symmetric = /*#__PURE__*/function (_Adjust) {\n      _inheritsLoose$3(Symmetric, _Adjust);\n\n      function Symmetric() {\n        return _Adjust.apply(this, arguments) || this;\n      }\n\n      var _proto = Symmetric.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.xField = null; // 调整对应的 x 方向对应的字段名称\n\n        this.yField = null; // 调整对应的 y 方向对应的字段名称\n\n        this.cacheMax = null; // 缓存的最大值\n\n        this.adjustNames = ['y']; // Only support stack y\n\n        this.groupFields = null; // 参与分组的数据维度\n      }; // 获取最大的y值\n\n\n      _proto._getMax = function _getMax(dim) {\n        var self = this;\n        var mergeData = self.mergeData;\n        var maxRecord = maxBy_1(mergeData, function (obj) {\n          var value = obj[dim];\n\n          if (isArray_1(value)) {\n            return Math.max.apply(null, value);\n          }\n\n          return value;\n        });\n        var maxValue = maxRecord[dim];\n        var max = isArray_1(maxValue) ? Math.max.apply(null, maxValue) : maxValue;\n        return max;\n      }; // 获取每个字段最大的值\n\n\n      _proto._getXValuesMax = function _getXValuesMax() {\n        var self = this;\n        var yField = self.yField;\n        var xField = self.xField;\n        var cache = {};\n        var mergeData = self.mergeData;\n        each_1(mergeData, function (obj) {\n          var xValue = obj[xField];\n          var yValue = obj[yField];\n          var max = isArray_1(yValue) ? Math.max.apply(null, yValue) : yValue;\n          cache[xValue] = cache[xValue] || 0;\n\n          if (cache[xValue] < max) {\n            cache[xValue] = max;\n          }\n        });\n        return cache;\n      }; // 入口函数\n\n\n      _proto.processAdjust = function processAdjust(dataArray) {\n        var self = this;\n        var mergeData = ArrayUtil.merge(dataArray);\n        self.mergeData = mergeData;\n\n        self._processSymmetric(dataArray);\n\n        self.mergeData = null;\n      }; // 处理对称\n\n\n      _proto._processSymmetric = function _processSymmetric(dataArray) {\n        var self = this;\n        var xField = self.xField;\n        var yField = self.yField;\n\n        var max = self._getMax(yField);\n\n        var first = dataArray[0][0];\n        var cache;\n\n        if (first && isArray_1(first[yField])) {\n          cache = self._getXValuesMax();\n        }\n\n        each_1(dataArray, function (data) {\n          each_1(data, function (obj) {\n            var value = obj[yField];\n            var offset;\n\n            if (isArray_1(value)) {\n              var xValue = obj[xField];\n              var valueMax = cache[xValue];\n              offset = (max - valueMax) / 2;\n              var tmp = [];\n              /* eslint-disable no-loop-func */\n\n              each_1(value, function (subVal) {\n                // 多个字段\n                tmp.push(offset + subVal);\n              });\n              /* eslint-enable no-loop-func */\n\n              obj[yField] = tmp;\n            } else {\n              offset = (max - value) / 2;\n              obj[yField] = [offset, value + offset];\n            }\n          });\n        });\n      };\n\n      return Symmetric;\n    }(base);\n\n    base.Symmetric = Symmetric;\n\n    var Polar = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Polar, _Base);\n\n      function Polar() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Polar.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'polar';\n        this.startAngle = -Math.PI / 2;\n        this.endAngle = Math.PI * 3 / 2;\n        this.inner = 0;\n        this.innerRadius = 0; // alias\n\n        this.isPolar = true;\n        this.transposed = false;\n        this.center = null;\n        this.radius = null; // relative, 0 ~ 1\n      };\n\n      _proto.init = function init(start, end) {\n        _Base.prototype.init.call(this, start, end);\n\n        var self = this;\n        var inner = self.inner || self.innerRadius;\n        var width = Math.abs(end.x - start.x);\n        var height = Math.abs(end.y - start.y);\n        var maxRadius;\n        var center;\n\n        if (self.startAngle === -Math.PI && self.endAngle === 0) {\n          maxRadius = Math.min(width / 2, height);\n          center = {\n            x: (start.x + end.x) / 2,\n            y: start.y\n          };\n        } else {\n          maxRadius = Math.min(width, height) / 2;\n          center = {\n            x: (start.x + end.x) / 2,\n            y: (start.y + end.y) / 2\n          };\n        }\n\n        var radius = self.radius;\n\n        if (radius > 0 && radius <= 1) {\n          maxRadius = maxRadius * radius;\n        }\n\n        this.x = {\n          start: self.startAngle,\n          end: self.endAngle\n        };\n        this.y = {\n          start: maxRadius * inner,\n          end: maxRadius\n        };\n        this.center = center;\n        this.circleRadius = maxRadius; // the radius value in px\n      };\n\n      _proto._convertPoint = function _convertPoint(point) {\n        var self = this;\n        var center = self.center;\n        var transposed = self.transposed;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var x = self.x;\n        var y = self.y;\n        var angle = x.start + (x.end - x.start) * point[xDim];\n        var radius = y.start + (y.end - y.start) * point[yDim];\n        return {\n          x: center.x + Math.cos(angle) * radius,\n          y: center.y + Math.sin(angle) * radius\n        };\n      };\n\n      _proto._invertPoint = function _invertPoint(point) {\n        var self = this;\n        var center = self.center,\n            transposed = self.transposed,\n            x = self.x,\n            y = self.y;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var m = [1, 0, 0, 1, 0, 0];\n        Matrix.rotate(m, m, x.start);\n        var startV = [1, 0];\n        Vector2.transformMat2d(startV, startV, m);\n        startV = [startV[0], startV[1]];\n        var pointV = [point.x - center.x, point.y - center.y];\n\n        if (Vector2.zero(pointV)) {\n          return {\n            x: 0,\n            y: 0\n          };\n        }\n\n        var theta = Vector2.angleTo(startV, pointV, x.end < x.start);\n\n        if (Math.abs(theta - Math.PI * 2) < 0.001) {\n          theta = 0;\n        }\n\n        var l = Vector2.length(pointV);\n        var percentX = theta / (x.end - x.start);\n        percentX = x.end - x.start > 0 ? percentX : -percentX;\n        var percentY = (l - y.start) / (y.end - y.start);\n        var rst = {};\n        rst[xDim] = percentX;\n        rst[yDim] = percentY;\n        return rst;\n      };\n\n      return Polar;\n    }(Base$1);\n\n    Base$1.Polar = Polar;\n\n    var Circle$1 = /*#__PURE__*/function (_Abstract) {\n      _inheritsLoose(Circle, _Abstract);\n\n      function Circle() {\n        return _Abstract.apply(this, arguments) || this;\n      }\n\n      var _proto = Circle.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        _Abstract.prototype._initDefaultCfg.call(this);\n\n        this.startAngle = -Math.PI / 2; // start angle，in radian\n\n        this.endAngle = Math.PI * 3 / 2; // end angle, in radian\n\n        this.radius = null; // radius\n\n        this.center = null; // center\n      };\n\n      _proto.getOffsetPoint = function getOffsetPoint(value) {\n        var startAngle = this.startAngle,\n            endAngle = this.endAngle;\n        var angle = startAngle + (endAngle - startAngle) * value;\n        return this._getCirclePoint(angle);\n      };\n\n      _proto._getCirclePoint = function _getCirclePoint(angle, radius) {\n        var self = this;\n        var center = self.center;\n        radius = radius || self.radius;\n        return {\n          x: center.x + Math.cos(angle) * radius,\n          y: center.y + Math.sin(angle) * radius\n        };\n      };\n\n      _proto.getTextAlignInfo = function getTextAlignInfo(point, offset) {\n        var self = this;\n        var offsetVector = self.getOffsetVector(point, offset);\n        var align;\n        var baseLine = 'middle';\n\n        if (offsetVector[0] > 0) {\n          align = 'left';\n        } else if (offsetVector[0] < 0) {\n          align = 'right';\n        } else {\n          align = 'center';\n\n          if (offsetVector[1] > 0) {\n            baseLine = 'top';\n          } else if (offsetVector[1] < 0) {\n            baseLine = 'bottom';\n          }\n        }\n\n        return {\n          textAlign: align,\n          textBaseline: baseLine\n        };\n      };\n\n      _proto.getAxisVector = function getAxisVector(point) {\n        var center = this.center;\n        var factor = this.offsetFactor;\n        return [(point.y - center.y) * factor, (point.x - center.x) * -1 * factor];\n      };\n\n      _proto.drawLine = function drawLine(lineCfg) {\n        var center = this.center,\n            radius = this.radius,\n            startAngle = this.startAngle,\n            endAngle = this.endAngle;\n        var container = this.getContainer(lineCfg.top);\n        container.addShape('arc', {\n          className: 'axis-line',\n          attrs: mix({\n            x: center.x,\n            y: center.y,\n            r: radius,\n            startAngle: startAngle,\n            endAngle: endAngle\n          }, lineCfg)\n        });\n      };\n\n      return Circle;\n    }(Abastract);\n\n    Abastract.Circle = Circle$1;\n\n    var KEYWORDS_PERCENT = {\n      min: 0,\n      median: 0.5,\n      max: 1\n    };\n\n    var GuideBase = /*#__PURE__*/function () {\n      var _proto = GuideBase.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {};\n\n      function GuideBase(cfg) {\n        this._initDefaultCfg();\n\n        deepMix(this, cfg);\n      }\n\n      _proto._getNormalizedValue = function _getNormalizedValue(val, scale) {\n        var rst;\n\n        if (isNil(KEYWORDS_PERCENT[val])) {\n          rst = scale.scale(val);\n        } else {\n          rst = KEYWORDS_PERCENT[val];\n        }\n\n        return rst;\n      };\n\n      _proto.parsePercentPoint = function parsePercentPoint(coord, position) {\n        var xPercent = parseFloat(position[0]) / 100;\n        var yPercent = parseFloat(position[1]) / 100;\n        var start = coord.start;\n        var end = coord.end;\n        var width = Math.abs(start.x - end.x);\n        var height = Math.abs(start.y - end.y);\n        var x = width * xPercent + Math.min(start.x, end.x);\n        var y = height * yPercent + Math.min(start.y, end.y);\n        return {\n          x: x,\n          y: y\n        };\n      };\n\n      _proto.parsePoint = function parsePoint(coord, position) {\n        var self = this;\n        var xScale = self.xScale;\n        var yScales = self.yScales;\n\n        if (isFunction(position)) {\n          position = position(xScale, yScales); // position 必须是对象\n        } // 如果数据格式是 ['50%', '50%'] 的格式\n        // fix: 原始数据中可能会包含 'xxx5%xxx' 这样的数据，需要判断下 https://github.com/antvis/f2/issues/590\n\n\n        if (isString(position[0]) && position[0].indexOf('%') !== -1 && !isNaN(position[0].slice(0, -1))) {\n          return this.parsePercentPoint(coord, position);\n        }\n\n        var x = self._getNormalizedValue(position[0], xScale);\n\n        var y = self._getNormalizedValue(position[1], yScales[0]);\n\n        var point = coord.convertPoint({\n          x: x,\n          y: y\n        });\n\n        if (self.limitInPlot) {\n          // limit in chart plotRange\n          if (x >= 0 && x <= 1 && y >= 0 && y <= 1) {\n            return point;\n          }\n\n          return null;\n        }\n\n        return point;\n      }\n      /**\n       * render the guide component\n       * @param  {Coord} coord  coordinate instance\n       * @param  {Canvas.Group} group the container\n       */\n      ;\n\n      _proto.render = function render()\n      /* coord,group */\n      {};\n\n      _proto.repaint = function repaint() {\n        this.remove();\n        var coord = this.coord,\n            container = this.container,\n            canvas = this.canvas;\n\n        if (container && !container.isDestroyed()) {\n          this.render(coord, container);\n          canvas.draw();\n        }\n      };\n\n      _proto.remove = function remove() {\n        var element = this.element;\n        element && element.remove(true);\n      };\n\n      _proto.changeVisible = function changeVisible(visible) {\n        var self = this;\n        self.visible = visible;\n        var element = self.element;\n        if (!element) return;\n\n        if (element.set) {\n          element.set('visible', visible);\n        } else {\n          element.style.display = visible ? '' : 'none';\n        }\n      };\n\n      return GuideBase;\n    }();\n\n    var Arc$1 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Arc, _GuideBase);\n\n      function Arc() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Arc.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'arc';\n        /**\n         * start point\n         * @type {Array | Function}\n         */\n\n        this.start = [];\n        /**\n         * end point\n         * @type {Array | Function}\n         */\n\n        this.end = [];\n        /**\n         * style configuration\n         * @type {Object}\n         */\n\n        this.style = {\n          stroke: '#999',\n          lineWidth: 1\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var self = this;\n        var start = self.parsePoint(coord, self.start);\n        var end = self.parsePoint(coord, self.end);\n\n        if (!start || !end) {\n          return;\n        }\n\n        var coordCenter = coord.center;\n        var radius = Math.sqrt((start.x - coordCenter.x) * (start.x - coordCenter.x) + (start.y - coordCenter.y) * (start.y - coordCenter.y));\n        var startAngle = Math.atan2(start.y - coordCenter.y, start.x - coordCenter.x);\n        var endAngle = Math.atan2(end.y - coordCenter.y, end.x - coordCenter.x);\n        var shape = container.addShape('arc', {\n          className: 'guide-arc',\n          attrs: mix({\n            x: coordCenter.x,\n            y: coordCenter.y,\n            r: radius,\n            startAngle: startAngle,\n            endAngle: endAngle\n          }, self.style)\n        });\n        self.element = shape;\n        return shape;\n      };\n\n      return Arc;\n    }(GuideBase);\n\n    GuideBase.Arc = Arc$1;\n\n    function getOffsetFromAlign(alignX, alignY, width, height) {\n      var result = [];\n\n      if (alignX === 'left' && alignY === 'top') {\n        result[0] = 0;\n        result[1] = 0;\n      } else if (alignX === 'right' && alignY === 'top') {\n        result[0] = -width;\n        result[1] = 0;\n      } else if (alignX === 'left' && alignY === 'bottom') {\n        result[0] = 0;\n        result[1] = Math.floor(-height);\n      } else if (alignX === 'right' && alignY === 'bottom') {\n        result[0] = Math.floor(-width);\n        result[1] = Math.floor(-height);\n      } else if (alignX === 'right' && alignY === 'middle') {\n        result[0] = Math.floor(-width);\n        result[1] = Math.floor(-height / 2);\n      } else if (alignX === 'left' && alignY === 'middle') {\n        result[0] = 0;\n        result[1] = Math.floor(-height / 2);\n      } else if (alignX === 'center' && alignY === 'bottom') {\n        result[0] = Math.floor(-width / 2);\n        result[1] = Math.floor(-height);\n      } else if (alignX === 'center' && alignY === 'top') {\n        result[0] = Math.floor(-width / 2);\n        result[1] = 0;\n      } else {\n        result[0] = Math.floor(-width / 2);\n        result[1] = Math.floor(-height / 2);\n      }\n\n      return result;\n    }\n\n    function modifyCSS(DOM, CSS) {\n      for (var key in CSS) {\n        if (CSS.hasOwnProperty(key)) {\n          DOM.style[key] = CSS[key];\n        }\n      }\n\n      return DOM;\n    }\n\n    function createDom(str) {\n      var container = document.createElement('div');\n      str = str.replace(/(^\\s*)|(\\s*$)/g, '');\n      container.innerHTML = '' + str;\n      return container.childNodes[0];\n    }\n\n    var Html = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Html, _GuideBase);\n\n      function Html() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Html.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'html';\n        /**\n         * dom position\n         * @type {Object | Array}\n         */\n\n        this.position = null;\n        /**\n          * alignment for horizontal direction，can be 'left','center','right'\n          * @type {String}\n          */\n\n        this.alignX = 'center';\n        /**\n          * alignment for vertical direction，can be 'top', 'middle', 'bottom'\n          * @type {String}\n          */\n\n        this.alignY = 'middle';\n        /**\n          * offset for horizontal direction\n          * @type {Number}\n          */\n\n        this.offsetX = null;\n        /**\n          * offset for vertical direction\n          * @type {Number}\n          */\n\n        this.offsetY = null;\n        /**\n        * the html string\n        *@type {String | Function}\n        */\n\n        this.html = null;\n      } // override paint\n      ;\n\n      _proto.render = function render(coord, container) {\n        var self = this;\n        var position = self.parsePoint(coord, self.position);\n\n        if (!position) {\n          return;\n        }\n\n        var myNode = createDom(self.html);\n        myNode = modifyCSS(myNode, {\n          position: 'absolute',\n          top: Math.floor(position.y) + 'px',\n          left: Math.floor(position.x) + 'px',\n          visibility: 'hidden'\n        });\n        var canvasDom = container.get('canvas').get('el');\n        var parentNode = canvasDom.parentNode;\n        parentNode = modifyCSS(parentNode, {\n          position: 'relative'\n        });\n        var wrapperNode = createDom('<div class=\"guideWapper\" style=\"position: absolute;top: 0; left: 0;\"></div>');\n        parentNode.appendChild(wrapperNode);\n        wrapperNode.appendChild(myNode);\n        var canvasOffsetTop = canvasDom.offsetTop;\n        var canvasOffsetLeft = canvasDom.offsetLeft;\n        var alignX = self.alignX,\n            alignY = self.alignY,\n            offsetX = self.offsetX,\n            offsetY = self.offsetY;\n        var width = getWidth(myNode);\n        var height = getHeight(myNode);\n        var newOffset = getOffsetFromAlign(alignX, alignY, width, height);\n        position.x = position.x + newOffset[0] + canvasOffsetLeft;\n        position.y = position.y + newOffset[1] + canvasOffsetTop;\n\n        if (offsetX) {\n          position.x += offsetX;\n        }\n\n        if (offsetY) {\n          position.y += offsetY;\n        }\n\n        modifyCSS(myNode, {\n          top: Math.floor(position.y) + 'px',\n          left: Math.floor(position.x) + 'px',\n          visibility: 'visible'\n        });\n        self.element = wrapperNode;\n      };\n\n      _proto.remove = function remove() {\n        var element = this.element;\n        element && element.parentNode && element.parentNode.removeChild(element);\n      };\n\n      return Html;\n    }(GuideBase);\n\n    GuideBase.Html = Html;\n\n    var Line$4 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Line, _GuideBase);\n\n      function Line() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'line';\n        this.start = [];\n        this.end = [];\n        this.style = {\n          stroke: '#000',\n          lineWidth: 1\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var points = [];\n        points[0] = this.parsePoint(coord, this.start);\n        points[1] = this.parsePoint(coord, this.end);\n\n        if (!points[0] || !points[1]) {\n          return;\n        }\n\n        var shape = container.addShape('Line', {\n          className: 'guide-line',\n          attrs: mix({\n            x1: points[0].x,\n            y1: points[0].y,\n            x2: points[1].x,\n            y2: points[1].y\n          }, this.style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Line;\n    }(GuideBase);\n\n    GuideBase.Line = Line$4;\n\n    var Rect$2 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Rect, _GuideBase);\n\n      function Rect() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Rect.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'rect';\n        this.start = [];\n        this.end = [];\n        this.style = {\n          fill: '#CCD7EB',\n          opacity: 0.4\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var start = this.parsePoint(coord, this.start);\n        var end = this.parsePoint(coord, this.end);\n\n        if (!start || !end) {\n          return;\n        }\n\n        var shape = container.addShape('rect', {\n          className: 'guide-rect',\n          attrs: mix({\n            x: Math.min(start.x, end.x),\n            y: Math.min(start.y, end.y),\n            width: Math.abs(end.x - start.x),\n            height: Math.abs(start.y - end.y)\n          }, this.style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Rect;\n    }(GuideBase);\n\n    GuideBase.Rect = Rect$2;\n\n    var Text$1 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Text, _GuideBase);\n\n      function Text() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Text.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'text';\n        /**\n         * the position of text\n         * @type {Function | Array}\n         */\n\n        this.position = null;\n        /**\n         * the display content\n         * @type {String}\n         */\n\n        this.content = null;\n        /**\n         * style configuration for text\n         * @type {Object}\n         */\n\n        this.style = {\n          fill: '#000'\n        };\n        /**\n         * offset of horizontal direction\n         * @type {Number}\n         */\n\n        this.offsetX = 0;\n        /**\n         * offset of vertical direction\n         * @type {Number}\n         */\n\n        this.offsetY = 0;\n      };\n\n      _proto.render = function render(coord, container) {\n        var position = this.position;\n        var point = this.parsePoint(coord, position);\n\n        if (!point) {\n          return;\n        }\n\n        var content = this.content,\n            style = this.style,\n            offsetX = this.offsetX,\n            offsetY = this.offsetY;\n\n        if (offsetX) {\n          point.x += offsetX;\n        }\n\n        if (offsetY) {\n          point.y += offsetY;\n        }\n\n        var shape = container.addShape('text', {\n          className: 'guide-text',\n          attrs: mix({\n            x: point.x,\n            y: point.y,\n            text: content\n          }, style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Text;\n    }(GuideBase);\n\n    GuideBase.Text = Text$1;\n\n    var Tag = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Tag, _GuideBase);\n\n      function Tag() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Tag.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'tag';\n        this.position = null;\n        this.content = null;\n        this.direct = 'tl';\n        this.autoAdjust = true;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.side = 4;\n        this.background = {\n          padding: 5,\n          radius: 2,\n          fill: '#1890FF'\n        };\n        this.textStyle = {\n          fontSize: 12,\n          fill: '#fff',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        };\n        this.withPoint = true;\n        this.pointStyle = {\n          fill: '#1890FF',\n          r: 3,\n          lineWidth: 1,\n          stroke: '#fff'\n        };\n      };\n\n      _proto._getDirect = function _getDirect(container, point, tagWidth, tagHeight) {\n        var direct = this.direct;\n        var side = this.side;\n        var canvas = container.get('canvas');\n        var clientWidth = canvas.get('width');\n        var clientHeight = canvas.get('height');\n        var x = point.x,\n            y = point.y;\n        var vertical = direct[0];\n        var horizontal = direct[1]; // adjust for vertical direction\n\n        if (vertical === 't' && y - side - tagHeight < 0) {\n          vertical = 'b';\n        } else if (vertical === 'b' && y + side + tagHeight > clientHeight) {\n          vertical = 't';\n        } // adjust for horizontal direction\n\n\n        var diff = vertical === 'c' ? side : 0;\n\n        if (horizontal === 'l' && x - diff - tagWidth < 0) {\n          horizontal = 'r';\n        } else if (horizontal === 'r' && x + diff + tagWidth > clientWidth) {\n          horizontal = 'l';\n        } else if (horizontal === 'c') {\n          if (tagWidth / 2 + x + diff > clientWidth) {\n            horizontal = 'l';\n          } else if (x - tagWidth / 2 - diff < 0) {\n            horizontal = 'r';\n          }\n        }\n\n        direct = vertical + horizontal;\n        return direct;\n      };\n\n      _proto.render = function render(coord, container) {\n        var position = this.parsePoint(coord, this.position);\n\n        if (!position) {\n          return;\n        } // 数据不在显示范围内时，x/y 会为NaN\n\n\n        if (isNaN(position.x) || isNaN(position.y)) {\n          return;\n        }\n\n        var content = this.content,\n            background = this.background,\n            textStyle = this.textStyle;\n        var shapes = [];\n        var wrapperContainer = container.addGroup({\n          className: 'guide-tag'\n        });\n\n        if (this.withPoint) {\n          var pointShape = wrapperContainer.addShape('Circle', {\n            className: 'guide-tag-point',\n            attrs: mix({\n              x: position.x,\n              y: position.y\n            }, this.pointStyle)\n          });\n          shapes.push(pointShape);\n        }\n\n        var tagContainer = wrapperContainer.addGroup(); // create a text shape\n\n        var tagText = tagContainer.addShape('text', {\n          className: 'guide-tag-text',\n          zIndex: 1,\n          attrs: mix({\n            x: 0,\n            y: 0,\n            text: content\n          }, textStyle)\n        });\n        shapes.push(tagText); // create background box\n\n        var textBBox = tagText.getBBox();\n        var padding = parsePadding(background.padding);\n        var tagWidth = textBBox.width + padding[1] + padding[3];\n        var tagHeight = textBBox.height + padding[0] + padding[2];\n        var yMin = textBBox.minY - padding[0];\n        var xMin = textBBox.minX - padding[3];\n        var tagBg = tagContainer.addShape('rect', {\n          className: 'guide-tag-bg',\n          zIndex: -1,\n          attrs: mix({\n            x: xMin,\n            y: yMin,\n            width: tagWidth,\n            height: tagHeight\n          }, background)\n        });\n        shapes.push(tagBg);\n        var direct = this.autoAdjust ? this._getDirect(container, position, tagWidth, tagHeight) : this.direct;\n        var side = this.side;\n        var x = position.x + this.offsetX;\n        var y = position.y + this.offsetY;\n        var arrowPoints;\n        var radius = parsePadding(background.radius);\n\n        if (direct === 'tl') {\n          arrowPoints = [{\n            x: tagWidth + xMin - side - 1,\n            y: tagHeight + yMin - 1\n          }, // 这个 1 是为了防止出现白边\n          {\n            x: tagWidth + xMin,\n            y: tagHeight + yMin - 1\n          }, {\n            x: tagWidth + xMin,\n            y: tagHeight + side + yMin\n          }];\n          radius[2] = 0;\n          x = x - tagWidth;\n          y = y - side - tagHeight;\n        } else if (direct === 'cl') {\n          arrowPoints = [{\n            x: tagWidth + xMin - 1,\n            y: (tagHeight - side) / 2 + yMin - 1\n          }, {\n            x: tagWidth + xMin - 1,\n            y: (tagHeight + side) / 2 + yMin + 1\n          }, {\n            x: tagWidth + side + xMin,\n            y: tagHeight / 2 + yMin\n          }];\n          x = x - tagWidth - side;\n          y = y - tagHeight / 2;\n        } else if (direct === 'bl') {\n          arrowPoints = [{\n            x: tagWidth + xMin,\n            y: -side + yMin\n          }, {\n            x: tagWidth + xMin - side - 1,\n            y: yMin + 1\n          }, {\n            x: tagWidth + xMin,\n            y: yMin + 1\n          }];\n          radius[1] = 0;\n          x = x - tagWidth;\n          y = y + side;\n        } else if (direct === 'bc') {\n          arrowPoints = [{\n            x: tagWidth / 2 + xMin,\n            y: -side + yMin\n          }, {\n            x: (tagWidth - side) / 2 + xMin - 1,\n            y: yMin + 1\n          }, {\n            x: (tagWidth + side) / 2 + xMin + 1,\n            y: yMin + 1\n          }];\n          x = x - tagWidth / 2;\n          y = y + side;\n        } else if (direct === 'br') {\n          arrowPoints = [{\n            x: xMin,\n            y: yMin - side\n          }, {\n            x: xMin,\n            y: yMin + 1\n          }, {\n            x: xMin + side + 1,\n            y: yMin + 1\n          }];\n          radius[0] = 0;\n          y = y + side;\n        } else if (direct === 'cr') {\n          arrowPoints = [{\n            x: xMin - side,\n            y: tagHeight / 2 + yMin\n          }, {\n            x: xMin + 1,\n            y: (tagHeight - side) / 2 + yMin - 1\n          }, {\n            x: xMin + 1,\n            y: (tagHeight + side) / 2 + yMin + 1\n          }];\n          x = x + side;\n          y = y - tagHeight / 2;\n        } else if (direct === 'tr') {\n          arrowPoints = [{\n            x: xMin,\n            y: tagHeight + side + yMin\n          }, {\n            x: xMin,\n            y: tagHeight + yMin - 1\n          }, {\n            x: side + xMin + 1,\n            y: tagHeight + yMin - 1\n          }];\n          radius[3] = 0;\n          y = y - tagHeight - side;\n        } else if (direct === 'tc') {\n          arrowPoints = [{\n            x: (tagWidth - side) / 2 + xMin - 1,\n            y: tagHeight + yMin - 1\n          }, {\n            x: (tagWidth + side) / 2 + xMin + 1,\n            y: tagHeight + yMin - 1\n          }, {\n            x: tagWidth / 2 + xMin,\n            y: tagHeight + side + yMin\n          }];\n          x = x - tagWidth / 2;\n          y = y - tagHeight - side;\n        }\n\n        var sideShape = tagContainer.addShape('Polygon', {\n          className: 'guide-tag-side',\n          zIndex: 0,\n          attrs: {\n            points: arrowPoints,\n            fill: background.fill\n          }\n        });\n        shapes.push(sideShape);\n        tagBg.attr('radius', radius);\n        tagContainer.moveTo(x - xMin, y - yMin);\n        tagContainer.sort();\n        this.element = wrapperContainer;\n        return shapes;\n      };\n\n      return Tag;\n    }(GuideBase);\n\n    GuideBase.Tag = Tag;\n\n    var Point$2 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Point, _GuideBase);\n\n      function Point() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Point.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'point';\n        this.position = null;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.style = {\n          fill: '#1890FF',\n          r: 3,\n          lineWidth: 1,\n          stroke: '#fff'\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var position = this.parsePoint(coord, this.position);\n        if (!position) return null;\n        var shape = container.addShape('Circle', {\n          className: 'guide-point',\n          attrs: mix({\n            x: position.x + this.offsetX,\n            y: position.y + this.offsetY\n          }, this.style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Point;\n    }(GuideBase);\n\n    GuideBase.Point = Point$2;\n\n    var MARKER_RADIUS = 3;\n\n    var List = /*#__PURE__*/function () {\n      var _proto = List.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          showTitle: false,\n\n          /**\n           * title string\n           * @type {?String}\n           */\n          title: null,\n\n          /**\n           * items array\n           * @type {?Array}\n           */\n          items: null,\n\n          /**\n           * offset between title and items\n           * @type {Number}\n           */\n          titleGap: 12,\n\n          /**\n           * offset between each item\n           * @type {Number}\n           */\n          itemGap: 10,\n\n          /**\n           * the offset between each item in vertical direaction\n           * @type {Number}\n           */\n          itemMarginBottom: 12,\n\n          /**\n           * the formatter for item text\n           * @type {[type]}\n           */\n          itemFormatter: null,\n          itemWidth: null,\n\n          /**\n           * offset between marker and text\n           * @type {Number}\n           */\n          wordSpace: 6,\n          x: 0,\n          y: 0,\n          layout: 'horizontal',\n\n          /**\n           * the join string of `name` and `value`\n           * @type {String}\n           */\n          joinString: ': '\n        };\n      };\n\n      function List(cfg) {\n        deepMix(this, this.getDefaultCfg(), cfg);\n\n        this._init();\n\n        this._renderTitle();\n\n        this._renderItems();\n      }\n\n      _proto._init = function _init() {\n        var parent = this.parent;\n        if (!parent) return;\n        var container = parent.addGroup({\n          zIndex: this.zIndex || 0\n        });\n        this.container = container;\n        var wrapper = container.addGroup();\n        this.wrapper = wrapper;\n        var itemsGroup = wrapper.addGroup({\n          className: 'itemsGroup'\n        });\n        this.itemsGroup = itemsGroup;\n      };\n\n      _proto._renderTitle = function _renderTitle(title) {\n        title = title || this.title;\n        var titleShape = this.titleShape;\n        var titleHeight = 0;\n\n        if (this.showTitle && title) {\n          if (titleShape && !titleShape.get('destroyed')) {\n            titleShape.attr('text', title);\n          } else {\n            var wrapper = this.wrapper,\n                titleStyle = this.titleStyle;\n            titleShape = wrapper.addShape('text', {\n              className: 'title',\n              attrs: mix({\n                x: 0,\n                y: 0,\n                text: title\n              }, titleStyle)\n            });\n            this.titleShape = titleShape;\n          }\n\n          titleHeight = titleShape.getBBox().height + this.titleGap;\n        }\n\n        this._titleHeight = titleHeight;\n      };\n\n      _proto._renderItems = function _renderItems(items) {\n        var self = this;\n        items = items || self.items;\n\n        if (!items) {\n          return;\n        }\n\n        if (self.reversed) {\n          items.reverse();\n        }\n\n        each(items, function (item, index) {\n          self._addItem(item, index);\n        });\n\n        if (items.length > 1) {\n          this._adjustItems();\n        }\n\n        this._renderBackground();\n      };\n\n      _proto._renderBackground = function _renderBackground() {\n        var background = this.background;\n\n        if (background) {\n          var container = this.container;\n          var wrapper = this.wrapper;\n\n          var _wrapper$getBBox = wrapper.getBBox(),\n              minX = _wrapper$getBBox.minX,\n              minY = _wrapper$getBBox.minY,\n              width = _wrapper$getBBox.width,\n              height = _wrapper$getBBox.height;\n\n          var padding = background.padding || [0, 0, 0, 0];\n          padding = parsePadding(padding);\n          var attrs = mix({\n            x: minX - padding[3],\n            y: minY - padding[0],\n            width: width + padding[1] + padding[3],\n            height: height + padding[0] + padding[2]\n          }, background);\n          var backShape = this.backShape;\n\n          if (backShape) {\n            backShape.attr(attrs);\n          } else {\n            backShape = container.addShape('Rect', {\n              zIndex: -1,\n              attrs: attrs\n            });\n          }\n\n          this.backShape = backShape;\n          container.sort();\n        }\n      };\n\n      _proto._addItem = function _addItem(item) {\n        var itemsGroup = this.itemsGroup;\n        var itemGroup = itemsGroup.addGroup({\n          name: item.name,\n          value: item.value,\n          dataValue: item.dataValue,\n          checked: item.checked\n        });\n        var unCheckStyle = this.unCheckStyle,\n            unCheckColor = this.unCheckColor,\n            nameStyle = this.nameStyle,\n            valueStyle = this.valueStyle,\n            wordSpace = this.wordSpace;\n        var marker = item.marker,\n            value = item.value;\n        var startX = 0;\n\n        if (unCheckColor) {\n          unCheckStyle.fill = unCheckColor;\n        }\n\n        if (marker) {\n          var radius = marker.radius || MARKER_RADIUS;\n          var markerAttrs = mix({\n            x: radius,\n            y: this._titleHeight\n          }, marker);\n\n          if (item.checked === false) {\n            mix(markerAttrs, unCheckStyle);\n          }\n\n          var markerShape = itemGroup.addShape('marker', {\n            className: 'item-marker',\n            attrs: markerAttrs\n          });\n          startX += markerShape.getBBox().width + wordSpace;\n        }\n\n        var nameText;\n        var name = item.name;\n\n        if (name) {\n          var joinString = this.joinString || '';\n          name = value ? name + joinString : name;\n          nameText = itemGroup.addShape('text', {\n            className: 'name',\n            attrs: mix({\n              x: startX,\n              y: this._titleHeight,\n              text: this._formatItemValue(name)\n            }, nameStyle, item.checked === false ? unCheckStyle : null)\n          });\n        }\n\n        if (value) {\n          var valueX = startX;\n\n          if (nameText) {\n            valueX += nameText.getBBox().width;\n          }\n\n          itemGroup.addShape('text', {\n            className: 'value',\n            attrs: mix({\n              x: valueX,\n              y: this._titleHeight,\n              text: value\n            }, valueStyle, item.checked === false ? unCheckStyle : null)\n          });\n        }\n\n        return itemGroup;\n      };\n\n      _proto._formatItemValue = function _formatItemValue(value) {\n        var formatter = this.itemFormatter;\n\n        if (formatter) {\n          value = formatter.call(this, value);\n        }\n\n        return value;\n      };\n\n      _proto._getMaxItemWidth = function _getMaxItemWidth() {\n        var width;\n        var itemWidth = this.itemWidth;\n\n        if (isNumber(itemWidth) || isNil(itemWidth)) {\n          return itemWidth;\n        }\n\n        if (itemWidth === 'auto') {\n          var itemsGroup = this.itemsGroup;\n          var children = itemsGroup.get('children');\n          var count = children.length;\n          var maxItemWidth = 0;\n\n          for (var i = 0; i < count; i++) {\n            var _children$i$getBBox = children[i].getBBox(),\n                _width = _children$i$getBBox.width;\n\n            maxItemWidth = Math.max(maxItemWidth, _width);\n          }\n\n          var maxLength = this.maxLength;\n          var itemGap = this.itemGap;\n          var twoAvgWidth = (maxLength - itemGap) / 2;\n          var threeAvgWidth = (maxLength - itemGap * 2) / 3;\n\n          if (count === 2) {\n            width = Math.max(maxItemWidth, twoAvgWidth);\n          } else {\n            // 1. max <= 3Avg, 3Avg\n            // 2. 3Avg < max && max < 2avg, 2avg\n            // 3. max > 2avg, max, one column\n            if (maxItemWidth <= threeAvgWidth) {\n              width = threeAvgWidth;\n            } else if (maxItemWidth <= twoAvgWidth) {\n              width = twoAvgWidth;\n            } else {\n              width = maxItemWidth;\n            }\n          }\n\n          return width;\n        }\n      };\n\n      _proto._adjustHorizontal = function _adjustHorizontal() {\n        var maxLength = this.maxLength,\n            itemsGroup = this.itemsGroup;\n        var children = itemsGroup.get('children');\n        var itemGap = this.itemGap,\n            itemMarginBottom = this.itemMarginBottom;\n        var titleHeight = this._titleHeight;\n        var row = 0;\n        var rowWidth = 0;\n        var width;\n        var height;\n\n        var itemWidth = this._getMaxItemWidth();\n\n        var legendHitBoxes = [];\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          var child = children[i];\n          var box = child.getBBox();\n          var childHeight = box.height;\n          var childWidth = box.width;\n          width = itemWidth || childWidth;\n          height = childHeight + itemMarginBottom;\n\n          if (width - (maxLength - rowWidth) > 0.0001) {\n            row++;\n            rowWidth = 0;\n          }\n\n          child.moveTo(rowWidth, row * height);\n          legendHitBoxes.push({\n            x: rowWidth,\n            y: row * height + titleHeight - childHeight / 2,\n            width: childWidth * 1.375,\n            height: childHeight * 1.375\n          });\n          rowWidth += width + itemGap;\n        }\n\n        this.legendHitBoxes = legendHitBoxes;\n        return;\n      };\n\n      _proto._adjustVertical = function _adjustVertical() {\n        var maxLength = this.maxLength,\n            itemsGroup = this.itemsGroup;\n        var itemGap = this.itemGap,\n            itemMarginBottom = this.itemMarginBottom,\n            itemWidth = this.itemWidth;\n        var titleHeight = this._titleHeight;\n        var children = itemsGroup.get('children');\n        var colHeight = 0;\n        var width;\n        var height;\n        var maxItemWidth = 0;\n        var totalWidth = 0;\n        var legendHitBoxes = [];\n\n        for (var i = 0, length = children.length; i < length; i++) {\n          var child = children[i];\n          var bbox = child.getBBox();\n          width = bbox.width;\n          height = bbox.height;\n\n          if (isNumber(itemWidth)) {\n            maxItemWidth = itemWidth + itemGap;\n          } else if (width > maxItemWidth) {\n            maxItemWidth = width + itemGap;\n          }\n\n          if (maxLength - colHeight < height) {\n            colHeight = 0;\n            totalWidth += maxItemWidth;\n            child.moveTo(totalWidth, 0);\n            legendHitBoxes.push({\n              x: totalWidth,\n              y: titleHeight - height / 2,\n              width: width * 1.375,\n              height: height * 1.375\n            });\n          } else {\n            child.moveTo(totalWidth, colHeight);\n            legendHitBoxes.push({\n              x: totalWidth,\n              y: colHeight - height / 2 + titleHeight,\n              width: width * 1.375,\n              height: height * 1.375\n            });\n          }\n\n          colHeight += height + itemMarginBottom;\n        }\n\n        this.legendHitBoxes = legendHitBoxes;\n        return;\n      };\n\n      _proto._adjustItems = function _adjustItems() {\n        var layout = this.layout;\n\n        if (layout === 'horizontal') {\n          this._adjustHorizontal();\n        } else {\n          this._adjustVertical();\n        }\n      };\n\n      _proto.moveTo = function moveTo(x, y) {\n        this.x = x;\n        this.y = y;\n        var container = this.container;\n        container && container.moveTo(x, y);\n        return this;\n      };\n\n      _proto.setItems = function setItems(items) {\n        this.clearItems();\n\n        this._renderItems(items);\n      };\n\n      _proto.setTitle = function setTitle(title) {\n        this._renderTitle(title);\n      };\n\n      _proto.clearItems = function clearItems() {\n        var itemsGroup = this.itemsGroup;\n        itemsGroup.clear();\n      };\n\n      _proto.getWidth = function getWidth() {\n        var container = this.container;\n        var bbox = container.getBBox();\n        return bbox.width;\n      };\n\n      _proto.getHeight = function getHeight() {\n        var container = this.container;\n        var bbox = container.getBBox();\n        return bbox.height;\n      };\n\n      _proto.show = function show() {\n        var container = this.container;\n        container.show();\n      };\n\n      _proto.hide = function hide() {\n        var container = this.container;\n        container.hide();\n      };\n\n      _proto.clear = function clear() {\n        var container = this.container;\n        container.clear();\n        container.remove(true);\n      };\n\n      return List;\n    }();\n\n    var TextBox = /*#__PURE__*/function () {\n      var _proto = TextBox.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          x: 0,\n          y: 0,\n          content: '',\n          textStyle: {\n            fontSize: 12,\n            fill: '#fff',\n            textAlign: 'center',\n            textBaseline: 'middle',\n            fontFamily: 'Arial'\n          },\n          background: {\n            radius: 1,\n            fill: 'rgba(0, 0, 0, 0.65)',\n            padding: [3, 5]\n          },\n          width: 0,\n          height: 0,\n          className: ''\n        };\n      };\n\n      function TextBox(cfg) {\n        deepMix(this, this.getDefaultCfg(), cfg);\n\n        this._init();\n\n        var content = this.content,\n            x = this.x,\n            y = this.y;\n\n        if (!isNil(content)) {\n          this.updateContent(content);\n        }\n\n        this.updatePosition(x, y);\n      }\n\n      _proto._init = function _init() {\n        var content = this.content,\n            textStyle = this.textStyle,\n            background = this.background,\n            className = this.className,\n            visible = this.visible,\n            context = this.context;\n        var container = new Group({\n          context: context,\n          className: className,\n          zIndex: 0,\n          visible: visible\n        });\n        var text = container.addShape('Text', {\n          className: className + '-text',\n          zIndex: 1,\n          attrs: mix({\n            text: content,\n            x: 0,\n            y: 0\n          }, textStyle)\n        });\n        var backgroundShape = container.addShape('Rect', {\n          className: className + '-bg',\n          zIndex: -1,\n          attrs: mix({\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0\n          }, background)\n        });\n        container.sort();\n        this.container = container;\n        this.textShape = text;\n        this.backgroundShape = backgroundShape;\n      };\n\n      _proto._getBBox = function _getBBox() {\n        var textShape = this.textShape;\n        var background = this.background;\n        var textBBox = textShape.getBBox();\n        var padding = parsePadding(background.padding);\n        var width = textBBox.width + padding[1] + padding[3];\n        var height = textBBox.height + padding[0] + padding[2];\n        var x = textBBox.minX - padding[3];\n        var y = textBBox.minY - padding[0];\n        return {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        };\n      };\n\n      _proto.updateContent = function updateContent(text) {\n        var textShape = this.textShape,\n            backgroundShape = this.backgroundShape;\n\n        if (!isNil(text)) {\n          if (!isObject(text)) {\n            text = {\n              text: text\n            };\n          }\n\n          textShape.attr(text); // update box shape\n\n          var _this$_getBBox = this._getBBox(),\n              x = _this$_getBBox.x,\n              y = _this$_getBBox.y,\n              tipWidth = _this$_getBBox.width,\n              tipHeight = _this$_getBBox.height;\n\n          var width = this.width || tipWidth;\n          var height = this.height || tipHeight;\n          backgroundShape.attr({\n            x: x,\n            y: y,\n            width: width,\n            height: height\n          });\n          this._width = width;\n          this._height = height;\n          this.content = text.text;\n        }\n      };\n\n      _proto.updatePosition = function updatePosition(x, y) {\n        var container = this.container;\n\n        var _this$_getBBox2 = this._getBBox(),\n            xMin = _this$_getBBox2.x,\n            yMin = _this$_getBBox2.y;\n\n        container.moveTo(x - xMin, y - yMin);\n        this.x = x - xMin;\n        this.y = y - yMin;\n      };\n\n      _proto.getWidth = function getWidth() {\n        return this._width;\n      };\n\n      _proto.getHeight = function getHeight() {\n        return this._height;\n      };\n\n      _proto.show = function show() {\n        this.container.show();\n      };\n\n      _proto.hide = function hide() {\n        this.container.hide();\n      };\n\n      _proto.clear = function clear() {\n        var container = this.container;\n        container.clear();\n        container.remove(true);\n        this.container = null;\n        this.textShape = null;\n        this.backgroundShape = null;\n      };\n\n      return TextBox;\n    }();\n\n    var GAP = 4;\n    /**\n     * TODOList：\n     * 1. 移除 fixed 参数\n     */\n\n    var Tooltip = /*#__PURE__*/function () {\n      var _proto = Tooltip.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          /**\n           * wether show the crosshairs\n           * @type {Object}\n           */\n          showCrosshairs: false,\n\n          /**\n           * the style for crosshairs\n           * @type {Object}\n           */\n          crosshairsStyle: {\n            stroke: 'rgba(0, 0, 0, 0.25)',\n            lineWidth: 1\n          },\n\n          /**\n           * the type of crosshairs, optional value is 'x', 'y' or 'xy', default is 'y'\n           */\n          crosshairsType: 'y',\n\n          /**\n           * show or hide the x axis tip\n           */\n          showXTip: false,\n\n          /**\n           * show or hide the y axis tip\n           */\n          showYTip: false,\n          xTip: null,\n          xTipBackground: {\n            radius: 1,\n            fill: 'rgba(0, 0, 0, 0.65)',\n            padding: [3, 5]\n          },\n          xTipTextStyle: {\n            fontSize: 12,\n            fill: '#fff',\n            textAlign: 'center',\n            textBaseline: 'middle'\n          },\n          yTip: null,\n          yTipBackground: {\n            radius: 1,\n            fill: 'rgba(0, 0, 0, 0.65)',\n            padding: [3, 5]\n          },\n          yTipTextStyle: {\n            fontSize: 12,\n            fill: '#fff',\n            textAlign: 'center',\n            textBaseline: 'middle'\n          },\n\n          /**\n           * the style for tooltip container's background\n           * @type {Object}\n           */\n          background: null,\n\n          /**\n           * layout, can be horizontal or vertical\n           * @type {String}\n           */\n          layout: 'horizontal',\n          offsetX: 0,\n          offsetY: 0\n        };\n      };\n\n      function Tooltip(cfg) {\n        deepMix(this, this.getDefaultCfg(), cfg);\n        var frontPlot = this.frontPlot,\n            custom = this.custom;\n\n        if (!custom) {\n          // custom means user do customize\n          var container = new List(mix({\n            parent: frontPlot,\n            zIndex: 3\n          }, cfg));\n          this.container = container;\n          var fixed = this.fixed,\n              background = this.background;\n\n          if (!fixed) {\n            this.tooltipArrow = frontPlot.addShape('Polygon', {\n              className: 'tooltip-arrow',\n              visible: false,\n              zIndex: 2,\n              attrs: mix({\n                points: []\n              }, background)\n            });\n          }\n        }\n\n        if (this.showXTip) {\n          var xTipBackground = this.xTipBackground,\n              xTipTextStyle = this.xTipTextStyle;\n          var xTipBox = new TextBox({\n            context: frontPlot.get('context'),\n            className: 'xTip',\n            background: xTipBackground,\n            textStyle: xTipTextStyle,\n            visible: false\n          });\n          frontPlot.add(xTipBox.container);\n          this.xTipBox = xTipBox;\n        }\n\n        if (this.showYTip) {\n          var yTipBackground = this.yTipBackground,\n              yTipTextStyle = this.yTipTextStyle;\n          var yTipBox = new TextBox({\n            context: frontPlot.get('context'),\n            className: 'yTip',\n            background: yTipBackground,\n            textStyle: yTipTextStyle,\n            visible: false\n          });\n          frontPlot.add(yTipBox.container);\n          this.yTipBox = yTipBox;\n        }\n\n        if (this.showCrosshairs) {\n          this._renderCrosshairs();\n        }\n\n        frontPlot.sort();\n      }\n\n      _proto.setContent = function setContent(title, items) {\n        this.title = title;\n        this.items = items;\n\n        if (!this.custom) {\n          var container = this.container;\n          container.setTitle(title);\n          container.setItems(items);\n        }\n      };\n\n      _proto.setYTipContent = function setYTipContent(val) {\n        var yTip = this.yTip;\n\n        if (isFunction(yTip)) {\n          val = yTip(val);\n        } else {\n          val = mix({\n            text: val\n          }, yTip);\n        }\n\n        this.yTipBox && this.yTipBox.updateContent(val);\n      };\n\n      _proto.setYTipPosition = function setYTipPosition(pos) {\n        var plotRange = this.plotRange;\n        var crosshairsShapeX = this.crosshairsShapeX;\n\n        if (this.showYTip) {\n          var yTipBox = this.yTipBox;\n          var yTipHeight = yTipBox.getHeight();\n          var yTipWidth = yTipBox.getWidth();\n          var posX = plotRange.tl.x - yTipWidth;\n          var posY = pos - yTipHeight / 2;\n\n          if (posY <= plotRange.tl.y) {\n            posY = plotRange.tl.y;\n          }\n\n          if (posY + yTipHeight >= plotRange.br.y) {\n            posY = plotRange.br.y - yTipHeight;\n          }\n\n          if (posX < 0) {\n            posX = plotRange.tl.x;\n            crosshairsShapeX && crosshairsShapeX.attr('x1', plotRange.tl.x + yTipWidth);\n          }\n\n          yTipBox.updatePosition(posX, posY);\n        }\n      };\n\n      _proto.setXTipContent = function setXTipContent(val) {\n        var xTip = this.xTip;\n\n        if (isFunction(xTip)) {\n          val = xTip(val);\n        } else {\n          val = mix({\n            text: val\n          }, xTip);\n        }\n\n        this.xTipBox && this.xTipBox.updateContent(val);\n      };\n\n      _proto.setXTipPosition = function setXTipPosition(pos) {\n        var showXTip = this.showXTip,\n            canvas = this.canvas,\n            plotRange = this.plotRange,\n            xTipBox = this.xTipBox,\n            crosshairsShapeY = this.crosshairsShapeY;\n\n        if (showXTip) {\n          // const el = canvas.get('el');\n          // const canvasHeight = Util.getHeight(el);\n          var canvasHeight = canvas.get('height');\n          var xTipWidth = xTipBox.getWidth();\n          var xTipHeight = xTipBox.getHeight();\n          var posX = pos - xTipWidth / 2;\n          var posY = plotRange.br.y;\n\n          if (posX <= plotRange.tl.x) {\n            posX = plotRange.tl.x;\n          }\n\n          if (posX + xTipWidth >= plotRange.tr.x) {\n            posX = plotRange.tr.x - xTipWidth;\n          }\n\n          if (canvasHeight - posY < xTipHeight) {\n            posY -= xTipHeight;\n          }\n\n          xTipBox.updatePosition(posX, posY);\n          crosshairsShapeY && crosshairsShapeY.attr('y1', posY);\n        }\n      };\n\n      _proto.setXCrosshairPosition = function setXCrosshairPosition(pos) {\n        this.crosshairsShapeX && this.crosshairsShapeX.moveTo(0, pos);\n      };\n\n      _proto.setYCrosshairPosition = function setYCrosshairPosition(pos) {\n        this.crosshairsShapeY && this.crosshairsShapeY.moveTo(pos, 0);\n      };\n\n      _proto.setPosition = function setPosition(items) {\n        var container = this.container,\n            plotRange = this.plotRange,\n            offsetX = this.offsetX,\n            offsetY = this.offsetY,\n            fixed = this.fixed,\n            tooltipArrow = this.tooltipArrow;\n\n        if (!container) {\n          return;\n        }\n\n        var containerBBox = container.container.getBBox();\n        var minX = containerBBox.minX,\n            minY = containerBBox.minY,\n            width = containerBBox.width,\n            height = containerBBox.height;\n        var tl = plotRange.tl,\n            tr = plotRange.tr;\n        var posX = 0;\n        var posY = tl.y - height - GAP + offsetY;\n\n        if (fixed) {\n          var x = (tl.x + tr.x) / 2;\n          posX = x - width / 2 + offsetX;\n        } else {\n          var _x;\n\n          if (items.length > 1) {\n            _x = (items[0].x + items[items.length - 1].x) / 2;\n          } else {\n            _x = items[0].x;\n          }\n\n          posX = _x - width / 2 + offsetX;\n\n          if (posX < tl.x) {\n            posX = tl.x;\n          }\n\n          if (posX + width > tr.x) {\n            posX = tr.x - width;\n          }\n\n          if (tooltipArrow) {\n            tooltipArrow.attr('points', [{\n              x: _x - 3,\n              y: tl.y - GAP + offsetY\n            }, {\n              x: _x + 3,\n              y: tl.y - GAP + offsetY\n            }, {\n              x: _x,\n              y: tl.y + offsetY\n            }]);\n            var backShape = container.backShape;\n            var radius = parsePadding(backShape.attr('radius'));\n\n            if (_x === tl.x) {\n              radius[3] = 0;\n              tooltipArrow.attr('points', [{\n                x: tl.x,\n                y: tl.y + offsetY\n              }, {\n                x: tl.x,\n                y: tl.y - GAP + offsetY\n              }, {\n                x: tl.x + GAP,\n                y: tl.y - GAP + offsetY\n              }]);\n            } else if (_x === tr.x) {\n              radius[2] = 0;\n              tooltipArrow.attr('points', [{\n                x: tr.x,\n                y: tl.y + offsetY\n              }, {\n                x: tr.x - GAP,\n                y: tl.y - GAP + offsetY\n              }, {\n                x: tr.x,\n                y: tl.y - GAP + offsetY\n              }]);\n            }\n\n            backShape.attr('radius', radius);\n          }\n        }\n\n        container.moveTo(posX - minX, posY - minY);\n      };\n\n      _proto.setMarkers = function setMarkers(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var self = this;\n        var _cfg = cfg,\n            items = _cfg.items,\n            style = _cfg.style,\n            type = _cfg.type;\n\n        var markerGroup = self._getMarkerGroup(type);\n\n        if (type === 'circle') {\n          for (var i = 0, length = items.length; i < length; i++) {\n            var item = items[i];\n            markerGroup.addShape('marker', {\n              className: 'tooltip-circle-marker',\n              attrs: mix({\n                x: item.x,\n                y: item.y,\n                stroke: item.color\n              }, style)\n            });\n          }\n        } else {\n          markerGroup.addShape('rect', {\n            className: 'tooltip-rect-marker',\n            attrs: style\n          });\n        }\n      };\n\n      _proto.clearMarkers = function clearMarkers() {\n        var markerGroup = this.markerGroup;\n        markerGroup && markerGroup.clear();\n      };\n\n      _proto.show = function show() {\n        var crosshairsShapeX = this.crosshairsShapeX;\n        var crosshairsShapeY = this.crosshairsShapeY;\n        var markerGroup = this.markerGroup;\n        var container = this.container;\n        var tooltipArrow = this.tooltipArrow;\n        var xTipBox = this.xTipBox;\n        var yTipBox = this.yTipBox;\n        var canvas = this.canvas;\n        crosshairsShapeX && crosshairsShapeX.show();\n        crosshairsShapeY && crosshairsShapeY.show();\n        markerGroup && markerGroup.show();\n        container && container.show();\n        tooltipArrow && tooltipArrow.show();\n        xTipBox && xTipBox.show();\n        yTipBox && yTipBox.show();\n        canvas.draw();\n      };\n\n      _proto.hide = function hide() {\n        var crosshairsShapeX = this.crosshairsShapeX;\n        var crosshairsShapeY = this.crosshairsShapeY;\n        var markerGroup = this.markerGroup;\n        var container = this.container;\n        var tooltipArrow = this.tooltipArrow;\n        var xTipBox = this.xTipBox;\n        var yTipBox = this.yTipBox;\n        crosshairsShapeX && crosshairsShapeX.hide();\n        crosshairsShapeY && crosshairsShapeY.hide();\n        markerGroup && markerGroup.hide();\n        container && container.hide();\n        tooltipArrow && tooltipArrow.hide();\n        xTipBox && xTipBox.hide();\n        yTipBox && yTipBox.hide();\n      };\n\n      _proto.destroy = function destroy() {\n        var crosshairsShapeX = this.crosshairsShapeX;\n        var crosshairsShapeY = this.crosshairsShapeY;\n        var markerGroup = this.markerGroup;\n        var container = this.container;\n        var tooltipArrow = this.tooltipArrow;\n        var xTipBox = this.xTipBox;\n        var yTipBox = this.yTipBox;\n        crosshairsShapeX && crosshairsShapeX.remove(true);\n        crosshairsShapeY && crosshairsShapeY.remove(true);\n        markerGroup && markerGroup.remove(true);\n        tooltipArrow && tooltipArrow.remove(true);\n        container && container.clear();\n        xTipBox && xTipBox.clear();\n        yTipBox && yTipBox.clear();\n        this.destroyed = true;\n      };\n\n      _proto._getMarkerGroup = function _getMarkerGroup(type) {\n        var markerGroup = this.markerGroup;\n\n        if (!markerGroup) {\n          if (type === 'circle') {\n            markerGroup = this.frontPlot.addGroup({\n              zIndex: 1\n            });\n            this.frontPlot.sort();\n          } else {\n            markerGroup = this.backPlot.addGroup();\n          }\n\n          this.markerGroup = markerGroup;\n        } else {\n          markerGroup.clear();\n        }\n\n        return markerGroup;\n      };\n\n      _proto._renderCrosshairs = function _renderCrosshairs() {\n        var crosshairsType = this.crosshairsType,\n            crosshairsStyle = this.crosshairsStyle,\n            frontPlot = this.frontPlot,\n            plotRange = this.plotRange;\n        var tl = plotRange.tl,\n            br = plotRange.br;\n\n        if (directionEnabled(crosshairsType, 'x')) {\n          this.crosshairsShapeX = frontPlot.addShape('Line', {\n            className: 'tooltip-crosshairs-x',\n            zIndex: 0,\n            visible: false,\n            attrs: mix({\n              x1: tl.x,\n              y1: 0,\n              x2: br.x,\n              y2: 0\n            }, crosshairsStyle)\n          });\n        }\n\n        if (directionEnabled(crosshairsType, 'y')) {\n          this.crosshairsShapeY = frontPlot.addShape('Line', {\n            className: 'tooltip-crosshairs-y',\n            zIndex: 0,\n            visible: false,\n            attrs: mix({\n              x1: 0,\n              y1: br.y,\n              x2: 0,\n              y2: tl.y\n            }, crosshairsStyle)\n          });\n        }\n      };\n\n      return Tooltip;\n    }();\n\n    Global.tooltip = deepMix({\n      triggerOn: 'press',\n      triggerOff: 'pressend',\n      alwaysShow: false,\n      showTitle: false,\n      showCrosshairs: false,\n      crosshairsStyle: {\n        stroke: 'rgba(0, 0, 0, 0.25)',\n        lineWidth: 1\n      },\n      showTooltipMarker: true,\n      background: {\n        radius: 1,\n        fill: 'rgba(0, 0, 0, 0.65)',\n        padding: [3, 5]\n      },\n      titleStyle: {\n        fontSize: 12,\n        fill: '#fff',\n        textAlign: 'start',\n        textBaseline: 'top'\n      },\n      nameStyle: {\n        fontSize: 12,\n        fill: 'rgba(255, 255, 255, 0.65)',\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      valueStyle: {\n        fontSize: 12,\n        fill: '#fff',\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      showItemMarker: true,\n      itemMarkerStyle: {\n        radius: 3,\n        symbol: 'circle',\n        lineWidth: 1,\n        stroke: '#fff'\n      },\n      layout: 'horizontal',\n      snap: false\n    }, Global.tooltip || {});\n\n    function _getTooltipValueScale(geom) {\n      var colorAttr = geom.getAttr('color');\n\n      if (colorAttr) {\n        var colorScale = colorAttr.getScale(colorAttr.type);\n\n        if (colorScale.isLinear) {\n          return colorScale;\n        }\n      }\n\n      var xScale = geom.getXScale();\n      var yScale = geom.getYScale();\n\n      if (yScale) {\n        return yScale;\n      }\n\n      return xScale;\n    }\n\n    function getTooltipName(geom, origin) {\n      var name;\n      var nameScale;\n\n      var groupScales = geom._getGroupScales();\n\n      if (groupScales.length) {\n        each(groupScales, function (scale) {\n          nameScale = scale;\n          return false;\n        });\n      }\n\n      if (nameScale) {\n        var field = nameScale.field;\n        name = nameScale.getText(origin[field]);\n      } else {\n        var valueScale = _getTooltipValueScale(geom);\n\n        name = valueScale.alias || valueScale.field;\n      }\n\n      return name;\n    }\n\n    function getTooltipValue(geom, origin) {\n      var scale = _getTooltipValueScale(geom);\n\n      return scale.getText(origin[scale.field]);\n    }\n\n    function getTooltipTitle(geom, origin) {\n      var position = geom.getAttr('position');\n      var field = position.getFields()[0];\n      var scale = geom.get('scales')[field];\n      return scale.getText(origin[scale.field]);\n    }\n\n    function _indexOfArray(items, item) {\n      var rst = -1;\n      each(items, function (sub, index) {\n        if (sub.title === item.title && sub.name === item.name && sub.value === item.value && sub.color === item.color) {\n          rst = index;\n          return false;\n        }\n      });\n      return rst;\n    }\n\n    function _uniqItems(items) {\n      var tmp = [];\n      each(items, function (item) {\n        var index = _indexOfArray(tmp, item);\n\n        if (index === -1) {\n          tmp.push(item);\n        } else {\n          tmp[index] = item;\n        }\n      });\n      return tmp;\n    }\n\n    function isEqual$1(arr1, arr2) {\n      return JSON.stringify(arr1) === JSON.stringify(arr2);\n    }\n\n    var TooltipController = /*#__PURE__*/function () {\n      function TooltipController(cfg) {\n        var _this = this;\n\n        _defineProperty(this, \"handleShowEvent\", function (ev) {\n          var chart = _this.chart;\n          if (!_this.enable) return;\n          var plot = chart.get('plotRange');\n          var point = createEvent(ev, chart);\n\n          if (!isPointInPlot(point, plot) && !_this._tooltipCfg.alwaysShow) {\n            // not in chart plot\n            _this.hideTooltip();\n\n            return;\n          }\n\n          var lastTimeStamp = _this.timeStamp;\n          var timeStamp = +new Date();\n\n          if (timeStamp - lastTimeStamp > 16) {\n            _this.showTooltip(point);\n\n            _this.timeStamp = timeStamp;\n          }\n        });\n\n        _defineProperty(this, \"handleHideEvent\", function () {\n          if (!_this.enable) return;\n\n          _this.hideTooltip();\n        });\n\n        this.enable = true;\n        this.cfg = {};\n        this.tooltip = null;\n        this.chart = null;\n        this.timeStamp = 0;\n        mix(this, cfg);\n        var _chart = this.chart;\n\n        var canvas = _chart.get('canvas');\n\n        this.canvas = canvas;\n        this.canvasDom = canvas.get('el');\n      }\n\n      var _proto = TooltipController.prototype;\n\n      _proto._setCrosshairsCfg = function _setCrosshairsCfg() {\n        var self = this;\n        var chart = self.chart;\n        var defaultCfg = mix({}, Global.tooltip);\n        var geoms = chart.get('geoms');\n        var shapes = [];\n        each(geoms, function (geom) {\n          var type = geom.get('type');\n\n          if (shapes.indexOf(type) === -1) {\n            shapes.push(type);\n          }\n        });\n        var coordType = chart.get('coord').type;\n\n        if (geoms.length && (coordType === 'cartesian' || coordType === 'rect')) {\n          if (shapes.length === 1 && ['line', 'area', 'path', 'point'].indexOf(shapes[0]) !== -1) {\n            mix(defaultCfg, {\n              showCrosshairs: true\n            });\n          }\n        }\n\n        return defaultCfg;\n      };\n\n      _proto._getMaxLength = function _getMaxLength(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var _cfg = cfg,\n            layout = _cfg.layout,\n            plotRange = _cfg.plotRange;\n        return layout === 'horizontal' ? plotRange.br.x - plotRange.bl.x : plotRange.bl.y - plotRange.tr.y;\n      };\n\n      _proto.render = function render() {\n        var self = this;\n\n        if (self.tooltip) {\n          return;\n        }\n\n        var chart = self.chart;\n        var canvas = chart.get('canvas');\n        var frontPlot = chart.get('frontPlot').addGroup({\n          className: 'tooltipContainer',\n          zIndex: 10\n        });\n        var backPlot = chart.get('backPlot').addGroup({\n          className: 'tooltipContainer'\n        });\n        var plotRange = chart.get('plotRange');\n        var coord = chart.get('coord');\n\n        var defaultCfg = self._setCrosshairsCfg();\n\n        var cfg = self.cfg; // 通过 chart.tooltip() 接口传入的 tooltip 配置项\n\n        var tooltipCfg = deepMix({\n          plotRange: plotRange,\n          frontPlot: frontPlot,\n          backPlot: backPlot,\n          canvas: canvas,\n          fixed: coord.transposed || coord.isPolar\n        }, defaultCfg, cfg); // 创建 tooltip 实例需要的配置，不应该修改 this.cfg，即用户传入的配置\n\n        tooltipCfg.maxLength = self._getMaxLength(tooltipCfg);\n        this._tooltipCfg = tooltipCfg;\n        var tooltip = new Tooltip(tooltipCfg);\n        self.tooltip = tooltip; // 需要保持tooltip一直显示\n\n        if (tooltipCfg.alwaysShow && self.prePoint) {\n          this.showTooltip(self.prePoint);\n        }\n\n        self.bindEvents();\n      };\n\n      _proto.clear = function clear() {\n        var tooltip = this.tooltip;\n\n        if (tooltip) {\n          tooltip.destroy();\n          this.unBindEvents();\n        }\n\n        this.tooltip = null;\n        this._lastActive = null;\n      };\n\n      _proto._getTooltipMarkerStyle = function _getTooltipMarkerStyle(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var _cfg2 = cfg,\n            type = _cfg2.type,\n            items = _cfg2.items;\n        var tooltipCfg = this._tooltipCfg;\n\n        if (type === 'rect') {\n          var x;\n          var y;\n          var width;\n          var height;\n          var chart = this.chart;\n\n          var _chart$get = chart.get('plotRange'),\n              tl = _chart$get.tl,\n              br = _chart$get.br;\n\n          var coord = chart.get('coord');\n          var firstItem = items[0];\n          var lastItem = items[items.length - 1];\n          var intervalWidth = firstItem.width;\n\n          if (coord.transposed) {\n            x = tl.x;\n            y = lastItem.y - intervalWidth * 0.75;\n            width = br.x - tl.x;\n            height = firstItem.y - lastItem.y + 1.5 * intervalWidth;\n          } else {\n            x = firstItem.x - intervalWidth * 0.75;\n            y = tl.y;\n            width = lastItem.x - firstItem.x + 1.5 * intervalWidth;\n            height = br.y - tl.y;\n          }\n\n          cfg.style = mix({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            fill: '#CCD6EC',\n            opacity: 0.3\n          }, tooltipCfg.tooltipMarkerStyle);\n        } else {\n          cfg.style = mix({\n            radius: 4,\n            fill: '#fff',\n            lineWidth: 2\n          }, tooltipCfg.tooltipMarkerStyle);\n        }\n\n        return cfg;\n      };\n\n      _proto._setTooltip = function _setTooltip(point, items, tooltipMarkerCfg) {\n        if (tooltipMarkerCfg === void 0) {\n          tooltipMarkerCfg = {};\n        }\n\n        this.prePoint = point;\n        var lastActive = this._lastActive;\n        var tooltip = this.tooltip;\n        var cfg = this._tooltipCfg;\n        items = _uniqItems(items);\n        var chart = this.chart;\n        var coord = chart.get('coord');\n        var yScale = chart.getYScales()[0];\n        var snap = cfg.snap;\n\n        if (snap === false && yScale.isLinear) {\n          var invertPoint = coord.invertPoint(point);\n          var plot = chart.get('plotRange');\n          var tip;\n          var pos;\n\n          if (isPointInPlot(point, plot)) {\n            if (coord.transposed) {\n              tip = yScale.invert(invertPoint.x);\n              pos = point.x;\n              tooltip.setXTipContent(tip);\n              tooltip.setXTipPosition(pos);\n              tooltip.setYCrosshairPosition(pos);\n            } else {\n              tip = yScale.invert(invertPoint.y);\n              pos = point.y;\n              tooltip.setYTipContent(tip);\n              tooltip.setYTipPosition(pos);\n              tooltip.setXCrosshairPosition(pos);\n            }\n          }\n        }\n\n        if (cfg.onShow) {\n          cfg.onShow({\n            x: point.x,\n            y: point.y,\n            tooltip: tooltip,\n            items: items,\n            tooltipMarkerCfg: tooltipMarkerCfg\n          });\n        }\n\n        if (isEqual$1(lastActive, items)) {\n          if (snap === false && (directionEnabled(cfg.crosshairsType, 'y') || cfg.showYTip)) {\n            var canvas = this.chart.get('canvas');\n            canvas.draw();\n          }\n\n          return;\n        }\n\n        this._lastActive = items;\n        var onChange = cfg.onChange;\n\n        if (onChange) {\n          onChange({\n            x: point.x,\n            y: point.y,\n            tooltip: tooltip,\n            items: items,\n            tooltipMarkerCfg: tooltipMarkerCfg\n          });\n        }\n\n        var first = items[0];\n        var title = first.title || first.name;\n        var xTipPosX = first.x;\n\n        if (items.length > 1) {\n          xTipPosX = (items[0].x + items[items.length - 1].x) / 2;\n        }\n\n        tooltip.setContent(title, items, coord.transposed);\n        tooltip.setPosition(items, point);\n\n        if (coord.transposed) {\n          var yTipPosY = first.y;\n\n          if (items.length > 1) {\n            yTipPosY = (items[0].y + items[items.length - 1].y) / 2;\n          }\n\n          tooltip.setYTipContent(title);\n          tooltip.setYTipPosition(yTipPosY);\n          tooltip.setXCrosshairPosition(yTipPosY);\n\n          if (snap) {\n            tooltip.setXTipContent(first.value);\n            tooltip.setXTipPosition(xTipPosX);\n            tooltip.setYCrosshairPosition(xTipPosX);\n          }\n        } else {\n          tooltip.setXTipContent(title);\n          tooltip.setXTipPosition(xTipPosX);\n          tooltip.setYCrosshairPosition(xTipPosX);\n\n          if (snap) {\n            tooltip.setYTipContent(first.value);\n            tooltip.setYTipPosition(first.y);\n            tooltip.setXCrosshairPosition(first.y);\n          }\n        }\n\n        var markerItems = tooltipMarkerCfg.items;\n\n        if (cfg.showTooltipMarker && markerItems.length) {\n          tooltipMarkerCfg = this._getTooltipMarkerStyle(tooltipMarkerCfg);\n          tooltip.setMarkers(tooltipMarkerCfg);\n        } else {\n          tooltip.clearMarkers();\n        }\n\n        tooltip.show();\n      };\n\n      _proto.showTooltip = function showTooltip(point) {\n        var self = this;\n        var chart = self.chart;\n        var tooltipMarkerType;\n        var tooltipMarkerItems = [];\n        var items = [];\n        var cfg = self._tooltipCfg;\n        var showItemMarker = cfg.showItemMarker,\n            itemMarkerStyle = cfg.itemMarkerStyle,\n            alwaysShow = cfg.alwaysShow;\n        var marker;\n\n        if (showItemMarker) {\n          marker = itemMarkerStyle;\n        }\n\n        var geoms = chart.get('geoms');\n        var coord = chart.get('coord');\n        each(geoms, function (geom) {\n          if (geom.get('visible')) {\n            var type = geom.get('type');\n            var records = geom.getSnapRecords(point);\n            var adjust = geom.get('adjust'); // 漏斗图和金子塔图tooltip位置有问题，暂时不开放显示\n\n            if (type === 'interval' && adjust && adjust.type === 'symmetric') {\n              return;\n            }\n\n            each(records, function (record) {\n              if (record.x && record.y) {\n                var x = record.x,\n                    y = record.y,\n                    _origin = record._origin,\n                    color = record.color;\n                var tooltipItem = {\n                  x: x,\n                  y: isArray(y) ? y[1] : y,\n                  color: color || Global.defaultColor,\n                  origin: _origin,\n                  name: getTooltipName(geom, _origin),\n                  value: getTooltipValue(geom, _origin),\n                  title: getTooltipTitle(geom, _origin)\n                };\n\n                if (marker) {\n                  tooltipItem.marker = mix({\n                    fill: color || Global.defaultColor\n                  }, marker);\n                }\n\n                items.push(tooltipItem);\n\n                if (['line', 'area', 'path'].indexOf(type) !== -1) {\n                  tooltipMarkerType = 'circle';\n                  tooltipMarkerItems.push(tooltipItem);\n                } else if (type === 'interval' && (coord.type === 'cartesian' || coord.type === 'rect')) {\n                  tooltipMarkerType = 'rect';\n                  tooltipItem.width = geom.getSize(record._origin);\n                  tooltipMarkerItems.push(tooltipItem);\n                }\n              }\n            });\n          }\n        });\n\n        if (items.length) {\n          var tooltipMarkerCfg = {\n            items: tooltipMarkerItems,\n            type: tooltipMarkerType\n          };\n\n          self._setTooltip(point, items, tooltipMarkerCfg);\n\n          return;\n        }\n\n        if (!alwaysShow) {\n          self.hideTooltip();\n        }\n      };\n\n      _proto.hideTooltip = function hideTooltip() {\n        var cfg = this._tooltipCfg;\n        this._lastActive = null;\n        var tooltip = this.tooltip;\n\n        if (tooltip) {\n          tooltip.hide();\n\n          if (cfg.onHide) {\n            cfg.onHide({\n              tooltip: tooltip\n            });\n          }\n\n          var canvas = this.chart.get('canvas');\n          canvas.draw();\n        }\n      };\n\n      _proto._handleEvent = function _handleEvent(methodName, method, action) {\n        var canvas = this.canvas;\n        each([].concat(methodName), function (aMethod) {\n          if (action === 'bind') {\n            canvas.on(aMethod, method);\n          } else {\n            canvas.off(aMethod, method);\n          }\n        });\n      };\n\n      _proto.bindEvents = function bindEvents() {\n        var cfg = this._tooltipCfg;\n        var triggerOn = cfg.triggerOn,\n            triggerOff = cfg.triggerOff,\n            alwaysShow = cfg.alwaysShow;\n        triggerOn && this._handleEvent(triggerOn, this.handleShowEvent, 'bind'); // 如果 !alwaysShow, 则在手势离开后就隐藏\n\n        if (!alwaysShow) {\n          this._handleEvent(triggerOff, this.handleHideEvent, 'bind');\n        }\n      };\n\n      _proto.unBindEvents = function unBindEvents() {\n        var cfg = this._tooltipCfg;\n        var triggerOn = cfg.triggerOn,\n            triggerOff = cfg.triggerOff,\n            alwaysShow = cfg.alwaysShow;\n        triggerOn && this._handleEvent(triggerOn, this.handleShowEvent, 'unBind');\n\n        if (!alwaysShow) {\n          this._handleEvent(triggerOff, this.handleHideEvent, 'unBind');\n        }\n      };\n\n      return TooltipController;\n    }();\n\n    function init(chart) {\n      var tooltipController = new TooltipController({\n        chart: chart\n      });\n      chart.set('tooltipController', tooltipController);\n\n      chart.tooltip = function (enable, cfg) {\n        if (isObject(enable)) {\n          cfg = enable;\n          enable = true;\n        }\n\n        tooltipController.enable = enable;\n\n        if (cfg) {\n          tooltipController.cfg = cfg;\n        }\n\n        return this;\n      };\n    }\n\n    function afterGeomDraw(chart) {\n      var tooltipController = chart.get('tooltipController');\n      tooltipController.render();\n\n      chart.showTooltip = function (point) {\n        tooltipController.showTooltip(point);\n        return this;\n      };\n\n      chart.hideTooltip = function () {\n        tooltipController.hideTooltip();\n        return this;\n      };\n    }\n\n    function clearInner(chart) {\n      var tooltipController = chart.get('tooltipController');\n      tooltipController.clear();\n    }\n    var tooltip = {\n      init: init,\n      afterGeomDraw: afterGeomDraw,\n      clearInner: clearInner\n    };\n\n    var Tooltip$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init,\n        afterGeomDraw: afterGeomDraw,\n        clearInner: clearInner,\n        'default': tooltip\n    });\n\n    Global.guide = deepMix({\n      line: {\n        style: {\n          stroke: '#a3a3a3',\n          lineWidth: 1\n        },\n        top: true\n      },\n      text: {\n        style: {\n          fill: '#787878',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        },\n        offsetX: 0,\n        offsetY: 0,\n        top: true\n      },\n      rect: {\n        style: {\n          fill: '#fafafa'\n        },\n        top: false\n      },\n      arc: {\n        style: {\n          stroke: '#a3a3a3'\n        },\n        top: true\n      },\n      html: {\n        offsetX: 0,\n        offsetY: 0,\n        alignX: 'center',\n        alignY: 'middle'\n      },\n      tag: {\n        top: true,\n        offsetX: 0,\n        offsetY: 0,\n        side: 4,\n        background: {\n          padding: 5,\n          radius: 2,\n          fill: '#1890FF'\n        },\n        textStyle: {\n          fontSize: 12,\n          fill: '#fff',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        }\n      },\n      point: {\n        top: true,\n        offsetX: 0,\n        offsetY: 0,\n        style: {\n          fill: '#fff',\n          r: 3,\n          lineWidth: 2,\n          stroke: '#1890ff'\n        }\n      }\n    }, Global.guide || {});\n\n    var GuideController = /*#__PURE__*/function () {\n      function GuideController(cfg) {\n        this.guides = [];\n        this.xScale = null;\n        this.yScales = null;\n        this.guideShapes = [];\n        mix(this, cfg);\n      }\n\n      var _proto = GuideController.prototype;\n\n      _proto._toString = function _toString(position) {\n        if (isFunction(position)) {\n          position = position(this.xScale, this.yScales);\n        }\n\n        position = position.toString();\n        return position;\n      };\n\n      _proto._getId = function _getId(shape, guide) {\n        var id = guide.id;\n\n        if (!id) {\n          var type = guide.type;\n\n          if (type === 'arc' || type === 'line' || type === 'rect') {\n            id = this._toString(guide.start) + '-' + this._toString(guide.end);\n          } else {\n            id = this._toString(guide.position);\n          }\n        }\n\n        return id;\n      };\n\n      _proto.paint = function paint(coord) {\n        var self = this;\n        var chart = self.chart,\n            guides = self.guides,\n            xScale = self.xScale,\n            yScales = self.yScales;\n        var guideShapes = [];\n        each(guides, function (guide, idx) {\n          guide.xScale = xScale;\n          guide.yScales = yScales;\n          var container;\n\n          if (guide.type === 'regionFilter') {\n            // TODO: RegionFilter support animation\n            guide.chart = chart;\n          } else {\n            container = guide.top ? self.frontPlot : self.backPlot;\n          }\n\n          guide.coord = coord;\n          guide.container = container;\n          guide.canvas = chart.get('canvas');\n          var shape = guide.render(coord, container);\n\n          if (shape) {\n            var id = self._getId(shape, guide);\n\n            [].concat(shape).forEach(function (s) {\n              s._id = s.get('className') + '-' + id;\n              s.set('index', idx);\n              guideShapes.push(s);\n            });\n          }\n        });\n        self.guideShapes = guideShapes;\n      };\n\n      _proto.clear = function clear() {\n        this.reset();\n        this.guides = [];\n        return this;\n      };\n\n      _proto.reset = function reset() {\n        var guides = this.guides;\n        each(guides, function (guide) {\n          guide.remove();\n        });\n      };\n\n      _proto._createGuide = function _createGuide(type, cfg) {\n        var ClassName = upperFirst(type);\n        var guide = new GuideBase[ClassName](deepMix({}, Global.guide[type], cfg));\n        this.guides.push(guide);\n        return guide;\n      };\n\n      _proto.line = function line(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('line', cfg);\n      };\n\n      _proto.text = function text(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('text', cfg);\n      };\n\n      _proto.arc = function arc(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('arc', cfg);\n      };\n\n      _proto.html = function html(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('html', cfg);\n      };\n\n      _proto.rect = function rect(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('rect', cfg);\n      };\n\n      _proto.tag = function tag(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('tag', cfg);\n      };\n\n      _proto.point = function point(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('point', cfg);\n      };\n\n      _proto.regionFilter = function regionFilter(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('regionFilter', cfg);\n      };\n\n      return GuideController;\n    }();\n\n    function init$1(chart) {\n      var guideController = new GuideController({\n        frontPlot: chart.get('frontPlot').addGroup({\n          zIndex: 20,\n          className: 'guideContainer'\n        }),\n        backPlot: chart.get('backPlot').addGroup({\n          className: 'guideContainer'\n        })\n      });\n      chart.set('guideController', guideController);\n      /**\n       * 为图表添加 guide\n       * @return {GuideController} 返回 guide 控制器\n       */\n\n      chart.guide = function () {\n        return guideController;\n      };\n    }\n\n    function afterGeomDraw$1(chart) {\n      var guideController = chart.get('guideController');\n\n      if (!guideController.guides.length) {\n        return;\n      }\n\n      var xScale = chart.getXScale();\n      var yScales = chart.getYScales();\n      var coord = chart.get('coord');\n      guideController.xScale = xScale;\n      guideController.yScales = yScales;\n      guideController.chart = chart; // for regionFilter\n\n      guideController.paint(coord);\n    }\n\n    function clear(chart) {\n      chart.get('guideController').clear();\n    }\n\n    function repaint(chart) {\n      chart.get('guideController').reset();\n    }\n    var guide = {\n      init: init$1,\n      afterGeomDraw: afterGeomDraw$1,\n      clear: clear,\n      repaint: repaint\n    };\n\n    var Guide = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$1,\n        afterGeomDraw: afterGeomDraw$1,\n        clear: clear,\n        repaint: repaint,\n        'default': guide\n    });\n\n    var LEGEND_GAP = 12;\n    var MARKER_SIZE = 3;\n    var DEFAULT_CFG = {\n      itemMarginBottom: 12,\n      itemGap: 10,\n      showTitle: false,\n      titleStyle: {\n        fontSize: 12,\n        fill: '#808080',\n        textAlign: 'start',\n        textBaseline: 'top'\n      },\n      nameStyle: {\n        fill: '#808080',\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      valueStyle: {\n        fill: '#000000',\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      unCheckStyle: {\n        fill: '#bfbfbf'\n      },\n      itemWidth: 'auto',\n      wordSpace: 6,\n      selectedMode: 'multiple' // 'multiple' or 'single'\n\n    }; // Register the default configuration for Legend\n\n    Global.legend = deepMix({\n      common: DEFAULT_CFG,\n      // common legend configuration\n      right: mix({\n        position: 'right',\n        layout: 'vertical'\n      }, DEFAULT_CFG),\n      left: mix({\n        position: 'left',\n        layout: 'vertical'\n      }, DEFAULT_CFG),\n      top: mix({\n        position: 'top',\n        layout: 'horizontal'\n      }, DEFAULT_CFG),\n      bottom: mix({\n        position: 'bottom',\n        layout: 'horizontal'\n      }, DEFAULT_CFG)\n    }, Global.legend || {});\n\n    function getPaddingByPos(pos, appendPadding) {\n      var padding = 0;\n      appendPadding = parsePadding(appendPadding);\n\n      switch (pos) {\n        case 'top':\n          padding = appendPadding[0];\n          break;\n\n        case 'right':\n          padding = appendPadding[1];\n          break;\n\n        case 'bottom':\n          padding = appendPadding[2];\n          break;\n\n        case 'left':\n          padding = appendPadding[3];\n          break;\n      }\n\n      return padding;\n    }\n\n    var LegendController = /*#__PURE__*/function () {\n      function LegendController(cfg) {\n        var _this = this;\n\n        _defineProperty(this, \"handleEvent\", function (ev) {\n          var self = _this;\n\n          function findItem(x, y) {\n            var result = null;\n            var legends = self.legends;\n            each(legends, function (legendItems) {\n              each(legendItems, function (legend) {\n                var itemsGroup = legend.itemsGroup,\n                    legendHitBoxes = legend.legendHitBoxes;\n                var children = itemsGroup.get('children');\n\n                if (children.length) {\n                  var legendPosX = legend.x;\n                  var legendPosY = legend.y;\n                  each(legendHitBoxes, function (box, index) {\n                    if (x >= box.x + legendPosX && x <= box.x + box.width + legendPosX && y >= box.y + legendPosY && y <= box.height + box.y + legendPosY) {\n                      // inbox\n                      result = {\n                        clickedItem: children[index],\n                        clickedLegend: legend\n                      };\n                      return false;\n                    }\n                  });\n                }\n              });\n            });\n            return result;\n          }\n\n          var chart = self.chart;\n\n          var _createEvent = createEvent(ev, chart),\n              x = _createEvent.x,\n              y = _createEvent.y;\n\n          var clicked = findItem(x, y);\n\n          if (clicked && clicked.clickedLegend.clickable !== false) {\n            var clickedItem = clicked.clickedItem,\n                clickedLegend = clicked.clickedLegend;\n\n            if (clickedLegend.onClick) {\n              ev.clickedItem = clickedItem;\n              clickedLegend.onClick(ev);\n            } else if (!clickedLegend.custom) {\n              var checked = clickedItem.get('checked');\n              var value = clickedItem.get('dataValue');\n              var filteredVals = clickedLegend.filteredVals,\n                  field = clickedLegend.field,\n                  selectedMode = clickedLegend.selectedMode;\n              var isSingeSelected = selectedMode === 'single';\n\n              if (isSingeSelected) {\n                chart.filter(field, function (val) {\n                  return val === value;\n                });\n              } else {\n                if (checked) {\n                  filteredVals.push(value);\n                } else {\n                  remove(filteredVals, value);\n                }\n\n                chart.filter(field, function (val) {\n                  return filteredVals.indexOf(val) === -1;\n                });\n              }\n\n              chart.repaint();\n            }\n          }\n        });\n\n        this.legendCfg = {};\n        this.enable = true;\n        this.position = 'top';\n        mix(this, cfg);\n        var _chart = this.chart;\n        this.canvasDom = _chart.get('canvas').get('el');\n        this.clear();\n      }\n\n      var _proto = LegendController.prototype;\n\n      _proto.addLegend = function addLegend(scale, items, filteredVals) {\n        var self = this;\n        var legendCfg = self.legendCfg;\n        var field = scale.field;\n        var fieldCfg = legendCfg[field];\n\n        if (fieldCfg === false) {\n          return null;\n        }\n\n        if (fieldCfg && fieldCfg.custom) {\n          self.addCustomLegend(field);\n        } else {\n          var position = legendCfg.position || self.position;\n\n          if (fieldCfg && fieldCfg.position) {\n            position = fieldCfg.position;\n          }\n\n          if (scale.isCategory) {\n            self._addCategoryLegend(scale, items, position, filteredVals);\n          }\n        }\n      };\n\n      _proto.addCustomLegend = function addCustomLegend(field) {\n        var self = this;\n        var legendCfg = self.legendCfg;\n\n        if (field && legendCfg[field]) {\n          legendCfg = legendCfg[field];\n        }\n\n        var position = legendCfg.position || self.position;\n        var legends = self.legends;\n        legends[position] = legends[position] || [];\n        var items = legendCfg.items;\n\n        if (!items) {\n          return null;\n        }\n\n        var container = self.container;\n        each(items, function (item) {\n          if (!isPlainObject(item.marker)) {\n            item.marker = {\n              symbol: item.marker || 'circle',\n              fill: item.fill,\n              radius: MARKER_SIZE\n            };\n          } else {\n            item.marker.radius = item.marker.radius || MARKER_SIZE;\n          }\n\n          item.checked = isNil(item.checked) ? true : item.checked;\n          item.name = item.name || item.value;\n        });\n        var legend = new List(deepMix({}, Global.legend[position], legendCfg, {\n          maxLength: self._getMaxLength(position),\n          items: items,\n          parent: container\n        }));\n        legends[position].push(legend);\n      };\n\n      _proto.clear = function clear() {\n        var legends = this.legends;\n        each(legends, function (legendItems) {\n          each(legendItems, function (legend) {\n            legend.clear();\n          });\n        });\n        this.legends = {};\n        this.unBindEvents();\n      };\n\n      _proto._isFiltered = function _isFiltered(scale, values, value) {\n        var rst = false;\n        each(values, function (val) {\n          rst = rst || scale.getText(val) === scale.getText(value);\n\n          if (rst) {\n            return false;\n          }\n        });\n        return rst;\n      };\n\n      _proto._getMaxLength = function _getMaxLength(position) {\n        var chart = this.chart;\n        var appendPadding = parsePadding(chart.get('appendPadding'));\n        return position === 'right' || position === 'left' ? chart.get('height') - (appendPadding[0] + appendPadding[2]) : chart.get('width') - (appendPadding[1] + appendPadding[3]);\n      };\n\n      _proto._addCategoryLegend = function _addCategoryLegend(scale, items, position, filteredVals) {\n        var self = this;\n        var legendCfg = self.legendCfg,\n            legends = self.legends,\n            container = self.container,\n            chart = self.chart;\n        var field = scale.field;\n        legends[position] = legends[position] || [];\n        var symbol = 'circle';\n\n        if (legendCfg[field] && legendCfg[field].marker) {\n          symbol = legendCfg[field].marker;\n        } else if (legendCfg.marker) {\n          symbol = legendCfg.marker;\n        }\n\n        each(items, function (item) {\n          if (isPlainObject(symbol)) {\n            mix(item.marker, symbol);\n          } else {\n            item.marker.symbol = symbol;\n          }\n\n          if (filteredVals) {\n            item.checked = !self._isFiltered(scale, filteredVals, item.dataValue);\n          }\n        });\n        var legendItems = chart.get('legendItems');\n        legendItems[field] = items;\n        var lastCfg = deepMix({}, Global.legend[position], legendCfg[field] || legendCfg, {\n          maxLength: self._getMaxLength(position),\n          items: items,\n          field: field,\n          filteredVals: filteredVals,\n          parent: container\n        });\n\n        if (lastCfg.showTitle) {\n          deepMix(lastCfg, {\n            title: scale.alias || scale.field\n          });\n        }\n\n        var legend = new List(lastCfg);\n        legends[position].push(legend);\n        return legend;\n      };\n\n      _proto._alignLegend = function _alignLegend(legend, pre, position) {\n        var self = this;\n        var _self$plotRange = self.plotRange,\n            tl = _self$plotRange.tl,\n            bl = _self$plotRange.bl;\n        var chart = self.chart;\n        var offsetX = legend.offsetX || 0;\n        var offsetY = legend.offsetY || 0;\n        var chartWidth = chart.get('width');\n        var chartHeight = chart.get('height');\n        var appendPadding = parsePadding(chart.get('appendPadding'));\n        var legendHeight = legend.getHeight();\n        var legendWidth = legend.getWidth();\n        var x = 0;\n        var y = 0;\n\n        if (position === 'left' || position === 'right') {\n          var verticalAlign = legend.verticalAlign || 'middle';\n          var height = Math.abs(tl.y - bl.y);\n          x = position === 'left' ? appendPadding[3] : chartWidth - legendWidth - appendPadding[1];\n          y = (height - legendHeight) / 2 + tl.y;\n\n          if (verticalAlign === 'top') {\n            y = tl.y;\n          } else if (verticalAlign === 'bottom') {\n            y = bl.y - legendHeight;\n          }\n\n          if (pre) {\n            y = pre.get('y') - legendHeight - LEGEND_GAP;\n          }\n        } else {\n          var align = legend.align || 'left';\n          x = appendPadding[3];\n\n          if (align === 'center') {\n            x = chartWidth / 2 - legendWidth / 2;\n          } else if (align === 'right') {\n            x = chartWidth - (legendWidth + appendPadding[1]);\n          }\n\n          y = position === 'top' ? appendPadding[0] + Math.abs(legend.container.getBBox().minY) : chartHeight - legendHeight;\n\n          if (pre) {\n            var preWidth = pre.getWidth();\n            x = pre.x + preWidth + LEGEND_GAP;\n          }\n        }\n\n        if (position === 'bottom' && offsetY > 0) {\n          offsetY = 0;\n        }\n\n        if (position === 'right' && offsetX > 0) {\n          offsetX = 0;\n        }\n\n        legend.moveTo(x + offsetX, y + offsetY);\n      };\n\n      _proto.alignLegends = function alignLegends() {\n        var self = this;\n        var legends = self.legends;\n        each(legends, function (legendItems, position) {\n          each(legendItems, function (legend, index) {\n            var pre = legendItems[index - 1];\n\n            self._alignLegend(legend, pre, position);\n          });\n        });\n        return self;\n      };\n\n      _proto.bindEvents = function bindEvents() {\n        var legendCfg = this.legendCfg;\n        var triggerOn = legendCfg.triggerOn || 'touchstart';\n        addEventListener(this.canvasDom, triggerOn, this.handleEvent);\n      };\n\n      _proto.unBindEvents = function unBindEvents() {\n        var legendCfg = this.legendCfg;\n        var triggerOn = legendCfg.triggerOn || 'touchstart';\n        removeEventListener(this.canvasDom, triggerOn, this.handleEvent);\n      };\n\n      return LegendController;\n    }();\n\n    function init$2(chart) {\n      var legendController = new LegendController({\n        container: chart.get('backPlot').addGroup(),\n        plotRange: chart.get('plotRange'),\n        chart: chart\n      });\n      chart.set('legendController', legendController);\n\n      chart.legend = function (field, cfg) {\n        var legendCfg = legendController.legendCfg;\n        legendController.enable = true;\n\n        if (isBoolean(field)) {\n          legendController.enable = field;\n          legendCfg = cfg || {};\n        } else if (isObject(field)) {\n          legendCfg = field;\n        } else {\n          legendCfg[field] = cfg;\n        }\n\n        legendController.legendCfg = legendCfg;\n        return this;\n      };\n    }\n\n    function beforeGeomDraw(chart) {\n      var legendController = chart.get('legendController');\n      if (!legendController.enable) return null; // legend is not displayed\n\n      var legendCfg = legendController.legendCfg,\n          container = legendController.container;\n\n      if (legendCfg && legendCfg.custom) {\n        legendController.addCustomLegend();\n      } else {\n        var legendItems = chart.getLegendItems();\n        var scales = chart.get('scales');\n        var filters = chart.get('filters');\n        each(legendItems, function (items, field) {\n          var scale = scales[field];\n          var values = scale.values;\n          var filteredVals;\n\n          if (filters && filters[field]) {\n            filteredVals = values.filter(function (v) {\n              return !filters[field](v);\n            });\n          } else {\n            filteredVals = [];\n          }\n\n          legendController.addLegend(scale, items, filteredVals);\n        });\n      }\n\n      if (legendCfg && legendCfg.clickable !== false) {\n        legendController.bindEvents();\n      }\n\n      var legends = legendController.legends;\n      var legendRange = {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n      each(legends, function (legendItems, position) {\n        var padding = 0;\n        each(legendItems, function (legend) {\n          var width = legend.getWidth();\n          var height = legend.getHeight();\n\n          if (position === 'top' || position === 'bottom') {\n            padding = Math.max(padding, height);\n\n            if (legend.offsetY > 0) {\n              padding += legend.offsetY;\n            }\n          } else {\n            padding = Math.max(padding, width);\n\n            if (legend.offsetX > 0) {\n              padding += legend.offsetX;\n            }\n          }\n        });\n        legendRange[position] = padding + getPaddingByPos(position, chart.get('appendPadding'));\n      });\n      chart.set('legendRange', legendRange);\n\n      if (Object.keys(legends).length) {\n        container.set('ariaLabel', lang.legend.prefix);\n      } else {\n        container.set('ariaLabel', null);\n      }\n    }\n\n    function afterGeomDraw$2(chart) {\n      var legendController = chart.get('legendController');\n      legendController.alignLegends();\n    }\n\n    function clearInner$1(chart) {\n      var legendController = chart.get('legendController');\n      legendController.clear();\n      chart.set('legendRange', null);\n    }\n    var legend = {\n      init: init$2,\n      beforeGeomDraw: beforeGeomDraw,\n      afterGeomDraw: afterGeomDraw$2,\n      clearInner: clearInner$1\n    };\n\n    var Legend = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$2,\n        beforeGeomDraw: beforeGeomDraw,\n        afterGeomDraw: afterGeomDraw$2,\n        clearInner: clearInner$1,\n        'default': legend\n    });\n\n    var clock = typeof performance === 'object' && performance.now ? performance : Date;\n\n    var Timeline = /*#__PURE__*/function () {\n      function Timeline() {\n        this.anims = [];\n        this.time = null;\n        this.playing = false;\n        this.canvas = [];\n      }\n\n      var _proto = Timeline.prototype;\n\n      _proto.play = function play() {\n        var self = this;\n        self.time = clock.now();\n        self.playing = true;\n\n        function step() {\n          if (self.playing) {\n            requestAnimationFrame(step);\n            self.update();\n          }\n        }\n\n        requestAnimationFrame(step);\n      };\n\n      _proto.stop = function stop() {\n        this.playing = false;\n        this.time = null;\n        this.canvas = [];\n      };\n\n      _proto.pushAnim = function pushAnim(animInfo) {\n        // 先启动动画\n        if (!this.playing) {\n          this.play();\n        }\n\n        var delay = animInfo.delay,\n            duration = animInfo.duration;\n        var startTime = this.time + delay;\n        var endTime = startTime + duration;\n        animInfo.startTime = startTime;\n        animInfo.endTime = endTime;\n        this.anims.push(animInfo);\n      };\n\n      _proto.update = function update() {\n        var currentTime = clock.now();\n        this.canvas = [];\n\n        if (!this.anims.length) {\n          this.stop();\n          return;\n        }\n\n        for (var i = 0; i < this.anims.length; i++) {\n          var propertyAnim = this.anims[i];\n\n          if (currentTime < propertyAnim.startTime || propertyAnim.hasEnded) {\n            continue;\n          }\n\n          var shape = propertyAnim.shape; // shape\n\n          if (shape.get('destroyed')) {\n            this.anims.splice(i, 1);\n            i--;\n            continue;\n          }\n\n          var startState = propertyAnim.startState,\n              endState = propertyAnim.endState,\n              interpolate = propertyAnim.interpolate,\n              duration = propertyAnim.duration;\n\n          if (currentTime >= propertyAnim.startTime && !propertyAnim.hasStarted) {\n            propertyAnim.hasStarted = true;\n\n            if (propertyAnim.onStart) {\n              propertyAnim.onStart();\n            }\n          }\n\n          var t = (currentTime - propertyAnim.startTime) / duration;\n          t = Math.max(0, Math.min(t, 1));\n          t = propertyAnim.easing(t);\n\n          if (propertyAnim.onFrame) {\n            propertyAnim.onFrame(t);\n          } else {\n            for (var key in interpolate) {\n              var diff = interpolate[key];\n              var value = diff(t);\n              var newValue = void 0;\n\n              if (key === 'points') {\n                newValue = [];\n                var aLen = Math.max(startState.points.length, endState.points.length);\n\n                for (var j = 0; j < aLen; j += 2) {\n                  newValue.push({\n                    x: value[j],\n                    y: value[j + 1]\n                  });\n                }\n              } else {\n                newValue = value;\n              }\n\n              shape._attrs.attrs[key] = newValue;\n              shape._attrs.bbox = null; // should clear calculated bbox\n            }\n          }\n\n          var canvas = shape.get('canvas');\n\n          if (this.canvas.indexOf(canvas) === -1) {\n            this.canvas.push(canvas);\n          }\n\n          if (propertyAnim.onUpdate) {\n            propertyAnim.onUpdate(t);\n          }\n\n          if (currentTime >= propertyAnim.endTime && !propertyAnim.hasEnded) {\n            propertyAnim.hasEnded = true;\n\n            if (propertyAnim.onEnd) {\n              propertyAnim.onEnd();\n            }\n          }\n\n          if (t === 1) {\n            // end\n            this.anims.splice(i, 1);\n            i--;\n          }\n        }\n\n        this.canvas.map(function (c) {\n          c.draw();\n          return c;\n        });\n        this.time = clock.now();\n      };\n\n      return Timeline;\n    }();\n\n    function linear$1(k) {\n      return k;\n    }\n\n    function quadraticIn(k) {\n      return k * k;\n    }\n\n    function quadraticOut(k) {\n      return k * (2 - k);\n    }\n\n    function quadraticInOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    }\n\n    function cubicIn(k) {\n      return k * k * k;\n    }\n\n    function cubicOut(k) {\n      return --k * k * k + 1;\n    }\n\n    function cubicInOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    }\n\n    function elasticIn(k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n      if (k === 0) return 0;\n      if (k === 1) return 1;\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    }\n\n    function elasticOut(k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n      if (k === 0) return 0;\n      if (k === 1) return 1;\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n    }\n\n    function elasticInOut(k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n      if (k === 0) return 0;\n      if (k === 1) return 1;\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      if ((k *= 2) < 1) {\n        return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n      }\n\n      return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    }\n\n    function backIn(k) {\n      var s = 1.70158;\n      return k * k * ((s + 1) * k - s);\n    }\n\n    function backOut(k) {\n      var s = 1.70158;\n      return (k = k - 1) * k * ((s + 1) * k + s) + 1;\n    }\n\n    function backInOut(k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    }\n\n    function bounceIn(k) {\n      return 1 - bounceOut(1 - k);\n    }\n\n    function bounceOut(k) {\n      if ((k /= 1) < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      }\n\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n\n    function bounceInOut(k) {\n      if (k < 0.5) {\n        return bounceIn(k * 2) * 0.5;\n      }\n\n      return bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n\n    var Easing = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        linear: linear$1,\n        quadraticIn: quadraticIn,\n        quadraticOut: quadraticOut,\n        quadraticInOut: quadraticInOut,\n        cubicIn: cubicIn,\n        cubicOut: cubicOut,\n        cubicInOut: cubicInOut,\n        elasticIn: elasticIn,\n        elasticOut: elasticOut,\n        elasticInOut: elasticInOut,\n        backIn: backIn,\n        backOut: backOut,\n        backInOut: backInOut,\n        bounceIn: bounceIn,\n        bounceOut: bounceOut,\n        bounceInOut: bounceInOut\n    });\n\n    function plainArray(arr) {\n      var result = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        if (arr[i]) {\n          result.push(arr[i].x);\n          result.push(arr[i].y);\n        }\n      }\n\n      return result;\n    }\n\n    function interpolateNumber(a, b) {\n      a = +a;\n      b -= a;\n      return function (t) {\n        return a + b * t;\n      };\n    }\n\n    function interpolateArray(a, b) {\n      var nb = b ? b.length : 0;\n      var na = a ? Math.min(nb, a.length) : 0;\n      var x = new Array(na);\n      var c = new Array(nb);\n      var i;\n\n      for (i = 0; i < na; ++i) {\n        x[i] = interpolateNumber(a[i], b[i]);\n      }\n\n      for (; i < nb; ++i) {\n        c[i] = b[i];\n      }\n\n      return function (t) {\n        for (i = 0; i < na; ++i) {\n          c[i] = x[i](t);\n        }\n\n        return c;\n      };\n    }\n\n    var Animator = /*#__PURE__*/function () {\n      function Animator(shape, source, timeline) {\n        this.hasStarted = false;\n        this.hasEnded = false;\n        this.shape = shape;\n        this.source = source;\n        this.timeline = timeline;\n        this.animate = null;\n      } // delay, attrs, duration, easing\n\n\n      var _proto = Animator.prototype;\n\n      _proto.to = function to(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var delay = cfg.delay || 0;\n        var attrs = cfg.attrs || {};\n        var duration = cfg.duration || 1000;\n        var easing; // 缓动函数\n\n        if (typeof cfg.easing === 'function') {\n          easing = cfg.easing;\n        } else {\n          easing = Easing[cfg.easing] || linear$1;\n        }\n\n        var animInfo = {\n          shape: this.shape,\n          delay: delay,\n          duration: duration,\n          easing: easing\n        };\n        var interpolate = {}; // 差值函数\n\n        for (var attrName in attrs) {\n          var startValue = this.source[attrName];\n          var endValue = attrs[attrName];\n\n          if (attrName === 'points') {\n            startValue = plainArray(startValue);\n            endValue = plainArray(endValue);\n            interpolate.points = interpolateArray(startValue, endValue);\n            this.source.points = startValue;\n            attrs.points = endValue;\n          } else if (attrName === 'matrix') {\n            interpolate.matrix = interpolateArray(startValue, endValue);\n          } else {\n            interpolate[attrName] = interpolateNumber(startValue, endValue);\n          }\n        }\n\n        animInfo.interpolate = interpolate;\n        animInfo.startState = this.source;\n        animInfo.endState = attrs;\n        this.timeline.pushAnim(animInfo);\n        this.animate = animInfo;\n        return this;\n      };\n\n      _proto.onFrame = function onFrame(callback) {\n        // 自定义每一帧动画的动作\n        if (this.animate) {\n          this.animate.onFrame = function (frame) {\n            callback(frame);\n          };\n        }\n\n        return this;\n      };\n\n      _proto.onStart = function onStart(callback) {\n        if (this.animate) {\n          this.animate.onStart = function () {\n            callback();\n          };\n        }\n\n        return this;\n      };\n\n      _proto.onUpdate = function onUpdate(callback) {\n        if (this.animate) {\n          this.animate.onUpdate = function (frame) {\n            callback(frame);\n          };\n        }\n\n        return this;\n      };\n\n      _proto.onEnd = function onEnd(callback) {\n        if (this.animate) {\n          this.animate.onEnd = function () {\n            callback();\n          };\n        }\n\n        return this;\n      };\n\n      return Animator;\n    }();\n\n    var defaultAnimationCfg = {\n      appear: {\n        duration: 450,\n        easing: 'quadraticOut'\n      },\n      // 'appear' animation options\n      update: {\n        duration: 300,\n        easing: 'quadraticOut'\n      },\n      // 'update' animation options\n      enter: {\n        duration: 300,\n        easing: 'quadraticOut'\n      },\n      // 'enter' animation options\n      leave: {\n        duration: 350,\n        easing: 'quadraticIn'\n      } // 'leave' animation options\n\n    };\n    var Animate = {\n      defaultCfg: {},\n      Action: {},\n      getAnimation: function getAnimation(geomType, coord, animationType) {\n        var geomAnimateCfg = this.defaultCfg[geomType];\n\n        if (geomAnimateCfg) {\n          var animation = geomAnimateCfg[animationType];\n\n          if (isFunction(animation)) {\n            return animation(coord);\n          }\n        }\n\n        return false;\n      },\n      getAnimateCfg: function getAnimateCfg(geomType, animationType) {\n        var defaultCfg = defaultAnimationCfg[animationType];\n        var geomConfig = this.defaultCfg[geomType];\n\n        if (geomConfig && geomConfig.cfg && geomConfig.cfg[animationType]) {\n          return deepMix({}, defaultCfg, geomConfig.cfg[animationType]);\n        }\n\n        return defaultCfg;\n      },\n      registerAnimation: function registerAnimation(animationName, animationFun) {\n        var _extends2;\n\n        if (!this.Action) {\n          this.Action = {};\n        }\n\n        this.Action = _extends({}, this.Action, (_extends2 = {}, _extends2[animationName] = animationFun, _extends2));\n      }\n    };\n\n    /**\n     * Utility\n     * @author sima.zhang1990@gmail.com\n     */\n\n    function getCoordInfo(coord) {\n      var start = coord.start;\n      var end = coord.end;\n      return {\n        start: start,\n        end: end,\n        width: end.x - start.x,\n        height: Math.abs(end.y - start.y)\n      };\n    }\n\n    function getScaledMatrix(shape, v, direct) {\n      var scaledMatrix;\n      shape.apply(v);\n      var x = v[0];\n      var y = v[1];\n\n      if (direct === 'x') {\n        shape.transform([['t', x, y], ['s', 0.01, 1], ['t', -x, -y]]);\n        var matrix = shape.getMatrix();\n        scaledMatrix = Matrix.transform(matrix, [['t', x, y], ['s', 100, 1], ['t', -x, -y]]);\n      } else if (direct === 'y') {\n        shape.transform([['t', x, y], ['s', 1, 0.01], ['t', -x, -y]]);\n\n        var _matrix = shape.getMatrix();\n\n        scaledMatrix = Matrix.transform(_matrix, [['t', x, y], ['s', 1, 100], ['t', -x, -y]]);\n      } else if (direct === 'xy') {\n        shape.transform([['t', x, y], ['s', 0.01, 0.01], ['t', -x, -y]]);\n\n        var _matrix2 = shape.getMatrix();\n\n        scaledMatrix = Matrix.transform(_matrix2, [['t', x, y], ['s', 100, 100], ['t', -x, -y]]);\n      }\n\n      return scaledMatrix;\n    }\n\n    function getAnimateParam(animateCfg, index, id) {\n      var result = {};\n\n      if (animateCfg.delay) {\n        result.delay = isFunction(animateCfg.delay) ? animateCfg.delay(index, id) : animateCfg.delay;\n      }\n\n      result.easing = animateCfg.easing;\n      result.duration = animateCfg.duration;\n      result.delay = animateCfg.delay;\n      return result;\n    }\n\n    function doAnimation(shape, endState, animateCfg, callback) {\n      var id = shape._id;\n      var index = shape.get('index');\n\n      var _getAnimateParam = getAnimateParam(animateCfg, index, id),\n          easing = _getAnimateParam.easing,\n          delay = _getAnimateParam.delay,\n          duration = _getAnimateParam.duration;\n\n      var anim = shape.animate().to({\n        attrs: endState,\n        duration: duration,\n        delay: delay,\n        easing: easing\n      });\n\n      if (callback) {\n        anim.onEnd(function () {\n          callback();\n        });\n      }\n    }\n\n    /**\n     * Animation functions for shape\n     * @author sima.zhang1990@gmail.com\n     */\n    /*\n    function waveIn(shape, animateCfg, coord) {\n      const clip = Helpers.getClip(coord);\n      clip.set('canvas', shape.get('canvas'));\n      shape.attr('clip', clip);\n      const onEnd = function() {\n        shape.attr('clip', null);\n        clip.remove(true);\n      };\n      Helpers.doAnimation(clip, clip.endState, animateCfg, onEnd);\n    }\n\n    function scaleInX(shape, animateCfg) {\n      const box = shape.getBBox();\n      const points = shape.get('origin').points;\n      let x;\n      const y = (box.minY + box.maxY) / 2;\n\n      if (points[0].y - points[1].y > 0) { // 当顶点在零点之下\n        x = box.maxX;\n      } else {\n        x = box.minX;\n      }\n      const scaledMatrix = Helpers.getScaledMatrix(shape, [ x, y ], 'x');\n      Helpers.doAnimation(shape, { matrix: scaledMatrix }, animateCfg);\n    }\n\n    function scaleInY(shape, animateCfg) {\n      const box = shape.getBBox();\n      const points = shape.get('origin').points;\n      const x = (box.minX + box.maxX) / 2;\n      let y;\n\n      if (points[0].y - points[1].y <= 0) { // 当顶点在零点之下\n        y = box.maxY;\n      } else {\n        y = box.minY;\n      }\n      const scaledMatrix = Helpers.getScaledMatrix(shape, [ x, y ], 'x');\n      Helpers.doAnimation(shape, { matrix: scaledMatrix }, animateCfg);\n    }\n    */\n\n    function fadeIn(shape, animateCfg) {\n      var fillOpacity = isNil(shape.attr('fillOpacity')) ? 1 : shape.attr('fillOpacity');\n      var strokeOpacity = isNil(shape.attr('strokeOpacity')) ? 1 : shape.attr('strokeOpacity');\n      shape.attr('fillOpacity', 0);\n      shape.attr('strokeOpacity', 0);\n      var endState = {\n        fillOpacity: fillOpacity,\n        strokeOpacity: strokeOpacity\n      };\n      doAnimation(shape, endState, animateCfg);\n    }\n\n    var ShapeAction = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        fadeIn: fadeIn\n    });\n\n    /**\n     * Group animate functions\n     * @author sima.zhang1990@gmail.com\n     */\n\n    function _groupScaleIn(container, animateCfg, coord, zeroY, type) {\n      var _getCoordInfo = getCoordInfo(coord),\n          start = _getCoordInfo.start,\n          end = _getCoordInfo.end,\n          width = _getCoordInfo.width,\n          height = _getCoordInfo.height;\n\n      var x;\n      var y;\n      var clip = new Shape$2.Rect({\n        attrs: {\n          x: start.x,\n          y: end.y,\n          width: width,\n          height: height\n        }\n      });\n\n      if (type === 'y') {\n        x = start.x + width / 2;\n        y = zeroY.y < start.y ? zeroY.y : start.y;\n      } else if (type === 'x') {\n        x = zeroY.x > start.x ? zeroY.x : start.x;\n        y = start.y + height / 2;\n      } else if (type === 'xy') {\n        if (coord.isPolar) {\n          x = coord.center.x;\n          y = coord.center.y;\n        } else {\n          x = (start.x + end.x) / 2;\n          y = (start.y + end.y) / 2;\n        }\n      }\n\n      var endMatrix = getScaledMatrix(clip, [x, y], type);\n      clip.isClip = true;\n      clip.endState = {\n        matrix: endMatrix\n      };\n      clip.set('canvas', container.get('canvas'));\n      container.attr('clip', clip);\n\n      var onEnd = function onEnd() {\n        container.attr('clip', null);\n        clip.remove(true);\n      };\n\n      doAnimation(clip, clip.endState, animateCfg, onEnd);\n    }\n\n    function _shapeScale(container, animateCfg, type) {\n      var shapes = container.get('children');\n      var x;\n      var y;\n      var endMatrix;\n\n      for (var i = 0, len = shapes.length; i < len; i++) {\n        var shape = shapes[i];\n        var box = shape.getBBox();\n        x = (box.minX + box.maxX) / 2;\n        y = (box.minY + box.maxY) / 2;\n        endMatrix = getScaledMatrix(shape, [x, y], type);\n        doAnimation(shape, {\n          matrix: endMatrix\n        }, animateCfg);\n      }\n    }\n\n    function groupScaleInX(container, animateCfg, coord, zeroY) {\n      _groupScaleIn(container, animateCfg, coord, zeroY, 'x');\n    }\n\n    function groupScaleInY(container, animateCfg, coord, zeroY) {\n      _groupScaleIn(container, animateCfg, coord, zeroY, 'y');\n    }\n\n    function groupScaleInXY(container, animateCfg, coord, zeroY) {\n      _groupScaleIn(container, animateCfg, coord, zeroY, 'xy');\n    }\n\n    function shapesScaleInX(container, animateCfg) {\n      _shapeScale(container, animateCfg, 'x');\n    }\n\n    function shapesScaleInY(container, animateCfg) {\n      _shapeScale(container, animateCfg, 'y');\n    }\n\n    function shapesScaleInXY(container, animateCfg) {\n      _shapeScale(container, animateCfg, 'xy');\n    }\n\n    function groupWaveIn(container, animateCfg, coord) {\n      var clip = getClip(coord);\n      clip.set('canvas', container.get('canvas'));\n      container.attr('clip', clip);\n\n      var onEnd = function onEnd() {\n        container.attr('clip', null);\n        clip.remove(true);\n      };\n\n      var endState = {};\n\n      if (coord.isPolar) {\n        var startAngle = coord.startAngle,\n            endAngle = coord.endAngle;\n        endState.endAngle = endAngle;\n        clip.attr('endAngle', startAngle);\n      } else {\n        var start = coord.start,\n            end = coord.end;\n        var width = Math.abs(start.x - end.x);\n        var height = Math.abs(start.y - end.y);\n\n        if (coord.isTransposed) {\n          clip.attr('height', 0);\n          endState.height = height;\n        } else {\n          clip.attr('width', 0);\n          endState.width = width;\n        }\n      }\n\n      doAnimation(clip, endState, animateCfg, onEnd);\n    }\n\n    var GroupAction = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        groupWaveIn: groupWaveIn,\n        groupScaleInX: groupScaleInX,\n        groupScaleInY: groupScaleInY,\n        groupScaleInXY: groupScaleInXY,\n        shapesScaleInX: shapesScaleInX,\n        shapesScaleInY: shapesScaleInY,\n        shapesScaleInXY: shapesScaleInXY\n    });\n\n    /**\n     * Handle the detail animations\n     * @author sima.zhang1990@gmail.com\n     */\n    var timeline;\n\n    Element.prototype.animate = function () {\n      var attrs = mix({}, this.get('attrs'));\n      return new Animator(this, attrs, timeline);\n    };\n\n    Chart.prototype.animate = function (cfg) {\n      this.set('animate', cfg);\n      return this;\n    };\n\n    Animate.Action = ShapeAction;\n    Animate.defaultCfg = {\n      interval: {\n        enter: function enter(coord) {\n          if (coord.isPolar && coord.transposed) {\n            // for pie chart\n            return function (shape) {\n              shape.set('zIndex', -1);\n              var container = shape.get('parent');\n              container.sort();\n            };\n          }\n\n          return fadeIn;\n        }\n      },\n      area: {\n        enter: function enter(coord) {\n          if (coord.isPolar) return null;\n          return fadeIn;\n        }\n      },\n      line: {\n        enter: function enter(coord) {\n          if (coord.isPolar) return null;\n          return fadeIn;\n        }\n      },\n      path: {\n        enter: function enter(coord) {\n          if (coord.isPolar) return null;\n          return fadeIn;\n        }\n      }\n    };\n    var GROUP_ANIMATION = {\n      line: function line(coord) {\n        if (coord.isPolar) {\n          return groupScaleInXY;\n        }\n\n        return groupWaveIn;\n      },\n      area: function area(coord) {\n        if (coord.isPolar) {\n          return groupScaleInXY;\n        }\n\n        return groupWaveIn;\n      },\n      path: function path(coord) {\n        if (coord.isPolar) {\n          return groupScaleInXY;\n        }\n\n        return groupWaveIn;\n      },\n      point: function point() {\n        return shapesScaleInXY;\n      },\n      interval: function interval(coord) {\n        var result;\n\n        if (coord.isPolar) {\n          // polar coodinate\n          result = groupScaleInXY;\n\n          if (coord.transposed) {\n            // pie chart\n            result = groupWaveIn;\n          }\n        } else {\n          result = coord.transposed ? groupScaleInX : groupScaleInY;\n        }\n\n        return result;\n      },\n      schema: function schema() {\n        return groupWaveIn;\n      }\n    };\n\n    function diff(fromAttrs, toAttrs) {\n      var endState = {};\n\n      for (var k in toAttrs) {\n        if (isNumber(fromAttrs[k]) && fromAttrs[k] !== toAttrs[k]) {\n          endState[k] = toAttrs[k];\n        } else if (isArray(fromAttrs[k]) && JSON.stringify(fromAttrs[k]) !== JSON.stringify(toAttrs[k])) {\n          endState[k] = toAttrs[k];\n        }\n      }\n\n      return endState;\n    } // Add a unique id identifier to each shape\n\n\n    function _getShapeId(geom, dataObj, geomIdx) {\n      var type = geom.get('type');\n      var id = 'geom' + geomIdx + '-' + type;\n      var xScale = geom.getXScale();\n      var yScale = geom.getYScale();\n      var xField = xScale.field || 'x';\n      var yField = yScale.field || 'y';\n      var yVal = dataObj[yField];\n      var xVal;\n\n      if (xScale.isIdentity) {\n        xVal = xScale.value;\n      } else {\n        xVal = dataObj[xField];\n      }\n\n      if (type === 'interval' || type === 'schema') {\n        id += '-' + xVal;\n      } else if (type === 'line' || type === 'area' || type === 'path') {\n        id += '-' + type;\n      } else {\n        id += xScale.isCategory ? '-' + xVal : '-' + xVal + '-' + yVal;\n      }\n\n      var groupScales = geom._getGroupScales();\n\n      each(groupScales, function (groupScale) {\n        var field = groupScale.field;\n\n        if (groupScale.type !== 'identity') {\n          id += '-' + dataObj[field];\n        }\n      });\n      return id;\n    } // get geometry's shapes\n\n\n    function getShapes(geoms, chart, coord) {\n      var shapes = [];\n      each(geoms, function (geom, geomIdx) {\n        var geomContainer = geom.get('container');\n        var geomShapes = geomContainer.get('children');\n        var type = geom.get('type');\n        var animateCfg = isNil(geom.get('animateCfg')) ? _getAnimateCfgByShapeType(type, chart) : geom.get('animateCfg');\n\n        if (animateCfg !== false) {\n          each(geomShapes, function (shape, index) {\n            if (shape.get('className') === type) {\n              shape._id = _getShapeId(geom, shape.get('origin')._origin, geomIdx);\n              shape.set('coord', coord);\n              shape.set('animateCfg', animateCfg);\n              shape.set('index', index);\n              shapes.push(shape);\n            }\n          });\n        }\n\n        geom.set('shapes', geomShapes);\n      });\n      return shapes;\n    }\n\n    function cache(shapes) {\n      var rst = {};\n\n      for (var i = 0, len = shapes.length; i < len; i++) {\n        var shape = shapes[i];\n        if (!shape._id || shape.isClip) continue;\n        var id = shape._id;\n        rst[id] = {\n          _id: id,\n          type: shape.get('type'),\n          // the type of shape\n          attrs: mix({}, shape._attrs.attrs),\n          // the graphics attributes of shape\n          className: shape.get('className'),\n          geomType: shape.get('className'),\n          index: shape.get('index'),\n          coord: shape.get('coord'),\n          animateCfg: shape.get('animateCfg')\n        };\n      }\n\n      return rst;\n    }\n\n    function getAnimate(geomType, coord, animationType, animationName) {\n      var result;\n\n      if (isFunction(animationName)) {\n        result = animationName;\n      } else if (isString(animationName)) {\n        result = Animate.Action[animationName];\n      } else {\n        result = Animate.getAnimation(geomType, coord, animationType);\n      }\n\n      return result;\n    }\n\n    function getAnimateCfg(geomType, animationType, animateCfg) {\n      if (animateCfg === false || isObject(animateCfg) && animateCfg[animationType] === false) {\n        return false;\n      }\n\n      var defaultCfg = Animate.getAnimateCfg(geomType, animationType);\n\n      if (animateCfg && animateCfg[animationType]) {\n        return deepMix({}, defaultCfg, animateCfg[animationType]);\n      }\n\n      return defaultCfg;\n    }\n\n    function addAnimate(cache, shapes, canvas) {\n      var animate;\n      var animateCfg; // the order of animation: leave -> update -> enter\n\n      var updateShapes = [];\n      var newShapes = [];\n      each(shapes, function (shape) {\n        var result = cache[shape._id];\n\n        if (!result) {\n          newShapes.push(shape);\n        } else {\n          shape.set('cacheShape', result);\n          updateShapes.push(shape);\n          delete cache[shape._id];\n        }\n      }); // first do the leave animation\n\n      each(cache, function (deletedShape) {\n        var className = deletedShape.className,\n            coord = deletedShape.coord,\n            _id = deletedShape._id,\n            attrs = deletedShape.attrs,\n            index = deletedShape.index,\n            type = deletedShape.type;\n        animateCfg = getAnimateCfg(className, 'leave', deletedShape.animateCfg);\n        if (animateCfg === false) return true;\n        animate = getAnimate(className, coord, 'leave', animateCfg.animation);\n\n        if (isFunction(animate)) {\n          var tempShape = canvas.addShape(type, {\n            attrs: attrs,\n            index: index,\n            canvas: canvas,\n            className: className\n          });\n          tempShape._id = _id;\n          animate(tempShape, animateCfg, coord);\n        }\n      }); // then do the update animation\n\n      each(updateShapes, function (updateShape) {\n        var className = updateShape.get('className');\n        animateCfg = getAnimateCfg(className, 'update', updateShape.get('animateCfg'));\n        if (animateCfg === false) return true;\n        var coord = updateShape.get('coord');\n        var cacheAttrs = updateShape.get('cacheShape').attrs;\n        var endState = diff(cacheAttrs, updateShape._attrs.attrs); // 判断如果属性相同的话就不进行变换\n\n        if (Object.keys(endState).length) {\n          animate = getAnimate(className, coord, 'update', animateCfg.animation);\n\n          if (isFunction(animate)) {\n            animate(updateShape, animateCfg, coord);\n          } else {\n            var startState = {};\n            each(endState, function (value, key) {\n              startState[key] = cacheAttrs[key];\n            });\n            updateShape.attr(startState);\n            updateShape.animate().to({\n              attrs: endState,\n              duration: animateCfg.duration,\n              easing: animateCfg.easing,\n              delay: animateCfg.delay\n            }).onEnd(function () {\n              updateShape.set('cacheShape', null);\n            });\n          }\n        }\n      }); // last, enter animation\n\n      each(newShapes, function (newShape) {\n        // 新图形元素的进场元素\n        var className = newShape.get('className');\n        var coord = newShape.get('coord');\n        animateCfg = getAnimateCfg(className, 'enter', newShape.get('animateCfg'));\n        if (animateCfg === false) return true;\n        animate = getAnimate(className, coord, 'enter', animateCfg.animation);\n\n        if (isFunction(animate)) {\n          if (className === 'interval' && coord.isPolar && coord.transposed) {\n            var index = newShape.get('index');\n            var lastShape = updateShapes[index - 1];\n            animate(newShape, animateCfg, lastShape);\n          } else {\n            animate(newShape, animateCfg, coord);\n          }\n        }\n      });\n    }\n\n    function _getAnimateCfgByShapeType(type, chart) {\n      if (!type) {\n        return null;\n      }\n\n      var animateCfg = chart.get('animate');\n\n      if (type.indexOf('guide-tag') > -1) {\n        type = 'guide-tag';\n      }\n\n      if (isObject(animateCfg)) {\n        return animateCfg[type];\n      }\n\n      if (animateCfg === false) {\n        return false;\n      }\n\n      return null;\n    }\n\n    function afterCanvasInit()\n    /* chart */\n    {\n      timeline = new Timeline();\n      timeline.play();\n    }\n\n    function beforeCanvasDraw(chart) {\n      if (chart.get('animate') === false) {\n        return;\n      }\n\n      var isUpdate = chart.get('isUpdate');\n      var canvas = chart.get('canvas');\n      var coord = chart.get('coord');\n      var geoms = chart.get('geoms');\n      var caches = canvas.get('caches') || [];\n\n      if (caches.length === 0) {\n        isUpdate = false;\n      }\n\n      var cacheShapes = getShapes(geoms, chart, coord);\n\n      var _chart$get = chart.get('axisController'),\n          frontPlot = _chart$get.frontPlot,\n          backPlot = _chart$get.backPlot;\n\n      var axisShapes = frontPlot.get('children').concat(backPlot.get('children'));\n      var guideShapes = [];\n\n      if (chart.get('guideController')) {\n        guideShapes = chart.get('guideController').guideShapes;\n      }\n\n      var componentShapes = [];\n      axisShapes.concat(guideShapes).forEach(function (s) {\n        var className = s.get('className');\n\n        var animateCfg = _getAnimateCfgByShapeType(className, chart);\n\n        s.set('coord', coord);\n        s.set('animateCfg', animateCfg);\n        componentShapes.push(s);\n        cacheShapes.push(s);\n      });\n      canvas.set('caches', cache(cacheShapes));\n\n      if (isUpdate) {\n        addAnimate(caches, cacheShapes, canvas);\n      } else {\n        // do the appear animation\n        var animateCfg;\n        var animate;\n        each(geoms, function (geom) {\n          var type = geom.get('type');\n          var geomCfg = isNil(geom.get('animateCfg')) ? _getAnimateCfgByShapeType(type, chart) : geom.get('animateCfg');\n\n          if (geomCfg !== false) {\n            animateCfg = getAnimateCfg(type, 'appear', geomCfg);\n            animate = getAnimate(type, coord, 'appear', animateCfg.animation);\n\n            if (isFunction(animate)) {\n              var shapes = geom.get('shapes');\n              each(shapes, function (shape) {\n                animate(shape, animateCfg, coord);\n              });\n            } else if (GROUP_ANIMATION[type]) {\n              // do the default animation\n              animate = GroupAction[animateCfg.animation] || GROUP_ANIMATION[type](coord);\n              var yScale = geom.getYScale();\n              var zeroY = coord.convertPoint({\n                x: 0,\n                y: yScale.scale(geom.getYMinValue())\n              });\n              var container = geom.get('container');\n              animate && animate(container, animateCfg, coord, zeroY);\n            }\n          }\n        }); // do the animation of components\n\n        each(componentShapes, function (shape) {\n          var animateCfg = shape.get('animateCfg');\n          var className = shape.get('className');\n\n          if (animateCfg && animateCfg.appear) {\n            // if user configure\n            var defaultCfg = Animate.getAnimateCfg(className, 'appear');\n            var appearCfg = deepMix({}, defaultCfg, animateCfg.appear);\n\n            var _animate = getAnimate(className, coord, 'appear', appearCfg.animation);\n\n            if (isFunction(_animate)) {\n              _animate(shape, appearCfg, coord);\n            }\n          }\n        });\n      }\n    }\n\n    function afterCanvasDestroyed()\n    /* chart */\n    {\n      timeline.stop();\n    }\n    var detail = {\n      afterCanvasInit: afterCanvasInit,\n      beforeCanvasDraw: beforeCanvasDraw,\n      afterCanvasDestroyed: afterCanvasDestroyed\n    };\n\n    var Animation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        afterCanvasInit: afterCanvasInit,\n        beforeCanvasDraw: beforeCanvasDraw,\n        afterCanvasDestroyed: afterCanvasDestroyed,\n        'default': detail\n    });\n\n    Chart._Interactions = {};\n\n    Chart.registerInteraction = function (type, constructor) {\n      Chart._Interactions[type] = constructor;\n    };\n\n    Chart.getInteraction = function (type) {\n      return Chart._Interactions[type];\n    };\n\n    Chart.prototype.interaction = function (type, cfg) {\n      var interactions = this._interactions || {};\n\n      if (interactions[type]) {\n        // if reprated, destroy last\n        interactions[type].destroy();\n      }\n\n      var Ctor = Chart.getInteraction(type);\n      var interact = new Ctor(cfg, this);\n      interactions[type] = interact;\n      this._interactions = interactions;\n      return this;\n    };\n\n    Chart.prototype.clearInteraction = function (type) {\n      var interactions = this._interactions;\n      if (!interactions) return;\n\n      if (type) {\n        interactions[type] && interactions[type].destroy();\n        delete interactions[type];\n      } else {\n        each(interactions, function (interaction, key) {\n          interaction.destroy();\n          delete interactions[key];\n        });\n      }\n\n      return this;\n    };\n\n    function isValuesEqual(values, newValues) {\n      if (values.length !== newValues.length) {\n        return false;\n      }\n\n      var lastIndex = values.length - 1;\n      return values[0] === newValues[0] && values[lastIndex] === newValues[lastIndex];\n    } // 不同交互之间共享的上下文\n\n\n    var defaultRange = [0, 1];\n\n    var Context = /*#__PURE__*/function () {\n      // 最开始的原始值\n      // 当前显示的范围\n      // 缩放最小的点数\n      // 最小的缩放比例, 默认通过minCount计算\n      // minScale = 0.01;\n      // 交互开始时，ticks个数，主要为了每次缩放后，更新ticks个数\n      // lastTickCount;\n      function Context(chart) {\n        var _this = this;\n\n        _defineProperty(this, \"chart\", null);\n\n        _defineProperty(this, \"values\", null);\n\n        _defineProperty(this, \"range\", defaultRange);\n\n        _defineProperty(this, \"startRange\", defaultRange);\n\n        _defineProperty(this, \"minCount\", 10);\n\n        _defineProperty(this, \"_afterinit\", function () {\n          // 初始化value值\n          var scale = _this.getPinchScale(); // 记录原始全量数据\n\n\n          var values = [].concat(scale.values);\n          _this.values = values; // 最小的缩放比例\n\n          if (!_this.minScale) {\n            _this.minScale = _this.minCount / values.length;\n          } // 初始化的时候有设置range，则初始化成默认比例\n\n\n          if (_this.range !== defaultRange) {\n            _this.updateRange(_this.range);\n\n            _this.updateTicks();\n          }\n        });\n\n        _defineProperty(this, \"_afterdatachange\", function () {\n          _this.updateRange(_this.range);\n        });\n\n        this.chart = chart;\n\n        this._initEvent(chart);\n      }\n\n      var _proto = Context.prototype;\n\n      _proto._initEvent = function _initEvent(chart) {\n        // 在整体初始化后还需要设置一些初始状态\n        chart.on(EVENT_AFTER_INIT, this._afterinit);\n        chart.on(EVENT_AFTER_DATA_CHANGE, this._afterdatachange);\n      } // 缩放的主轴scale\n      ;\n\n      _proto.getPinchScale = function getPinchScale() {\n        var chart = this.chart; // 默认缩放x轴\n\n        var scale = chart.getXScale();\n        return scale;\n      } // 跟随轴的scale\n      ;\n\n      _proto.getFollowScale = function getFollowScale() {\n        var chart = this.chart; // 默认缩放x轴\n\n        var scales = chart.getYScales() || [];\n        return scales[0];\n      };\n\n      _proto.start = function start() {\n        var range = this.range;\n        var scale = this.getPinchScale();\n        var start = range[0],\n            end = range[1]; // 记录交互起始的范围\n\n        this.startRange = [start, end]; // 记录开始时的ticks个数\n\n        this.lastTickCount = scale.tickCount;\n      };\n\n      _proto.doZoom = function doZoom(leftScale, rightScale, zoom) {\n        var range = this.startRange,\n            minScale = this.minScale;\n        var start = range[0],\n            end = range[1];\n        var zoomOffset = 1 - zoom;\n        var rangeLen = end - start;\n        var rangeOffset = rangeLen * zoomOffset;\n        var leftOffset = rangeOffset * leftScale;\n        var rightOffset = rangeOffset * rightScale;\n        var newStart = Math.max(0, start - leftOffset);\n        var newEnd = Math.min(1, end + rightOffset);\n        var newRange = [newStart, newEnd]; // 如果已经到了最小比例，则不能再继续再放大\n\n        if (newEnd - newStart < minScale) {\n          return;\n        }\n\n        this.updateRange(newRange);\n      };\n\n      _proto.doMove = function doMove(ratio) {\n        // 不管是0， 还是其他，都不用处理\n        if (!ratio) return;\n        var range = this.startRange;\n        var start = range[0],\n            end = range[1];\n        var rangeLen = end - start;\n        var rangeOffset = rangeLen * ratio;\n        var newStart = start - rangeOffset;\n        var newEnd = end - rangeOffset; // 处理边界值\n\n        var newRange;\n\n        if (newStart < 0) {\n          newRange = [0, rangeLen];\n        } else if (newEnd > 1) {\n          newRange = [1 - rangeLen, 1];\n        } else {\n          newRange = [newStart, newEnd];\n        }\n\n        this.updateRange(newRange);\n      };\n\n      _proto.updateRange = function updateRange(range) {\n        var values = this.values; // 0， 1 的范围之间\n\n        var start = range[0],\n            end = range[1]; // start 不能小于0\n\n        start = Math.max(0, start); // end 不能大于1\n\n        end = Math.min(1, end); // 设置当前的范围\n\n        this.range = [start, end];\n        var len = values.length;\n        var valueStart = start * len;\n        var valueEnd = end * len; // 从原始数据里截取需要显示的数据\n\n        var newValues = values.slice(valueStart, valueEnd);\n        this.repaint(newValues);\n      };\n\n      _proto.repaint = function repaint(newValues) {\n        var chart = this.chart;\n        var scale = this.getPinchScale();\n        var currentValues = scale.values,\n            ticks = scale.ticks; // 如果新数组和当前显示的数组相同，则不更新\n\n        if (isValuesEqual(currentValues, newValues)) {\n          return;\n        } // 更新主轴values\n\n\n        this.updateScale(scale, {\n          ticks: ticks,\n          values: newValues\n        });\n        this.updateFollowScale(scale, newValues);\n        chart.repaint();\n      };\n\n      _proto.updateFollowScale = function updateFollowScale(pinchScale, pinchValues) {\n        var chart = this.chart;\n        var followScale = this.getFollowScale();\n        var pinchField = pinchScale.field,\n            pinchScaleType = pinchScale.type;\n        var followField = followScale.field; // 根据主轴的value值，找到所有从轴的value值\n\n        var values = []; // 转成map，让查找性能更高\n\n        var pinchValueMap = {};\n        pinchValues.forEach(function (item) {\n          pinchValueMap[item] = true;\n        });\n        var data = chart.get('data');\n        data.forEach(function (item) {\n          if (pinchScaleType === 'timeCat') {\n            var value = toTimeStamp(item[pinchField]);\n\n            if (pinchValueMap[value]) {\n              values.push(item[followField]);\n            }\n          }\n        });\n\n        var _getRange = getRange$1(values),\n            min = _getRange.min,\n            max = _getRange.max;\n\n        this.updateScale(followScale, {\n          min: min,\n          max: max,\n          nice: true\n        });\n      };\n\n      _proto.updateScale = function updateScale(scale, cfg) {\n        if (!scale) {\n          return;\n        }\n\n        scale.change(cfg);\n      } // 上一次的tick个数\n      ;\n\n      _proto.updateTicks = function updateTicks() {\n        var chart = this.chart,\n            values = this.values;\n        var scale = this.getPinchScale();\n        var currentValues = scale.values,\n            tickCount = scale.tickCount; // 根据当前数据的比例，和定义的tickCount计算应该需要多少个ticks\n\n        var newTickCount = Math.round(tickCount * values.length / currentValues.length);\n        var catTicks = getTickMethod('cat');\n        var ticks = catTicks({\n          tickCount: newTickCount,\n          values: values\n        });\n        this.updateScale(scale, {\n          ticks: ticks,\n          values: currentValues\n        }); // 更新完后，需要重新绘制一次\n\n        chart.repaint();\n      };\n\n      _proto.destroy = function destroy() {\n        var chart = this.chart;\n        chart.off(EVENT_AFTER_INIT, this._afterinit);\n        chart.off(EVENT_AFTER_DATA_CHANGE, this._afterdatachange);\n      };\n\n      return Context;\n    }();\n\n    var Base$2 = /*#__PURE__*/function () {\n      var _proto = Base.prototype;\n\n      // 交互的上下文\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {};\n      };\n\n      _proto.getInteractionContext = function getInteractionContext(chart) {\n        var interactionContext = chart.get('interactionContext');\n\n        if (interactionContext) {\n          return interactionContext;\n        }\n\n        interactionContext = new Context(chart);\n        chart.set('interactionContext', interactionContext);\n        return interactionContext;\n      };\n\n      function Base(cfg, chart) {\n        var _this = this;\n\n        _defineProperty(this, \"type\", '');\n\n        _defineProperty(this, \"startEvent\", 'touchstart');\n\n        _defineProperty(this, \"processEvent\", 'touchmove');\n\n        _defineProperty(this, \"endEvent\", 'touchend');\n\n        _defineProperty(this, \"resetEvent\", null);\n\n        _defineProperty(this, \"context\", null);\n\n        _defineProperty(this, \"_start\", function (ev) {\n          _this.preStart && _this.preStart(ev);\n\n          _this.start(ev);\n\n          _this.onStart && _this.onStart(ev);\n        });\n\n        _defineProperty(this, \"_process\", function (ev) {\n          _this.preProcess && _this.preProcess(ev);\n\n          _this.process(ev);\n\n          _this.onProcess && _this.onProcess(ev);\n        });\n\n        _defineProperty(this, \"_end\", function (ev) {\n          _this.preEnd && _this.preEnd(ev);\n\n          _this.end(ev);\n\n          _this.onEnd && _this.onEnd(ev);\n        });\n\n        _defineProperty(this, \"_reset\", function (ev) {\n          _this.preReset && _this.preReset(ev);\n\n          _this.reset(ev);\n\n          _this.onReset && _this.onReset(ev);\n        });\n\n        mix(this, this.getDefaultCfg(), cfg);\n        this.context = this.getInteractionContext(chart);\n        this.chart = chart; // 只处理range, 暂时先这么处理后面再看情况调整\n\n        var range = this.range;\n\n        if (range) {\n          this.context.range = range;\n        }\n\n        this._bindEvents(chart);\n      }\n\n      _proto._bindEvents = function _bindEvents(chart) {\n        var startEvent = this.startEvent,\n            processEvent = this.processEvent,\n            endEvent = this.endEvent,\n            resetEvent = this.resetEvent;\n        var canvas = chart.get('canvas'); // 统一绑定事件\n\n        canvas.on(startEvent, this._start);\n        canvas.on(processEvent, this._process);\n        canvas.on(endEvent, this._end);\n        canvas.on(resetEvent, this._reset);\n      };\n\n      _proto._clearEvents = function _clearEvents() {\n        var chart = this.chart,\n            startEvent = this.startEvent,\n            processEvent = this.processEvent,\n            endEvent = this.endEvent,\n            resetEvent = this.resetEvent;\n        var canvas = chart.get('canvas'); // 统一绑定事件\n\n        canvas.off(startEvent, this._start);\n        canvas.off(processEvent, this._process);\n        canvas.off(endEvent, this._end);\n        canvas.off(resetEvent, this._start);\n      };\n\n      // override\n      _proto.start = function start() {} // override\n      ;\n\n      _proto.process = function process() {} // override\n      ;\n\n      _proto.end = function end() {} // override\n      ;\n\n      _proto.reset = function reset() {};\n\n      _proto.destroy = function destroy() {\n        this.context.destroy();\n\n        this._clearEvents();\n      };\n\n      return Base;\n    }();\n\n    var Pan = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Pan, _Base);\n\n      function Pan() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Pan.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          type: 'pan',\n          startEvent: 'panstart',\n          processEvent: 'pan',\n          endEvent: 'panend'\n        };\n      };\n\n      _proto.start = function start() {\n        var context = this.context;\n        context.start();\n      };\n\n      _proto.process = function process(e) {\n        var direction = e.direction,\n            deltaX = e.deltaX;\n\n        if (direction === 'up' || direction === 'down') {\n          return;\n        }\n\n        e.preventDefault && e.preventDefault();\n        var context = this.context;\n        var chart = context.chart;\n        var coord = chart.get('coord');\n        var start = coord.start,\n            end = coord.end;\n        var coordWidth = end.x - start.x;\n        var ratio = deltaX / coordWidth;\n        context.doMove(ratio);\n      };\n\n      return Pan;\n    }(Base$2);\n\n    var Pinch = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Pinch, _Base);\n\n      var _proto = Pinch.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          type: 'pinch',\n          startEvent: 'pinchstart',\n          processEvent: 'pinch',\n          endEvent: 'pinchend'\n        };\n      };\n\n      function Pinch(cfg, chart) {\n        var _this;\n\n        _this = _Base.call(this, cfg, chart) || this;\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            context = _assertThisInitialize.context;\n\n        mix(context, cfg);\n        return _this;\n      }\n\n      _proto.start = function start() {\n        var context = this.context;\n        context.start();\n      };\n\n      _proto.process = function process(e) {\n        e.preventDefault && e.preventDefault();\n        var zoom = e.zoom,\n            center = e.center;\n        var context = this.context;\n        var chart = context.chart;\n        var coord = chart.get('coord');\n        var start = coord.start,\n            end = coord.end;\n        var coordWidth = end.x - start.x;\n        var leftLen = Math.abs(center.x - start.x);\n        var rightLen = Math.abs(end.x - center.x); // 计算左右缩放的比例\n\n        var leftScale = leftLen / coordWidth;\n        var rightScale = rightLen / coordWidth;\n        context.doZoom(leftScale, rightScale, zoom);\n      };\n\n      _proto.end = function end() {\n        // 缩放完成后再更新ticks\n        var context = this.context;\n        context.updateTicks();\n      };\n\n      return Pinch;\n    }(Base$2);\n\n    Chart.registerInteraction('pan', Pan);\n    Chart.registerInteraction('pinch', Pinch);\n\n    /**\n     * Default, without interactins\n     */\n    var Component = {\n      // 为了兼容之前版本\n      Marker: Shape$2.Marker,\n      Tooltip: Tooltip\n    }; // register plugins\n\n    Chart.plugins.register([Tooltip$1, Legend, Guide, Animation]); // 默认添加交互\n    var index = {\n      Component: Component,\n      Global: Global,\n      Chart: Chart,\n      Shape: Shape$1,\n      G: G,\n      Util: Util,\n      Helper: Helper,\n      track: track,\n      Animate: Animate\n    };\n\n    exports.Animate = Animate;\n    exports.Chart = Chart;\n    exports.Component = Component;\n    exports.G = G;\n    exports.Global = Global;\n    exports.Helper = Helper;\n    exports.Shape = Shape$1;\n    exports.Util = Util;\n    exports.default = index;\n    exports.track = track;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"sourceRoot":""}